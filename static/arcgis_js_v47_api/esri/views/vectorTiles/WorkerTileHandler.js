// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.7/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/vectorTiles/WorkerTile":function(){define("require exports dojo/Deferred ../../core/executeAsync ../../core/ObjectPool ../../core/promiseUtils ./BackgroundBucket ./CircleBucket ./FillBucket ./GeometryUtils ./IndexMemoryBuffer ./LineBucket ./Placement ./SymbolBucket ./TileParser ./VertexMemoryBuffer".split(" "),function(q,a,d,n,f,e,m,b,c,l,g,r,y,u,F,p){return function(){function a(){this.status=this.rotation=0;this._symbolBuckets=[];this.placementEngine=new y.PlacementEngine;
this.fillVertexBuffer=new p.FillVertexBuffer(!1);this.fillDDVertexBuffer=new p.FillVertexBuffer(!0);this.fillIndexBuffer=new g.TriangleIndexBuffer;this.outlineVertexBuffer=new p.OutlineVertexBuffer(!1);this.outlineDDVertexBuffer=new p.OutlineVertexBuffer(!0);this.outlineIndexBuffer=new g.TriangleIndexBuffer;this.lineVertexBuffer=new p.LineVertexBuffer(!1);this.lineDDVertexBuffer=new p.LineVertexBuffer(!0);this.lineIndexBuffer=new g.TriangleIndexBuffer;this.iconVertexBuffer=new p.SymbolVertexBuffer(!1);
this.iconDDVertexBuffer=new p.SymbolVertexBuffer(!0);this.iconIndexBuffer=new g.TriangleIndexBuffer;this.textVertexBuffer=new p.SymbolVertexBuffer(!1);this.textDDVertexBuffer=new p.SymbolVertexBuffer(!0);this.textIndexBuffer=new g.TriangleIndexBuffer;this.circleVertexBuffer=new p.CircleVertexBuffer;this.circleIndexBuffer=new g.TriangleIndexBuffer}a.prototype.initialize=function(b,a,g,c){void 0===c&&(c=0);this.tileKey=b;this.refKey=a;this._workerTileHandler=g;this.rotation=c;this.placementEngine.setAngle(l.C_DEG_TO_RAD*
c)};a.prototype.release=function(){this.tileKey=this.refKey="";this.rotation=this.status=0;this.fillVertexBuffer.reset();this.fillDDVertexBuffer.reset();this.fillIndexBuffer.reset();this.outlineVertexBuffer.reset();this.outlineDDVertexBuffer.reset();this.outlineIndexBuffer.reset();this.lineVertexBuffer.reset();this.lineDDVertexBuffer.reset();this.lineIndexBuffer.reset();this.iconVertexBuffer.reset();this.iconDDVertexBuffer.reset();this.iconIndexBuffer.reset();this.textVertexBuffer.reset();this.textDDVertexBuffer.reset();
this.textIndexBuffer.reset();this.circleVertexBuffer.reset();this.circleIndexBuffer.reset();this.placementEngine.reset();this._symbolBuckets.length=0;this._workerTileHandler=null};a.prototype.setDataAndParse=function(a,g){var l=this,f=new d(function(b){l.status=6});this._parse(a,g).then(function(a){l.status=4;for(var g=new Uint32Array([1,l.fillVertexBuffer.sizeInBytes,2,l.fillDDVertexBuffer.sizeInBytes,3,l.fillIndexBuffer.sizeInBytes,4,l.outlineVertexBuffer.sizeInBytes,5,l.outlineDDVertexBuffer.sizeInBytes,
6,l.outlineIndexBuffer.sizeInBytes,7,l.lineVertexBuffer.sizeInBytes,8,l.lineDDVertexBuffer.sizeInBytes,9,l.lineIndexBuffer.sizeInBytes,10,l.iconVertexBuffer.sizeInBytes,11,l.iconDDVertexBuffer.sizeInBytes,12,l.iconIndexBuffer.sizeInBytes,13,l.textVertexBuffer.sizeInBytes,14,l.textDDVertexBuffer.sizeInBytes,15,l.textIndexBuffer.sizeInBytes,16,l.circleVertexBuffer.sizeInBytes,17,l.circleIndexBuffer.sizeInBytes]),p=[],e=a.length,d=0;d<e;d++){var v=a[d];if(v instanceof c)p.push(v.layerIndex),p.push(1),
p.push(v.fillIndexStart),p.push(v.fillIndexCount),p.push(v.outlineIndexStart),p.push(v.outlineIndexCount);else if(v instanceof r)p.push(v.layerIndex),p.push(2),p.push(v.lineIndexStart),p.push(v.lineIndexCount);else if(v instanceof u){p.push(v.layerIndex);p.push(3);p.push(v.sdfMarker?1:0);var y=v.markerPageMap;p.push(y.size);y.forEach(function(b,a){p.push(a);p.push(b[0]);p.push(b[1])});v=v.glyphsPageMap;p.push(v.size);v.forEach(function(b,a){p.push(a);p.push(b[0]);p.push(b[1])})}else v instanceof b?
(p.push(v.layerIndex),p.push(4),p.push(v.circleIndexStart),p.push(v.circleIndexCount)):v instanceof m&&(p.push(v.layerIndex),p.push(0))}a=new Uint32Array(p);var e=l.fillVertexBuffer.toBuffer(),d=l.fillDDVertexBuffer.toBuffer(),v=l.fillIndexBuffer.toBuffer(),y=l.outlineVertexBuffer.toBuffer(),n=l.outlineDDVertexBuffer.toBuffer(),F=l.outlineIndexBuffer.toBuffer(),z=l.lineVertexBuffer.toBuffer(),D=l.lineDDVertexBuffer.toBuffer(),x=l.lineIndexBuffer.toBuffer(),I=l.iconVertexBuffer.toBuffer(),J=l.iconDDVertexBuffer.toBuffer(),
H=l.iconIndexBuffer.toBuffer(),B=l.textVertexBuffer.toBuffer(),A=l.textDDVertexBuffer.toBuffer(),V=l.textIndexBuffer.toBuffer(),ca=l.circleVertexBuffer.toBuffer(),q=l.circleIndexBuffer.toBuffer();f.resolve({result:{bufferDataInfo:g.buffer,bucketDataInfo:a.buffer,bufferData:[e,d,v,y,n,F,z,D,x,I,J,H,B,A,V,ca,q]},transferList:[e,d,v,y,n,F,z,D,x,I,J,H,B,A,V,ca,q,g.buffer,a.buffer]})});return f.promise};a.prototype.addBucket=function(b){this._symbolBuckets.push(b)};a.prototype.updateSymbols=function(b){var a=
this,g=this._symbolBuckets;if(!g||0===g.length)return e.resolve();this.rotation=b;var c=this.placementEngine;c.reset();c.setAngle(b/256*360*l.C_DEG_TO_RAD);var r=this.iconVertexBuffer;r.reset();var p=this.iconDDVertexBuffer;p.reset();var f=this.iconIndexBuffer;f.reset();var m=this.textVertexBuffer;m.reset();var d=this.textDDVertexBuffer;d.reset();var y=this.textIndexBuffer;y.reset();var F=[],u=g.length,D=0;return n(function(){if(6===a.status||0===a.status)return!0;if(D<u){var b=g[D++],l=b.layer;if(b=
b.copy(l.hasDataDrivenIcon?p:r,f,l.hasDataDrivenText?d:m,y,c))F.push(b),b.updateSymbols()}return D>=u}).then(function(){if(6===a.status||0===a.status||0===r.sizeInBytes&&0===p.sizeInBytes&&0===f.sizeInBytes&&0===m.sizeInBytes&&0===d.sizeInBytes&&0===y.sizeInBytes)return{result:null,transferList:null};var b=new Uint32Array([10,r.sizeInBytes,11,p.sizeInBytes,12,f.sizeInBytes,13,m.sizeInBytes,14,d.sizeInBytes,15,y.sizeInBytes]),g=[];u=F.length;for(var c=0;c<u;c++){var l=F[c];g.push(l.layerIndex);g.push(3);
g.push(l.sdfMarker?1:0);var e=l.markerPageMap;g.push(e.size);e.forEach(function(b,a){g.push(a);g.push(b[0]);g.push(b[1])});l=l.glyphsPageMap;g.push(l.size);l.forEach(function(b,a){g.push(a);g.push(b[0]);g.push(b[1])})}var c=new Uint32Array(g),l=r.toBuffer(),e=p.toBuffer(),v=f.toBuffer(),n=m.toBuffer(),z=d.toBuffer(),D=y.toBuffer();return{result:{bufferDataInfo:b.buffer,bucketDataInfo:c.buffer,bufferData:[l,e,v,n,z,D]},transferList:[l,e,v,n,z,D,b.buffer,c.buffer]}}).catch(function(){return null})};
a.prototype.setObsolete=function(){this.status=6};a.prototype.getLayers=function(){return this._workerTileHandler.getLayers()};a.prototype.getWorkerTileHandler=function(){return this._workerTileHandler};a.prototype._parse=function(b,a){if(!b||0===b.byteLength)return e.resolve([]);this.status=2;return(new F(b,this,a)).parse()};a.pool=new f(a);return a}()})},"esri/core/executeAsync":function(){define("require exports dojo/has ./nextTick ./now ./promiseUtils".split(" "),function(q,a,d,n,f,e){function m(){var a=
0===c.length;if(!a){for(var e=f();!a&&f()-e<b;){var d=c[g];if(d){if(!0===d()){var F=l.get(d);c[g]=null;l.delete(d);F()}g=(g+1)%c.length}else c.splice(g,1),g=(a=0===c.length)?0:g%c.length}a||n(m)}}var b=d("host-browser")?6:200,c=[],l=new Map,g=0;return function(b){return b?e.create(function(a){c.push(b);l.set(b,a);1===c.length&&n(m)},function(){c[c.indexOf(b)]=null;l.delete(b)}):e.reject(new TypeError("callback is not a function"))}})},"esri/core/nextTick":function(){define(["require","exports","./global"],
function(q,a,d){function n(){if(d.postMessage&&!d.importScripts){var a=d.onmessage,f=!0;d.onmessage=function(){f=!1};d.postMessage("","*");d.onmessage=a;return f}return!1}var f=d.MutationObserver||d.WebKitMutationObserver;return function(){var a;if(d.process&&d.process.nextTick)a=function(b){d.process.nextTick(b)};else if(d.Promise)a=function(b){d.Promise.resolve().then(b)};else if(f){var m=[],b=document.createElement("div");(new f(function(){for(;0<m.length;)m.shift()()})).observe(b,{attributes:!0});
a=function(a){m.push(a);b.setAttribute("queueStatus","1")}}else if(n()){var c=[];d.addEventListener("message",function(b){if(b.source===d&&"esri-nexttick-message"===b.data)for(b.stopPropagation();c.length;)c.shift()()},!0);a=function(b){c.push(b);d.postMessage("esri-nexttick-message","*")}}else a=d.setImmediate?function(b){return d.setImmediate(b)}:function(b){return d.setTimeout(b,0)};return a}()})},"esri/core/now":function(){define(["require","exports","./global"],function(q,a,d){return function(){var a=
d.performance||{};if(a.now)return function(){return a.now()};if(a.webkitNow)return function(){return a.webkitNow()};if(a.mozNow)return function(){return a.mozNow()};if(a.msNow)return function(){return a.msNow()};if(a.oNow)return function(){return a.oNow()};var f;f=a.timing&&a.timing.navigationStart?a.timing.navigationStart:Date.now();return function(){return Date.now()-f}}()})},"esri/core/ObjectPool":function(){define(["require","exports"],function(q,a){var d=function(){return function(){}}();return function(){function a(a,
e,m,b,c){void 0===b&&(b=1);void 0===c&&(c=0);this.classConstructor=a;this.acquireFunctionOrWithConstructor=e;this.releaseFunction=m;this.growthSize=b;!0===e?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof e&&(this.acquireFunction=e);this._pool=Array(c);this._set=new Set;this._initialSize=c;for(a=0;a<c;a++)this._pool[a]=new this.classConstructor;this.growthSize=Math.max(b,1)}a.prototype.acquire=function(){for(var a=[],e=0;e<arguments.length;e++)a[e]=arguments[e];e=this.classConstructor||
d;if(0===this._pool.length)for(var m=this.growthSize,b=0;b<m;b++)this._pool[b]=new e;e=this._pool.shift();this.acquireFunction?this.acquireFunction.apply(this,[e].concat(a)):e&&e.acquire&&"function"===typeof e.acquire&&e.acquire.apply(e,a);this._set.delete(e);return e};a.prototype.release=function(a){a&&!this._set.has(a)&&(this.releaseFunction?this.releaseFunction(a):a&&a.release&&"function"===typeof a.release&&a.release(),this._pool.push(a),this._set.add(a))};a.prototype.prune=function(){if(!(this._pool.length<=
this._initialSize))for(var a;this._initialSize>this._pool.length;)a=this._pool.shift(),this._set.delete(a),a.dispose&&"function"===typeof a.dispose&&a.dispose()};a.prototype._constructorAcquireFunction=function(a){for(var f=[],m=1;m<arguments.length;m++)f[m-1]=arguments[m];(b=this.classConstructor).call.apply(b,[a].concat(f));var b};return a}()})},"esri/views/vectorTiles/BackgroundBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper",
"./Bucket"],function(q,a,d,n,f){return function(a){function f(b,c){return a.call(this,b,c)||this}d(f,a);return f}(f)})},"esri/core/tsSupport/decorateHelper":function(){define([],function(){return function(q,a,d,n){var f=arguments.length,e=3>f?a:null===n?n=Object.getOwnPropertyDescriptor(a,d):n,m;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)e=Reflect.decorate(q,a,d,n);else for(var b=q.length-1;0<=b;b--)if(m=q[b])e=(3>f?m(e):3<f?m(a,d,e):m(a,d))||e;return 3<f&&e&&Object.defineProperty(a,
d,e),e}})},"esri/views/vectorTiles/Bucket":function(){define(["require","exports"],function(q,a){return function(){function a(a,f){this.layerExtent=4096;this._features=[];this.layer=a;this.zoom=f;this._filter=a.getFeatureFilter()}a.prototype.pushFeature=function(a){this._filter.filter(a)&&this._features.push(a)};a.prototype.hasFeatures=function(){return 0<this._features.length};a.prototype.processFeatures=function(a,f){};a.prototype.assignBufferInfo=function(a){};return a}()})},"esri/views/vectorTiles/CircleBucket":function(){define(["require",
"exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./Bucket"],function(q,a,d,n,f){return function(a){function f(b,c,l,g){b=a.call(this,b,c)||this;b._circleVertexBuffer=l;b._circleIndexBuffer=g;return b}d(f,a);Object.defineProperty(f.prototype,"circleIndexStart",{get:function(){return this._circleIndexStart},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"circleIndexCount",{get:function(){return this._circleIndexCount},enumerable:!0,configurable:!0});
f.prototype.assignBufferInfo=function(a){a._circleIndexStart=this._circleIndexStart;a._circleIndexCount=this._circleIndexCount};f.prototype.processFeatures=function(a,c){c=this._circleVertexBuffer;var b=this._circleIndexBuffer;this._circleIndexStart=b.index;this._circleIndexCount=0;var g=this.layer,r=this.zoom;a&&a.setExtent(this.layerExtent);for(var f=g.getPaintValue("circle-radius",r),m=g.getPaintValue("circle-color",r),e=g.getPaintValue("circle-opacity",r),p=g.getPaintValue("circle-blur",r),d=
g.getPaintValue("circle-stroke-width",r),n=g.getPaintValue("circle-stroke-color",r),A=g.getPaintValue("circle-stroke-opacity",r),B=g.getPaintProperty("circle-radius"),z=g.getPaintProperty("circle-color"),v=g.getPaintProperty("circle-opacity"),w=g.getPaintProperty("circle-blur"),C=g.getPaintProperty("circle-stroke-width"),G=g.getPaintProperty("circle-stroke-color"),g=g.getPaintProperty("circle-stroke-opacity"),P=0,Q=this._features;P<Q.length;P++){var M=Q[P],R=M.getGeometry(a);if(R)for(B&&B.isDataDriven&&
(f=B.getValue(r,M)),z&&z.isDataDriven&&(m=z.getValue(r,M)),v&&v.isDataDriven&&(e=v.getValue(r,M)),w&&w.isDataDriven&&(p=w.getValue(r,M)),C&&C.isDataDriven&&(d=C.getValue(r,M)),G&&G.isDataDriven&&(n=G.getValue(r,M)),g&&g.isDataDriven&&(A=g.getValue(r,M)),M=0;M<R.length;M++){var K=R[M];if(K)for(var q=0;q<K.length;q++){var E=K[q],x=c.index;c.add(E.x,E.y,0,0,f,m,e,p,d,n,A);c.add(E.x,E.y,0,1,f,m,e,p,d,n,A);c.add(E.x,E.y,1,0,f,m,e,p,d,n,A);c.add(E.x,E.y,1,1,f,m,e,p,d,n,A);b.add(x+0,x+1,x+2);b.add(x+1,x+
2,x+3);this._circleIndexCount+=6}}}};return f}(f)})},"esri/views/vectorTiles/FillBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/ArrayPool ../../core/libs/earcut/earcut ../2d/engine/webgl/Geometry ./Bucket".split(" "),function(q,a,d,n,f,e,m,b){return function(a){function b(b,c,l,f,m,p){c=a.call(this,b,c)||this;if(b.hasDataDrivenFill!==l.isDataDriven())throw Error("incompatible fill buffer");if(b.hasDataDrivenOutline!==m.isDataDriven())throw Error("incompatible outline buffer");
c._fillVertexBuffer=l;c._fillIndexBuffer=f;c._outlineVertexBuffer=m;c._outlineIndexBuffer=p;return c}d(b,a);Object.defineProperty(b.prototype,"fillIndexStart",{get:function(){return this._fillIndexStart},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"fillIndexCount",{get:function(){return this._fillIndexCount},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"outlineIndexStart",{get:function(){return this._outlineIndexStart},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,
"outlineIndexCount",{get:function(){return this._outlineIndexCount},enumerable:!0,configurable:!0});b.prototype.assignBufferInfo=function(a){a._fillIndexStart=this._fillIndexStart;a._fillIndexCount=this._fillIndexCount;a.layer.getPaintProperty("fill-outline-color")?(a._outlineIndexStart=this._outlineIndexStart,a._outlineIndexCount=this._outlineIndexCount):(a._outlineIndexStart=0,a._outlineIndexCount=0)};b.prototype.processFeatures=function(a,b){this._fillIndexStart=this._fillIndexBuffer.index;this._fillIndexCount=
0;this._outlineIndexStart=this._outlineIndexBuffer.index;this._outlineIndexCount=0;b=this.layer;var g=this.zoom,c=b.hasDataDrivenFill,l=b.hasDataDrivenOutline;a&&a.setExtent(this.layerExtent);for(var p=b.getPaintValue("fill-pattern",g),f=b.getPaintValue("fill-antialias",g)&&void 0===p,r=0,m=this._features;r<m.length;r++){var e=m[r],d=void 0;c&&(d={color:p?[1,1,1,1]:b.getPaintValue("fill-color",g,e),opacity:b.getPaintValue("fill-opacity",g,e)});var v=void 0;l&&(v={color:p?[1,1,1,1]:b.getPaintValue("fill-outline-color",
g,e),opacity:b.getPaintValue("fill-opacity",g,e)});e=e.getGeometry(a);this._processFeature(e,f,d,v)}};b.prototype._processFeature=function(a,c,l,f){if(a){var g=a.length;if(c)for(c=0;c<g;c++)this._processOutline(a[c],f);var p;for(c=0;c<g;c++)f=b._area(a[c]),128<f?(void 0!==p&&this._processFill(a,p,l),p=[c]):-128>f&&void 0!==p&&p.push(c);void 0!==p&&this._processFill(a,p,l)}};b.prototype._processOutline=function(a,b){var g=this._outlineVertexBuffer,c=this._outlineIndexBuffer,l=c.index,p,f,r,e=new m.Point(0,
0),d=new m.Point(0,0),n=new m.Point(0,0),v=-1,w=-1,C=-1,G=-1,P=-1,Q=!1,M=a.length;if(!(2>M)){var R=a[0];for(p=a[M-1];M&&p.isEqual(R);)--M,p=a[M-1];if(!(2>M-0)){for(R=0;R<M;++R){0===R?(p=a[M-1],f=a[0],r=a[1],e.assignSub(f,p),e.normalize(),e.rightPerpendicular()):(p=f,f=r,r=R!==M-1?a[R+1]:a[0],e.assign(d));p=this._isClipEdge(p,f);-1===G&&(Q=p);d.assignSub(r,f);d.normalize();d.rightPerpendicular();C=e.x*d.y-e.y*d.x;n.assignAdd(e,d);n.normalize();var K=-n.x*-e.x+-n.y*-e.y,K=Math.abs(0!==K?1/K:1);8<K&&
(K=8);0<=C?(C=g.add(f.x,f.y,e.x,e.y,0,1,b),-1===G&&(G=C),0<=v&&0<=w&&0<=C&&!p&&c.add(v,w,C),w=g.add(f.x,f.y,K*-n.x,K*-n.y,0,-1,b),-1===P&&(P=w),0<=v&&0<=w&&0<=C&&!p&&c.add(v,w,C),v=w,w=C,C=g.add(f.x,f.y,n.x,n.y,0,1,b),0<=v&&0<=w&&0<=C&&!p&&c.add(v,w,C),w=g.add(f.x,f.y,d.x,d.y,0,1,b)):(C=g.add(f.x,f.y,K*n.x,K*n.y,0,1,b),-1===G&&(G=C),0<=v&&0<=w&&0<=C&&!p&&c.add(v,w,C),w=g.add(f.x,f.y,-e.x,-e.y,0,-1,b),-1===P&&(P=w),0<=v&&0<=w&&0<=C&&!p&&c.add(v,w,C),v=w,w=C,C=g.add(f.x,f.y,-n.x,-n.y,0,-1,b),0<=v&&
0<=w&&0<=C&&!p&&c.add(v,w,C),v=g.add(f.x,f.y,-d.x,-d.y,0,-1,b));0<=v&&0<=w&&0<=C&&!p&&c.add(v,w,C)}0<=v&&0<=w&&0<=G&&!Q&&c.add(v,w,G);0<=v&&0<=G&&0<=P&&!Q&&c.add(v,P,G);this._outlineIndexCount+=3*(c.index-l)}}};b.prototype._processFill=function(a,b,c){var g;1<b.length&&(g=[]);for(var l=0,p=0;p<b.length;p++){var m=b[p];0!==l&&g.push(l);l+=a[m].length}for(var p=2*l,l=f.acquire(),d=0;d<b.length;d++)for(var m=b[d],m=a[m],r=m.length,n=0;n<r;++n)l.push(m[n].x),l.push(m[n].y);a=e(l,g,2);b=a.length;if(0<
b){g=this._fillVertexBuffer.index;for(d=0;d<p;)this._fillVertexBuffer.add(l[d++],l[d++],c);for(c=0;c<b;)this._fillIndexBuffer.add(g+a[c++],g+a[c++],g+a[c++]);this._fillIndexCount+=b}f.release(l)};b.prototype._isClipEdge=function(a,b){return a.x===b.x?-64>=a.x||4160<=a.x:a.y===b.y?-64>=a.y||4160<=a.y:!1};b._area=function(a){for(var b=0,c=a.length-1,g=0;g<c;g++)b+=(a[g].x-a[g+1].x)*(a[g].y+a[g+1].y);b+=(a[c].x-a[0].x)*(a[c].y+a[0].y);return.5*b};return b}(b)})},"esri/core/ArrayPool":function(){define(["require",
"exports","./ObjectPool"],function(q,a,d){function n(a){a.length=0}var f=Array.prototype.splice;q=function(){function a(a,c){void 0===a&&(a=50);void 0===c&&(c=50);this._pool=new d(Array,!1,n,c,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.copy=function(a){var b=this.acquire();a.unshift(0,0);f.apply(b,a);a.splice(0,2);return b};a.prototype.release=function(a){this._pool.release(a)};a.acquire=function(){return e.acquire()};a.copy=function(a){return e.copy(a)};a.release=
function(a){return e.release(a)};return a}();var e=new q(100);return q})},"esri/core/libs/earcut/earcut":function(){define([],function(){function q(b,g,l){l=l||2;B=b.length/l+(g?2*g.length:0);z=!1;var f=g&&g.length,p=f?g[0]*l:b.length,r=a(b,0,p,l,!0),v=[];if(!r)return v;var y,u,D,w;if(f)a:{var x=l,f=[],I,J,H;w=0;for(I=g.length;w<I;w++)J=g[w]*x,H=w<I-1?g[w+1]*x:b.length,J=a(b,J,H,x,!1),J===J.next&&(J.steiner=!0),f.push(c(J));f.sort(e);for(w=0;w<f.length;w++){if(!r){r=null;break a}g=f[w];x=r;if(x=m(g,
x))g=F(x,g),d(g,g.next);r=d(r,r.next)}}if(z)return v;if(b.length>80*l){y=D=b[0];u=f=b[1];for(x=l;x<p;x+=l)w=b[x],g=b[x+1],w<y&&(y=w),g<u&&(u=g),w>D&&(D=w),g>f&&(f=g);D=Math.max(D-y,f-u)}n(r,v,l,y,u,D);return v}function a(a,b,g,c,l){var f;if(l===0<A(a,b,g,c))for(l=b;l<g;l+=c)f=p(l,a[l],a[l+1],f);else for(l=g-c;l>=b;l-=c)f=p(l,a[l],a[l+1],f);f&&r(f,f.next)&&(D(f),f=f.next);return f}function d(a,b){if(!a)return a;b||(b=a);var c,l=0,f=B*B/2;do{c=!1;if(a.steiner||!r(a,a.next)&&0!==g(a.prev,a,a.next))a=
a.next;else{D(a);a=b=a.prev;if(a===a.next)return null;c=!0}if(l++>f)return z=!0,null}while(c||a!==b);return b}function n(a,c,p,e,m,H,B){if(a){if(!B&&H){var v=a,w=v;do null===w.z&&(w.z=b(w.x,w.y,e,m,H)),w.prevZ=w.prev,w=w.nextZ=w.next;while(w!==v);w.prevZ.nextZ=null;w.prevZ=null;var v=w,C,E,x,I,J,A,L=1;do{w=v;x=v=null;for(I=0;w;){I++;E=w;for(C=J=0;C<L&&(J++,E=E.nextZ,E);C++);for(A=L;0<J||0<A&&E;)0===J?(C=E,E=E.nextZ,A--):0!==A&&E?w.z<=E.z?(C=w,w=w.nextZ,J--):(C=E,E=E.nextZ,A--):(C=w,w=w.nextZ,J--),
x?x.nextZ=C:v=C,C.prevZ=x,x=C;w=E}x.nextZ=null;L*=2}while(1<I)}for(v=a;a.prev!==a.next;){w=a.prev;E=a.next;if(H)a:{x=a;A=e;var G=m,V=H;I=x.prev;J=x;L=x.next;if(0<=g(I,J,L))x=!1;else{var P=I.x>J.x?I.x>L.x?I.x:L.x:J.x>L.x?J.x:L.x,Q=I.y>J.y?I.y>L.y?I.y:L.y:J.y>L.y?J.y:L.y;C=b(I.x<J.x?I.x<L.x?I.x:L.x:J.x<L.x?J.x:L.x,I.y<J.y?I.y<L.y?I.y:L.y:J.y<L.y?J.y:L.y,A,G,V);A=b(P,Q,A,G,V);for(G=x.nextZ;G&&G.z<=A;){if(G!==x.prev&&G!==x.next&&l(I.x,I.y,J.x,J.y,L.x,L.y,G.x,G.y)&&0<=g(G.prev,G,G.next)){x=!1;break a}G=
G.nextZ}for(G=x.prevZ;G&&G.z>=C;){if(G!==x.prev&&G!==x.next&&l(I.x,I.y,J.x,J.y,L.x,L.y,G.x,G.y)&&0<=g(G.prev,G,G.next)){x=!1;break a}G=G.prevZ}x=!0}}else x=f(a);if(x)c.push(w.i/p),c.push(a.i/p),c.push(E.i/p),D(a),v=a=E.next;else{if(z)break;a=E;if(a===v){if(!B)n(d(a),c,p,e,m,H,1);else if(1===B){B=c;v=p;w=a;do E=w.prev,x=w.next.next,!r(E,x)&&y(E,w,w.next,x)&&u(E,x)&&u(x,E)&&(B.push(E.i/v),B.push(w.i/v),B.push(x.i/v),D(w),D(w.next),w=a=x),w=w.next;while(w!==a);a=w;n(a,c,p,e,m,H,2)}else if(2===B)a:{B=
a;do{for(v=B.next.next;v!==B.prev;){if(w=B.i!==v.i){w=B;E=v;x=void 0;if(x=w.next.i!==E.i&&w.prev.i!==E.i){x=void 0;b:{x=w;do{if(x.i!==w.i&&x.next.i!==w.i&&x.i!==E.i&&x.next.i!==E.i&&y(x,x.next,w,E)){x=!0;break b}x=x.next}while(x!==w);x=!1}x=!x}I=void 0;if(I=x&&u(w,E)&&u(E,w)){x=w;I=!1;J=(w.x+E.x)/2;E=(w.y+E.y)/2;do x.y>E!==x.next.y>E&&J<(x.next.x-x.x)*(E-x.y)/(x.next.y-x.y)+x.x&&(I=!I),x=x.next;while(x!==w)}w=I}if(w){a=F(B,v);B=d(B,B.next);a=d(a,a.next);n(B,c,p,e,m,H);n(a,c,p,e,m,H);break a}v=v.next}B=
B.next}while(B!==a)}break}}}}}function f(a){var b=a.prev,c=a.next;if(0<=g(b,a,c))return!1;for(var f=a.next.next,p=0;f!==a.prev;){if(l(b.x,b.y,a.x,a.y,c.x,c.y,f.x,f.y)&&0<=g(f.prev,f,f.next))return!1;f=f.next;if(p++>B)return z=!0,!1}return!0}function e(a,b){return a.x-b.x}function m(a,b){var g=b,c=a.x,f=a.y,p=-Infinity,e;do{if(!g)return null;if(f<=g.y&&f>=g.next.y){var m=g.x+(f-g.y)*(g.next.x-g.x)/(g.next.y-g.y);if(m<=c&&m>p){p=m;if(m===c){if(f===g.y)return g;if(f===g.next.y)return g.next}e=g.x<g.next.x?
g:g.next}}g=g.next}while(g!==b);if(!e)return null;if(c===p)return e.prev;b=e;for(var m=e.x,d=e.y,r=Infinity,n,g=e.next;g!==b;)c>=g.x&&g.x>=m&&l(f<d?c:p,f,m,d,f<d?p:c,f,g.x,g.y)&&(n=Math.abs(f-g.y)/(c-g.x),(n<r||n===r&&g.x>e.x)&&u(g,a)&&(e=g,r=n)),g=g.next;return e}function b(a,b,g,c,l){a=32767*(a-g)/l;b=32767*(b-c)/l;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function c(a){var b=
a,g=a;do b.x<g.x&&(g=b),b=b.next;while(b!==a);return g}function l(a,b,g,c,l,f,p,e){return 0<=(l-p)*(b-e)-(a-p)*(f-e)&&0<=(a-p)*(c-e)-(g-p)*(b-e)&&0<=(g-p)*(f-e)-(l-p)*(c-e)}function g(a,b,g){return(b.y-a.y)*(g.x-b.x)-(b.x-a.x)*(g.y-b.y)}function r(a,b){return a.x===b.x&&a.y===b.y}function y(a,b,c,l){return r(a,b)&&r(c,l)||r(a,l)&&r(c,b)?!0:0<g(a,b,c)!==0<g(a,b,l)&&0<g(c,l,a)!==0<g(c,l,b)}function u(a,b){return 0>g(a.prev,a,a.next)?0<=g(a,b,a.next)&&0<=g(a,a.prev,b):0>g(a,b,a.prev)||0>g(a,a.next,b)}
function F(a,b){var g=new H(a.i,a.x,a.y),c=new H(b.i,b.x,b.y),l=a.next,f=b.prev;a.next=b;b.prev=a;g.next=l;l.prev=g;c.next=g;g.prev=c;f.next=c;c.prev=f;return c}function p(a,b,g,c){a=new H(a,b,g);c?(a.next=c.next,a.prev=c,c.next.prev=a,c.next=a):(a.prev=a,a.next=a);return a}function D(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function H(a,b,g){this.i=a;this.x=b;this.y=g;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=
!1}function A(a,b,g,c){for(var l=0,f=g-c;b<g;b+=c)l+=(a[f]-a[b])*(a[b+1]+a[f+1]),f=b;return l}var B,z;q.deviation=function(a,b,g,c){var l=b&&b.length,f=Math.abs(A(a,0,l?b[0]*g:a.length,g));if(l)for(var l=0,p=b.length;l<p;l++)f-=Math.abs(A(a,b[l]*g,l<p-1?b[l+1]*g:a.length,g));for(l=b=0;l<c.length;l+=3){var p=c[l]*g,e=c[l+1]*g,m=c[l+2]*g;b+=Math.abs((a[p]-a[m])*(a[e+1]-a[p+1])-(a[p]-a[e])*(a[m+1]-a[p+1]))}return 0===f&&0===b?0:Math.abs((b-f)/f)};q.flatten=function(a){for(var b=a[0][0].length,g={vertices:[],
holes:[],dimensions:b},c=0,l=0;l<a.length;l++){for(var f=0;f<a[l].length;f++)for(var p=0;p<b;p++)g.vertices.push(a[l][f][p]);0<l&&(c+=a[l-1].length,g.holes.push(c))}return g};return q})},"esri/views/2d/engine/webgl/Geometry":function(){define(["require","exports"],function(q,a){Object.defineProperty(a,"__esModule",{value:!0});q=function(){function a(a,f){this.x=a;this.y=f}a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.equals=function(a,f){return a===this.x&&f===this.y};a.prototype.isEqual=
function(a){return a.x===this.x&&a.y===this.y};a.prototype.setCoords=function(a,f){this.x=a;this.y=f};a.prototype.normalize=function(){var a=this.x,f=this.y,a=Math.sqrt(a*a+f*f);this.x/=a;this.y/=a};a.prototype.rightPerpendicular=function(){var a=this.x;this.x=this.y;this.y=-a};a.prototype.move=function(a,f){this.x+=a;this.y+=f};a.prototype.assign=function(a){this.x=a.x;this.y=a.y};a.prototype.assignAdd=function(a,f){this.x=a.x+f.x;this.y=a.y+f.y};a.prototype.assignSub=function(a,f){this.x=a.x-f.x;
this.y=a.y-f.y};a.prototype.rotate=function(a,f){var e=this.x,m=this.y;this.x=e*a-m*f;this.y=e*f+m*a};a.prototype.scale=function(a){this.x*=a;this.y*=a};a.prototype.length=function(){var a=this.x,f=this.y;return Math.sqrt(a*a+f*f)};a.distance=function(a,f){var e=f.x-a.x;a=f.y-a.y;return Math.sqrt(e*e+a*a)};a.add=function(d,f){return new a(d.x+f.x,d.y+f.y)};a.sub=function(d,f){return new a(d.x-f.x,d.y-f.y)};return a}();a.Point=q})},"esri/views/vectorTiles/GeometryUtils":function(){define(["require",
"exports"],function(q,a){function d(a,e){a%=e;return 0<=a?a:a+e}Object.defineProperty(a,"__esModule",{value:!0});a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var n=1/Math.LN2;a.positiveMod=d;a.radToByte=function(f){return d(f*a.C_RAD_TO_256,256)};a.degToByte=function(f){return d(f*a.C_DEG_TO_256,256)};a.log2=
function(a){return Math.log(a)*n};a.sqr=function(a){return a*a};a.clamp=function(a,e,m){return Math.min(Math.max(a,e),m)};a.interpolate=function(a,e,m){return a*(1-m)+e*m};a.between=function(a,e,m){return a>=e&&a<=m||a>=m&&a<=e}})},"esri/views/vectorTiles/IndexMemoryBuffer":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./MemoryBuffer"],function(q,a,d,n,f){Object.defineProperty(a,"__esModule",{value:!0});q=function(a){function f(){return a.call(this,
12)||this}d(f,a);f.prototype.add=function(a,c,l){var b=this.array;b.push(a);b.push(c);b.push(l)};return f}(f);a.TriangleIndexBuffer=q;f=function(a){function f(){return a.call(this,4)||this}d(f,a);f.prototype.add=function(a){this.array.push(a)};return f}(f);a.PointElementMemoryBuffer=f})},"esri/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(q,a){return function(){function a(a){this._array=[];0>=a&&console.error("strideInBytes must be positive!");this._stride=a}Object.defineProperty(a.prototype,
"array",{get:function(){return this._array},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0});a.prototype.reset=function(){this.array.length=0};a.prototype.toBuffer=
function(){return(new Uint32Array(this._array)).buffer};a.i1616to32=function(a,f){return 65535&a|f<<16};a.i8888to32=function(a,f,e,m){return a&255|(f&255)<<8|(e&255)<<16|m<<24};a.i8816to32=function(a,f,e){return a&255|(f&255)<<8|e<<16};return a}()})},"esri/views/vectorTiles/LineBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../2d/engine/webgl/LineTess ./Bucket ./style/StyleLayer".split(" "),function(q,a,d,n,f,e,m){var b=new f.Tessellator({distanceAlongCorrection:!0});
return function(a){function c(b,c,l,e){c=a.call(this,b,c)||this;c.extrudeVectorsDoubleBuffer=[f.allocExtrudeVectors(),f.allocExtrudeVectors()];c.firstExtrudeVectors=f.allocExtrudeVectors();c.recycledTriangleBridge=f.allocTriangles(20);c.recycledTrianglePie=f.allocTriangles(20);if(b.hasDataDrivenLine!==l.isDataDriven())throw Error("incompatible line buffer");c._lineVertexBuffer=l;c._lineIndexBuffer=e;return c}d(c,a);Object.defineProperty(c.prototype,"lineIndexStart",{get:function(){return this._lineIndexStart},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"lineIndexCount",{get:function(){return this._lineIndexCount},enumerable:!0,configurable:!0});c.prototype.assignBufferInfo=function(a){a._lineIndexStart=this._lineIndexStart;a._lineIndexCount=this._lineIndexCount};c.prototype.processFeatures=function(a,b){this._lineIndexStart=this._lineIndexBuffer.index;this._lineIndexCount=0;b=this.layer;var c=this.zoom,g=b.hasDataDrivenLine;a&&a.setExtent(this.layerExtent);for(var l=b.getPaintValue("line-pattern",
c),f=0,e=this._features;f<e.length;f++){var r=e[f],d=new m.LineLayout(b,c,r),n=void 0;if(g&&(n={color:l?[1,1,1,1]:b.getPaintValue("line-color",c,r),opacity:b.getPaintValue("line-opacity",c,r),size:Math.max(Math.min(b.getPaintValue("line-width",c,r),256),0)},0>=n.size||0>=n.opacity||0>=n.color[3]))continue;r=r.getGeometry(a);this._processFeature(d,r,n)}};c.prototype._processFeature=function(a,b,c){if(b)for(var g=b.length,l=0;l<g;l++)this._processGeometry(b[l],a,c)};c.prototype._processGeometry=function(a,
b,c){if(!(2>a.length)){for(var g=a[0],l=a[a.length-1],p=l.x-g.x,l=l.y-g.y,g=1E-6>p*p+l*l,e=a[0],m=1;m<a.length;)p=a[m].x-e.x,l=a[m].y-e.y,1E-6>p*p+l*l?a.splice(m,1):(e=a[m],++m);if(!(2>a.length)){this.vertices=a;this.verticesLen=a.length;this.isClosed=g;this.cap=b.cap;this.join=b.join;this.almostParallelRads=.05;this.veryShallowRads=.1;this.miterSafeRads=f.MITER_SAFE_RADS;this.miterLimitMag=Math.min(b.miterLimit,f.SYSTEM_MAG_LIMIT);this.roundLimitRads=Math.min(b.roundLimit,.5);this.newRoundJoinsSafeRads=
2.3;b=this._lineIndexBuffer.index;for(var p=0,d=void 0,l=this.verticesLen,e=0;e<l;++e){var m=a[e],r=a[(e+l-1)%l],y=g&&this._isClipEdge(r,m),r=d===this.extrudeVectorsDoubleBuffer[e%2]?this.extrudeVectorsDoubleBuffer[(e+1)%2]:this.extrudeVectorsDoubleBuffer[e%2];e<l-1||!g||this.hasPattern?(this._computeExtrudeVectors(r,e),this._writeGPUVertices(m.x,m.y,p,r,c),!r.capCenter||g&&e===l-1||this._writeGPUPieElements(r,y),g&&0===e&&!this.hasPattern&&f.copyExtrudeVectors(this.firstExtrudeVectors,r)):f.copyExtrudeVectors(r,
this.firstExtrudeVectors);d&&this._writeGPUBridgeElements(d,r,y);e<l-1&&(d=a[e+1],m=f.length([d.x-m.x,d.y-m.y]),p+=m);d=r}this._lineIndexCount+=3*(this._lineIndexBuffer.index-b)}}};c.prototype._computeExtrudeVectors=function(a,b){var c=this.vertices,g=this.verticesLen,l=this.isClosed,p=c[b],e=[void 0,void 0],m=[void 0,void 0];if(0<b&&b<g-1){var d=c[(b+g-1)%g],r=c[(b+1)%g];f.normalize(e,[p.x-d.x,p.y-d.y]);f.normalize(m,[r.x-p.x,r.y-p.y])}else if(0===b)r=c[(b+1)%g],f.normalize(m,[r.x-p.x,r.y-p.y]),
l?(c=c[g-2],f.normalize(e,[p.x-c.x,p.y-c.y])):e=m;else if(b===g-1)d=c[(b+g-1)%g],f.normalize(e,[p.x-d.x,p.y-d.y]),l?(c=c[1],f.normalize(m,[c.x-p.x,c.y-p.y])):m=e;else{console.error("Vertex index 'i' out of range.");return}l||0!==b?l||b!==g-1?this._computeJoinExtrudeVectors(a,e,m):this._computeCapExtrudeVectors(a,e,m,f.CapPosition.END):this._computeCapExtrudeVectors(a,e,m,f.CapPosition.START)};c.prototype._computeCapExtrudeVectors=function(a,c,l,e){0===this.cap?b.buttCap(a,c,l):1===this.cap?b.roundCap(a,
c,l,e,f.getNumberOfSlices(Math.PI),e===f.CapPosition.START?-1:1):2===this.cap?b.squareCap(a,c,l,e):b.buttCap(a,c,l)};c.prototype._computeJoinExtrudeVectors=function(a,c,l){var g=f.getRads(c,l);if(g>Math.PI-this.almostParallelRads)b.rectJoin(a,c,l);else if(0===this.join&&g>=this.veryShallowRads)b.bevelJoin(a,c,l,1);else if(1===this.join&&g>=this.veryShallowRads){var e=f.getNumberOfSlices(g);g<this.newRoundJoinsSafeRads?2>e||g<this.roundLimitRads?b.bevelJoin(a,c,l,1):b.roundJoin(a,c,l,e):b.unitRoundJoin(a,
c,l,e)}else g<this.almostParallelRads?b.fastMiterJoin(a,c,l):g<this.miterSafeRads?b.miterJoin(a,c,l):b.bevelJoin(a,c,l,this.miterLimitMag)};c.prototype._writeGPUVertices=function(a,b,c,l,f){for(var g=0;g<l.vectors.count;++g){var e=l.vectors.items[g].vector[0],m=l.vectors.items[g].vector[1],d=l.vectors.items[g].texCoords[0],r=l.vectors.items[g].texCoords[1];l.vectors.items[g].base=this._lineVertexBuffer.index;this._lineVertexBuffer.add(a,b,e,m,d,r,c,f)}};c.prototype._writeGPUBridgeElements=function(a,
c,l){b.bridge(this.recycledTriangleBridge,a,c);if(!l)for(a=0;a<this.recycledTriangleBridge.count;++a)c=this.recycledTriangleBridge.items[a],this._lineIndexBuffer.add(c.v1.base,c.v2.base,c.v3.base)};c.prototype._writeGPUPieElements=function(a,c){b.pie(this.recycledTrianglePie,a);if(!c)for(a=0;a<this.recycledTrianglePie.count;++a)c=this.recycledTrianglePie.items[a],this._lineIndexBuffer.add(c.v1.base,c.v2.base,c.v3.base)};c.prototype._isClipEdge=function(a,b){return a.x===b.x?-64>=a.x||4160<=a.x:a.y===
b.y?-64>=a.y||4160<=a.y:!1};return c}(e)})},"esri/views/2d/engine/webgl/LineTess":function(){define(["require","exports"],function(q,a){function d(a){var b={items:[],count:0},c;for(c=0;c<a;++c)b.items.push(void 0);return b}function n(a,b){B.vector[0]=a.vector[0];B.vector[1]=a.vector[1];B.texCoords[0]=a.texCoords[0];B.texCoords[1]=a.texCoords[1];B.direction[0]=a.direction[0];B.direction[1]=a.direction[1];B.base=a.base;a.vector[0]=b.vector[0];a.vector[1]=b.vector[1];a.texCoords[0]=b.texCoords[0];a.texCoords[1]=
b.texCoords[1];a.direction[0]=b.direction[0];a.direction[1]=b.direction[1];a.base=b.base;b.vector[0]=B.vector[0];b.vector[1]=B.vector[1];b.texCoords[0]=B.texCoords[0];b.texCoords[1]=B.texCoords[1];b.direction[0]=B.direction[0];b.direction[1]=B.direction[1];b.base=B.base}function f(a,b){return a[0]*b[0]+a[1]*b[1]}function e(a){return Math.sqrt(f(a,a))}function m(a,b){var c=e(b);a[0]=b[0]/c;a[1]=b[1]/c;return a}function b(a,b){a[0]=-b[1];a[1]=b[0];return a}function c(a,b){return a[0]*b[1]-a[1]*b[0]}
function l(a,b){a[0]=-b[0];a[1]=-b[1];return a}function g(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a}function r(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a}function y(a,b){a=f(a,b);return.999<a?0:-.999>a?Math.PI:Math.acos(a)}function u(a,b,c,l,f){if(0===l)a.count=0;else{var p=e(b),m=g(z[0],b,1/p);c=g(z[1],c,1/p);m=y(m,c);m=(f?-1:1)*m/l;f=Math.cos(m);m=Math.sin(m);c=b[0];var d=b[1];for(b=0;b<l-1;++b)p=c,c=f*p-m*d,d=m*p+f*d,a.items[b][0]=c,a.items[b][1]=d;a.count=l-1}}function F(a){var b=a.count,c=Math.floor(b/
2),g;for(g=0;g<c;++g){var l=a.items[g];a.items[g]=a.items[b-g-1];a.items[b-g-1]=l}}Object.defineProperty(a,"__esModule",{value:!0});var p;(function(a){a[a.ENTRY=1]="ENTRY";a[a.EXIT=2]="EXIT";a[a.CAP=3]="CAP"})(p=a.VectorRole||(a.VectorRole={}));var D;(function(a){a[a.START=1]="START";a[a.END=2]="END"})(D=a.CapPosition||(a.CapPosition={}));a.SYSTEM_MAG_LIMIT=3.8;a.MITER_SAFE_RADS=2*Math.acos(1/a.SYSTEM_MAG_LIMIT);var H=a.SYSTEM_MAG_LIMIT*a.SYSTEM_MAG_LIMIT,A=16/(2*Math.PI);a.allocTriangles=function(a){var b=
{items:[],count:0},c;for(c=0;c<a;++c)b.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v2:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]}});return b};a.allocExtrudeVectors=function(){var a={items:[],count:0},b;for(b=0;30>b;++b)a.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]});b={};b[p.ENTRY]=d(20);b[p.EXIT]=
d(20);b[p.CAP]=d(20);return{vectors:a,lists:b}};a.copyExtrudeVectors=function(a,b){var c;for(c=0;c<b.vectors.count;++c)a.vectors.items[c].vector[0]=b.vectors.items[c].vector[0],a.vectors.items[c].vector[1]=b.vectors.items[c].vector[1],a.vectors.items[c].texCoords[0]=b.vectors.items[c].texCoords[0],a.vectors.items[c].texCoords[1]=b.vectors.items[c].texCoords[1],a.vectors.items[c].direction[0]=b.vectors.items[c].direction[0],a.vectors.items[c].direction[1]=b.vectors.items[c].direction[1],a.vectors.items[c].base=
b.vectors.items[c].base;a.vectors.count=b.vectors.count;var g=b.lists[p.ENTRY],l=a.lists[p.ENTRY],f=b.lists[p.EXIT],e=a.lists[p.EXIT],m=b.lists[p.CAP],d=a.lists[p.CAP];for(c=0;c<g.count;++c)l.items[c]=g.items[c];l.count=g.count;for(c=0;c<f.count;++c)e.items[c]=f.items[c];e.count=f.count;for(c=0;c<m.count;++c)d.items[c]=m.items[c];d.count=m.count;a.capCenter=b.capCenter};var B={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0],base:void 0};a.swapExtrudeVectors=n;var z=[];for(q=
0;32>q;++q)z.push([void 0,void 0]);var v=function(a){var b={items:[],count:0},c;for(c=0;c<a;++c)b.items.push([void 0,void 0]);return b}(16);a.length=e;a.normalize=m;a.getNumberOfSlices=function(a){return Math.max(Math.round(a*A),1)};a.getRads=y;a.reverse=F;var w=[void 0,void 0],C=[void 0,void 0],G=[0,0],P=[0,0],Q=[0,0],M=[0,0],R=Math.cos(Math.PI/4),K=Math.sin(Math.PI/4),S=Math.sqrt(2);q=function(){function a(a){this._distanceAlongCorrection=a.distanceAlongCorrection}a.prototype.bridge=function(a,
b,c){var g=b.vectors;b=b.lists[p.EXIT];var l=c.vectors,f=c.lists[p.ENTRY],e,m;if(b.count===f.count+1)c=b.items,e=g.items,m=f.items,l=l.items;else if(f.count===b.count+1)c=f.items,e=l.items,m=b.items,l=g.items;else if(b.count===f.count)c=f.items,e=l.items,m=b.items,l=g.items;else{console.error("Cannot bridge "+b.count+" to "+f.count+".");a.count=0;return}g=b.count+f.count-2;a.count=g;w[0]=c;w[1]=m;C[0]=e;C[1]=l;for(b=0;b<g;++b)c=a.items[b],e=(b+0)%2,e=C[e][w[e][Math.floor((b+0)/2)]],c.v1.vector[0]=
e.vector[0],c.v1.vector[1]=e.vector[1],c.v1.texCoords[0]=e.texCoords[0],c.v1.texCoords[1]=e.texCoords[1],c.v1.direction[0]=e.direction[0],c.v1.direction[1]=e.direction[1],c.v1.base=e.base,e=(b+1)%2,e=C[e][w[e][Math.floor((b+1)/2)]],c.v2.vector[0]=e.vector[0],c.v2.vector[1]=e.vector[1],c.v2.texCoords[0]=e.texCoords[0],c.v2.texCoords[1]=e.texCoords[1],c.v2.direction[0]=e.direction[0],c.v2.direction[1]=e.direction[1],c.v2.base=e.base,e=(b+2)%2,e=C[e][w[e][Math.floor((b+2)/2)]],c.v3.vector[0]=e.vector[0],
c.v3.vector[1]=e.vector[1],c.v3.texCoords[0]=e.texCoords[0],c.v3.texCoords[1]=e.texCoords[1],c.v3.direction[0]=e.direction[0],c.v3.direction[1]=e.direction[1],c.v3.base=e.base,e=c.v1.base&&c.v1.base.point||G,m=c.v2.base&&c.v2.base.point||G,l=c.v3.base&&c.v3.base.point||G,P[0]=e[0]+c.v1.vector[0],P[1]=e[1]+c.v1.vector[1],Q[0]=m[0]+c.v2.vector[0],Q[1]=m[1]+c.v2.vector[1],M[0]=l[0]+c.v3.vector[0],M[1]=l[1]+c.v3.vector[1],0>(Q[0]-P[0])*(M[1]-P[1])-(M[0]-P[0])*(Q[1]-P[1])||n(c.v2,c.v3)};a.prototype.pie=
function(a,b){if(0===b.lists[p.CAP].count)a.count=0;else if(1===b.lists[p.CAP].count)console.error("A single vector is not enough to define a pie."),a.count=0;else{a.count=b.lists[p.CAP].count-1;var c;for(c=0;c<a.count;++c){var g=a.items[c],l=b.vectors.items[b.lists[p.CAP].items[c]];g.v1.vector[0]=l.vector[0];g.v1.vector[1]=l.vector[1];g.v1.texCoords[0]=l.texCoords[0];g.v1.texCoords[1]=l.texCoords[1];g.v1.direction[0]=l.direction[0];g.v1.direction[1]=l.direction[1];g.v1.base=l.base;l=b.vectors.items[b.lists[p.CAP].items[c+
1]];g.v2.vector[0]=l.vector[0];g.v2.vector[1]=l.vector[1];g.v2.texCoords[0]=l.texCoords[0];g.v2.texCoords[1]=l.texCoords[1];g.v2.direction[0]=l.direction[0];g.v2.direction[1]=l.direction[1];g.v2.base=l.base;l=b.vectors.items[b.capCenter];g.v3.vector[0]=l.vector[0];g.v3.vector[1]=l.vector[1];g.v3.texCoords[0]=l.texCoords[0];g.v3.texCoords[1]=l.texCoords[1];g.v3.direction[0]=l.direction[0];g.v3.direction[1]=l.direction[1];g.v3.base=l.base;var l=g.v1.base&&g.v1.base.point||G,f=g.v2.base&&g.v2.base.point||
G,e=g.v3.base&&g.v3.base.point||G;P[0]=l[0]+g.v1.vector[0];P[1]=l[1]+g.v1.vector[1];Q[0]=f[0]+g.v2.vector[0];Q[1]=f[1]+g.v2.vector[1];M[0]=e[0]+g.v3.vector[0];M[1]=e[1]+g.v3.vector[1];0>(Q[0]-P[0])*(M[1]-P[1])-(M[0]-P[0])*(Q[1]-P[1])||n(g.v2,g.v3)}}};a.prototype.buttCap=function(a,b,c){this.fastMiterJoin(a,b,c)};a.prototype.roundCap=function(a,b,c,g,l,f){void 0===f&&(f=0);this.fastMiterJoin(a,b,c);c=g===D.START?0:1;g=g===D.START?1:0;a.capCenter=a.vectors.count;b=a.vectors.items[a.capCenter];b.vector[0]=
0;b.vector[1]=0;b.texCoords[0]=0;b.texCoords[1]=0;b.direction[0]=0;b.direction[1]=0;++a.vectors.count;u(v,a.vectors.items[c].vector,a.vectors.items[g].vector,l,!1);l=a.vectors.count;b=a.lists[p.CAP];b.items[0]=c;c=a.vectors.items[c].texCoords[1];var e=a.vectors.items[g].texCoords[1],m;for(m=0;m<v.count;++m){var d=f*(1-Math.abs(v.count/2-m)/(v.count/2)),r=c+m/(v.count-1)*(e-c),n=v.items[m],y=a.vectors.items[l+m];y.vector[0]=n[0];y.vector[1]=n[1];y.texCoords[0]=d;y.texCoords[1]=r;y.direction[0]=0;y.direction[1]=
0;b.items[m+1]=l+m}b.items[v.count+1]=g;b.count=v.count+2;a.vectors.count=l+v.count};a.prototype.squareCap=function(a,b,c,l){this.fastMiterJoin(a,b,c);b=l===D.START?0:1;c=l===D.START?1:0;var f=z[0],e=z[1],p=z[2],m=z[3];l=z[4];var d=a.vectors.items[b].vector;f[0]=R*d[0]-K*d[1];f[1]=K*d[0]+R*d[1];g(m,f,S);e[0]=R*f[0]-K*f[1];e[1]=K*f[0]+R*f[1];p[0]=R*e[0]-K*e[1];p[1]=K*e[0]+R*e[1];g(l,p,S);b=a.vectors.items[b];b.vector[0]=m[0];b.vector[1]=m[1];a=a.vectors.items[c];a.vector[0]=l[0];a.vector[1]=l[1]};
a.prototype.fastMiterJoin=function(a,c,g){g=b(z[0],g);c=l(z[1],g);var f=a.vectors.items[0];f.vector[0]=g[0];f.vector[1]=g[1];f.texCoords[0]=0;f.texCoords[1]=-1;f.direction[0]=0;f.direction[1]=0;g=a.vectors.items[1];g.vector[0]=c[0];g.vector[1]=c[1];g.texCoords[0]=0;g.texCoords[1]=1;g.direction[0]=0;g.direction[1]=0;a.vectors.count=2;c=a.lists[p.ENTRY];c.items[0]=0;c.items[1]=1;c.count=2;c=a.lists[p.EXIT];c.items[0]=0;c.items[1]=1;c.count=2;a.lists[p.CAP].count=0;a.capCenter=void 0};a.prototype.miterJoin=
function(a,c,e){var d=b(z[0],c),r=b(z[1],e),n=z[2];n[0]=d[0]+r[0];n[1]=d[1]+r[1];r=m(z[3],n);d=f(r,d);r=g(z[4],r,1/d);d=l(z[5],r);this._distanceAlongCorrection?(n=a.vectors.items[0],n.vector[0]=r[0],n.vector[1]=r[1],n.texCoords[0]=0,n.texCoords[1]=-1,n.direction[0]=c[0],n.direction[1]=c[1],n=a.vectors.items[1],n.vector[0]=d[0],n.vector[1]=d[1],n.texCoords[0]=0,n.texCoords[1]=1,n.direction[0]=c[0],n.direction[1]=c[1],c=a.vectors.items[2],c.vector[0]=r[0],c.vector[1]=r[1],c.texCoords[0]=0,c.texCoords[1]=
-1,c.direction[0]=e[0],c.direction[1]=e[1],c=a.vectors.items[3],c.vector[0]=d[0],c.vector[1]=d[1],c.texCoords[0]=0,c.texCoords[1]=1,c.direction[0]=e[0],c.direction[1]=e[1],a.vectors.count=4,e=a.lists[p.ENTRY],e.items[0]=0,e.items[1]=1,e.count=2,e=a.lists[p.EXIT],e.items[0]=2,e.items[1]=3):(n=a.vectors.items[0],n.vector[0]=r[0],n.vector[1]=r[1],n.texCoords[0]=0,n.texCoords[1]=-1,n.direction[0]=0,n.direction[1]=0,n=a.vectors.items[1],n.vector[0]=d[0],n.vector[1]=d[1],n.texCoords[0]=0,n.texCoords[1]=
1,n.direction[0]=0,n.direction[1]=0,a.vectors.count=2,e=a.lists[p.ENTRY],e.items[0]=0,e.items[1]=1,e.count=2,e=a.lists[p.EXIT],e.items[0]=0,e.items[1]=1);e.count=2;a.lists[p.CAP].count=0;a.capCenter=void 0};a.prototype.bevelJoin=function(a,e,d,n){var y=n*n;n=c(e,d);var v=0<n?[-1,1]:[1,-1],u=v[0],v=v[1],D=0<n?l(z[0],b(z[1],e)):b(z[2],e),w=0<n?l(z[3],b(z[4],d)):b(z[5],d),B=z[6];B[0]=D[0]+w[0];B[1]=D[1]+w[1];var x=m(z[7],B),A=l(z[8],x),G=f(x,D),B=c(x,D),I=Math.abs(B/G),B=1+I*I,q=B<H?[I,this._distanceAlongCorrection]:
[Math.sqrt(H-1),!0],J=q[0],q=q[1],C=B<y?[I,this._distanceAlongCorrection]:[Math.sqrt(y-1),!0],I=C[0];(C=C[1])&&q?(q=a.vectors.items[0],r(q.vector,l(z[9],D),g(z[10],l(z[11],e),J)),q.texCoords[0]=0,q.texCoords[1]=u,q.direction[0]=this._distanceAlongCorrection?e[0]:0,q.direction[1]=this._distanceAlongCorrection?e[1]:0,A=a.vectors.items[1],r(A.vector,l(z[12],w),g(z[13],d,J)),A.texCoords[0]=0,A.texCoords[1]=u,A.direction[0]=this._distanceAlongCorrection?d[0]:0,A.direction[1]=this._distanceAlongCorrection?
d[1]:0,u=a.vectors.items[2],u.vector[0]=0,u.vector[1]=0,u.texCoords[0]=0,u.texCoords[1]=0,u.direction[0]=0,u.direction[1]=0,u=a.vectors.items[3],r(u.vector,D,g(z[14],e,I)),u.texCoords[0]=0,u.texCoords[1]=v,u.direction[0]=this._distanceAlongCorrection?e[0]:0,u.direction[1]=this._distanceAlongCorrection?e[1]:0,e=a.vectors.items[4],r(e.vector,w,g(z[15],l(z[16],d),I)),e.texCoords[0]=0,e.texCoords[1]=v,e.direction[0]=this._distanceAlongCorrection?d[0]:0,e.direction[1]=this._distanceAlongCorrection?d[1]:
0,a.vectors.count=5,d=a.lists[p.ENTRY],d.items[0]=0,d.items[1]=2,d.items[2]=3,d.count=3,d=a.lists[p.EXIT],d.items[0]=1,d.items[1]=2,d.items[2]=4,d.count=3,B<y?(y=a.lists[p.CAP],y.count=0,a.capCenter=void 0):(y=a.lists[p.CAP],y.items[0]=3,y.items[1]=4,y.count=2,a.capCenter=2)):!C&&q?(q=a.vectors.items[0],r(q.vector,l(z[9],D),g(z[10],l(z[11],e),J)),q.texCoords[0]=0,q.texCoords[1]=u,q.direction[0]=this._distanceAlongCorrection?e[0]:0,q.direction[1]=this._distanceAlongCorrection?e[1]:0,A=a.vectors.items[1],
r(A.vector,l(z[12],w),g(z[13],d,J)),A.texCoords[0]=0,A.texCoords[1]=u,A.direction[0]=this._distanceAlongCorrection?d[0]:0,A.direction[1]=this._distanceAlongCorrection?d[1]:0,u=a.vectors.items[2],u.vector[0]=0,u.vector[1]=0,u.texCoords[0]=0,u.texCoords[1]=0,u.direction[0]=0,u.direction[1]=0,u=a.vectors.items[3],g(u.vector,x,1/G),u.texCoords[0]=0,u.texCoords[1]=v,u.direction[0]=0,u.direction[1]=0,a.vectors.count=4,d=a.lists[p.ENTRY],d.items[0]=0,d.items[1]=2,d.items[2]=3,d.count=3,d=a.lists[p.EXIT],
d.items[0]=1,d.items[1]=2,d.items[2]=3,d.count=3,a.lists[p.CAP].count=0,a.capCenter=void 0):C&&!q?(q=a.vectors.items[0],g(q.vector,A,1/G),q.texCoords[0]=0,q.texCoords[1]=u,q.direction[0]=0,q.direction[1]=0,A=a.vectors.items[1],A.vector[0]=0,A.vector[1]=0,A.texCoords[0]=0,A.texCoords[1]=0,A.direction[0]=0,A.direction[1]=0,u=a.vectors.items[2],r(u.vector,D,g(z[9],e,I)),u.texCoords[0]=0,u.texCoords[1]=v,u.direction[0]=this._distanceAlongCorrection?e[0]:0,u.direction[1]=this._distanceAlongCorrection?
e[1]:0,u=a.vectors.items[3],r(u.vector,w,g(z[10],l(z[11],d),I)),u.texCoords[0]=0,u.texCoords[1]=v,u.direction[0]=this._distanceAlongCorrection?d[0]:0,u.direction[1]=this._distanceAlongCorrection?d[1]:0,a.vectors.count=4,d=a.lists[p.ENTRY],d.items[0]=0,d.items[1]=1,d.items[2]=2,d.count=3,d=a.lists[p.EXIT],d.items[0]=0,d.items[1]=1,d.items[2]=3,d.count=3,B<y?(y=a.lists[p.CAP],y.count=0,a.capCenter=void 0):(y=a.lists[p.CAP],y.items[0]=2,y.items[1]=3,y.count=2,a.capCenter=1)):C||q||(q=a.vectors.items[0],
g(q.vector,A,1/G),q.texCoords[0]=0,q.texCoords[1]=u,q.direction[0]=0,q.direction[1]=0,A=a.vectors.items[1],g(A.vector,x,1/G),A.texCoords[0]=0,A.texCoords[1]=v,A.direction[0]=0,A.direction[1]=0,a.vectors.count=2,d=a.lists[p.ENTRY],d.items[0]=0,d.items[1]=1,d.count=2,d=a.lists[p.EXIT],d.items[0]=0,d.items[1]=1,d.count=2,a.lists[p.CAP].count=0,a.capCenter=void 0);0>n&&(F(a.lists[p.ENTRY]),F(a.lists[p.EXIT]))};a.prototype.roundJoin=function(a,e,d,n){var y=c(e,d),D=0<y?[-1,1]:[1,-1],w=D[0],D=D[1],B=0<
y?l(z[0],b(z[1],e)):b(z[2],e),A=0<y?l(z[3],b(z[4],d)):b(z[5],d),x=z[6];x[0]=B[0]+A[0];x[1]=B[1]+A[1];var q=m(z[7],x),x=l(z[8],q),G=f(q,B),q=c(q,B),q=Math.abs(q/G),C=1+q*q<H?[q,this._distanceAlongCorrection]:[Math.sqrt(H-1),!0],q=C[0];C[1]?(C=a.vectors.items[0],C.vector[0]=B[0],C.vector[1]=B[1],C.texCoords[0]=0,C.texCoords[1]=D,C.direction[0]=0,C.direction[1]=0,C=a.vectors.items[1],C.vector[0]=A[0],C.vector[1]=A[1],C.texCoords[0]=0,C.texCoords[1]=D,C.direction[0]=0,C.direction[1]=0,C=a.vectors.items[2],
r(C.vector,l(z[9],B),g(z[10],l(z[11],e),q)),C.texCoords[0]=0,C.texCoords[1]=w,C.direction[0]=this._distanceAlongCorrection?e[0]:0,C.direction[1]=this._distanceAlongCorrection?e[1]:0,e=a.vectors.items[3],r(e.vector,l(z[12],A),g(z[13],d,q)),e.texCoords[0]=0,e.texCoords[1]=w,e.direction[0]=this._distanceAlongCorrection?d[0]:0,e.direction[1]=this._distanceAlongCorrection?d[1]:0,d=a.vectors.items[4],d.vector[0]=0,d.vector[1]=0,d.texCoords[0]=0,d.texCoords[1]=0,d.direction[0]=0,d.direction[1]=0,a.vectors.count=
5,d=a.lists[p.ENTRY],d.items[0]=2,d.items[1]=4,d.items[2]=0,d.count=3,d=a.lists[p.EXIT],d.items[0]=3,d.items[1]=4,d.items[2]=1,d.count=3,a.capCenter=4):(C=a.vectors.items[0],C.vector[0]=B[0],C.vector[1]=B[1],C.texCoords[0]=0,C.texCoords[1]=D,C.direction[0]=0,C.direction[1]=0,C=a.vectors.items[1],C.vector[0]=A[0],C.vector[1]=A[1],C.texCoords[0]=0,C.texCoords[1]=D,C.direction[0]=0,C.direction[1]=0,C=a.vectors.items[2],g(C.vector,x,1/G),C.texCoords[0]=0,C.texCoords[1]=w,C.direction[0]=0,C.direction[1]=
0,e=a.vectors.items[3],e.vector[0]=0,e.vector[1]=0,e.texCoords[0]=0,e.texCoords[1]=0,e.direction[0]=0,e.direction[1]=0,a.vectors.count=4,d=a.lists[p.ENTRY],d.items[0]=2,d.items[1]=3,d.items[2]=0,d.count=3,d=a.lists[p.EXIT],d.items[0]=2,d.items[1]=3,d.items[2]=1,d.count=3,a.capCenter=3);u(v,B,A,n,0>y);n=a.vectors.count;B=a.lists[p.CAP];for(A=B.items[0]=0;A<v.count;++A)d=v.items[A],w=a.vectors.items[n+A],w.vector[0]=d[0],w.vector[1]=d[1],w.texCoords[0]=0,w.texCoords[1]=D,w.direction[0]=0,w.direction[1]=
0,B.items[A+1]=n+A;B.items[v.count+1]=1;B.count=v.count+2;a.vectors.count=n+v.count;0>y&&(F(a.lists[p.ENTRY]),F(a.lists[p.EXIT]))};a.prototype.unitRoundJoin=function(a,g,e,f){var d=c(g,e),m=0<d?[-1,1]:[1,-1],r=m[0],m=m[1];g=0<d?l(z[0],b(z[1],g)):b(z[2],g);e=0<d?l(z[3],b(z[4],e)):b(z[5],e);var n=a.vectors.items[0];n.vector[0]=g[0];n.vector[1]=g[1];n.texCoords[0]=0;n.texCoords[1]=m;n.direction[0]=0;n.direction[1]=0;n=a.vectors.items[1];n.vector[0]=e[0];n.vector[1]=e[1];n.texCoords[0]=0;n.texCoords[1]=
m;n.direction[0]=0;n.direction[1]=0;n=a.vectors.items[2];l(n.vector,g);n.texCoords[0]=0;n.texCoords[1]=r;n.direction[0]=0;n.direction[1]=0;n=a.vectors.items[3];l(n.vector,e);n.texCoords[0]=0;n.texCoords[1]=r;n.direction[0]=0;n.direction[1]=0;r=a.vectors.items[4];r.vector[0]=0;r.vector[1]=0;r.texCoords[0]=0;r.texCoords[1]=0;r.direction[0]=0;r.direction[1]=0;a.vectors.count=5;r=a.lists[p.ENTRY];r.items[0]=2;r.items[1]=0;r.count=2;r=a.lists[p.EXIT];r.items[0]=3;r.items[1]=1;r.count=2;a.capCenter=4;u(v,
g,e,f,0>d);f=a.vectors.count;g=a.lists[p.CAP];for(r=g.items[0]=0;r<v.count;++r)e=v.items[r],n=a.vectors.items[f+r],n.vector[0]=e[0],n.vector[1]=e[1],n.texCoords[0]=0,n.texCoords[1]=m,n.direction[0]=0,n.direction[1]=0,g.items[r+1]=f+r;g.items[v.count+1]=1;g.count=v.count+2;a.vectors.count=f+v.count;0>d&&(F(a.lists[p.ENTRY]),F(a.lists[p.EXIT]))};a.prototype.rectJoin=function(a,c,g){c=b(z[0],c);g=b(z[1],g);var e=a.vectors.items[0];e.vector[0]=c[0];e.vector[1]=c[1];e.texCoords[0]=0;e.texCoords[1]=-1;
e.direction[0]=0;e.direction[1]=0;e=a.vectors.items[1];e.vector[0]=g[0];e.vector[1]=g[1];e.texCoords[0]=0;e.texCoords[1]=-1;e.direction[0]=0;e.direction[1]=0;e=a.vectors.items[2];l(e.vector,c);e.texCoords[0]=0;e.texCoords[1]=1;e.direction[0]=0;e.direction[1]=0;c=a.vectors.items[3];l(c.vector,g);c.texCoords[0]=0;c.texCoords[1]=1;c.direction[0]=0;c.direction[1]=0;a.vectors.count=4;c=a.lists[p.ENTRY];c.items[0]=0;c.items[1]=2;c.count=2;c=a.lists[p.EXIT];c.items[0]=1;c.items[1]=3;c.count=2;a.capCenter=
void 0};return a}();a.Tessellator=q})},"esri/views/vectorTiles/style/StyleLayer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Filter ./StyleDefinition ./StyleProperty".split(" "),function(q,a,d,n,f,e,m){Object.defineProperty(a,"__esModule",{value:!0});q=function(){function a(a,b,g){this.type=a;this.id=b.id;this.source=b.source;this.sourceLayer=b["source-layer"];this.minzoom=b.minzoom;this.maxzoom=b.maxzoom;this.filter=b.filter;this.layout=
b.layout;this.paint=b.paint;this.z=g;switch(a){case 0:this._layoutDefinition=e.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=e.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=e.StyleDefinition.fillLayoutDefinition;this._paintDefinition=e.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=e.StyleDefinition.lineLayoutDefinition;this._paintDefinition=e.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=e.StyleDefinition.symbolLayoutDefinition;
this._paintDefinition=e.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=e.StyleDefinition.circleLayoutDefinition,this._paintDefinition=e.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}a.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=f.createFilter(this.filter)};a.prototype.getLayoutProperty=function(a){var b=this._layoutProperties;
if(b)return b[a]};a.prototype.getPaintProperty=function(a){var b=this._paintProperties;if(b)return b[a]};a.prototype.getLayoutValue=function(a,b,g){var c,l=this._layoutProperties;l&&(l=l[a])&&(c=l.getValue(b,g));a=this._layoutDefinition[a];void 0===c&&(c=a["default"]);"enum"===a.type&&(c=a.values.indexOf(c));return c};a.prototype.getPaintValue=function(a,b,g){var c,l=this._paintProperties;l&&(l=l[a])&&(c=l.getValue(b,g));a=this._paintDefinition[a];void 0===c&&(c=a["default"]);"enum"===a.type&&(c=
a.values.indexOf(c));return c};a.prototype._parseLayout=function(a){var b={},c;for(c in a){var e=this._layoutDefinition[c];e&&(b[c]=new m(c,e,a[c]))}return b};a.prototype._parsePaint=function(a){var b={},c;for(c in a){var e=this._paintDefinition[c];e&&(b[c]=new m(c,e,a[c]))}return b};return a}();a.StyleLayer=q;n=function(a){function b(b,c,e){return a.call(this,b,c,e)||this}d(b,a);return b}(q);a.BackgroundStyleLayer=n;n=function(a){function b(b,c,e){b=a.call(this,b,c,e)||this;b.hasDataDrivenFill=!1;
(c=b.getPaintProperty("fill-color"))&&c.isDataDriven&&(b.hasDataDrivenFill=!0);(e=b.getPaintProperty("fill-opacity"))&&e.isDataDriven&&(b.hasDataDrivenFill=!0);b.hasDataDrivenOutline=!1;(e=b.getPaintProperty("fill-outline-color"))&&e.isDataDriven&&(b.hasDataDrivenOutline=!0);!e&&c&&c.isDataDriven&&(b.hasDataDrivenOutline=!0);return b}d(b,a);return b}(q);a.FillStyleLayer=n;n=function(a){function b(b,c,e){b=a.call(this,b,c,e)||this;b.hasDataDrivenLine=!1;(c=b.getPaintProperty("line-color"))&&c.isDataDriven&&
(b.hasDataDrivenLine=!0);(c=b.getPaintProperty("line-opacity"))&&c.isDataDriven&&(b.hasDataDrivenLine=!0);(c=b.getPaintProperty("line-width"))&&c.isDataDriven&&(b.hasDataDrivenLine=!0);return b}d(b,a);return b}(q);a.LineStyleLayer=n;n=function(a){function b(b,c,e){b=a.call(this,b,c,e)||this;b.hasDataDrivenIcon=!1;(c=b.getPaintProperty("icon-color"))&&c.isDataDriven&&(b.hasDataDrivenIcon=!0);(c=b.getPaintProperty("icon-opacity"))&&c.isDataDriven&&(b.hasDataDrivenIcon=!0);(c=b.getLayoutProperty("icon-size"))&&
c.isDataDriven&&(b.hasDataDrivenIcon=!0);b.hasDataDrivenText=!1;(c=b.getPaintProperty("text-color"))&&c.isDataDriven&&(b.hasDataDrivenText=!0);(c=b.getPaintProperty("text-opacity"))&&c.isDataDriven&&(b.hasDataDrivenText=!0);(c=b.getLayoutProperty("text-size"))&&c.isDataDriven&&(b.hasDataDrivenText=!0);return b}d(b,a);return b}(q);a.SymbolStyleLayer=n;q=function(a){function b(b,c,e){return a.call(this,b,c,e)||this}d(b,a);return b}(q);a.CircleStyleLayer=q;q=function(){return function(a,c,e){this.cap=
a.getLayoutValue("line-cap",c,e);this.join=a.getLayoutValue("line-join",c,e);this.miterLimit=a.getLayoutValue("line-miter-limit",c,e);this.roundLimit=a.getLayoutValue("line-round-limit",c,e)}}();a.LineLayout=q;q=function(){return function(a,c,e,g){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",c,g);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",c,g);this.optional=a.getLayoutValue("icon-optional",c,g);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",c,g);this.size=
a.getLayoutValue("icon-size",c,g);this.rotate=a.getLayoutValue("icon-rotate",c,g);this.padding=a.getLayoutValue("icon-padding",c,g);this.keepUpright=a.getLayoutValue("icon-keep-upright",c,g);this.offset=a.getLayoutValue("icon-offset",c,g);2===this.rotationAlignment&&(this.rotationAlignment=e?0:1)}}();a.IconLayout=q;q=function(){return function(a,c,e,g){this.allowOverlap=a.getLayoutValue("text-allow-overlap",c,g);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",c,g);this.optional=a.getLayoutValue("text-optional",
c,g);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",c,g);this.fontArray=a.getLayoutValue("text-font",c,g);this.maxWidth=a.getLayoutValue("text-max-width",c,g);this.lineHeight=a.getLayoutValue("text-line-height",c,g);this.letterSpacing=a.getLayoutValue("text-letter-spacing",c,g);this.justify=a.getLayoutValue("text-justify",c,g);this.anchor=a.getLayoutValue("text-anchor",c,g);this.maxAngle=a.getLayoutValue("text-max-angle",c,g);this.size=a.getLayoutValue("text-size",c,g);this.rotate=
a.getLayoutValue("text-rotate",c,g);this.padding=a.getLayoutValue("text-padding",c,g);this.keepUpright=a.getLayoutValue("text-keep-upright",c,g);this.transform=a.getLayoutValue("text-transform",c,g);this.offset=a.getLayoutValue("text-offset",c,g);2===this.rotationAlignment&&(this.rotationAlignment=e?0:1)}}();a.TextLayout=q})},"esri/views/vectorTiles/style/Filter":function(){define(["require","exports"],function(q,a){return function(){function a(d,f,e){this._op=d;"$type"===f?(this._val=e instanceof
Array?e.map(function(e){return a._types.indexOf(e)}):a._types.indexOf(e),this._op+=11):(this._key=f,this._val=e)}a.prototype.filter=function(a){switch(this._op){case 0:return this._val;case 1:return a.values[this._key]===this._val;case 2:return a.values[this._key]!==this._val;case 3:return a.values[this._key]<this._val;case 4:return a.values[this._key]>this._val;case 5:return a.values[this._key]<=this._val;case 6:return a.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(a.values[this._key]);
case 8:return-1===this._val.indexOf(a.values[this._key]);case 9:for(var f=0,e=this._val;f<e.length;f++){var d=e[f];if(d.filter(a))return!0}return!1;case 10:f=0;for(e=this._val;f<e.length;f++)if(d=e[f],!d.filter(a))return!1;return!0;case 11:f=0;for(e=this._val;f<e.length;f++)if(d=e[f],d.filter(a))return!1;return!0;case 12:return a.type===this._val;case 13:return a.type!==this._val;case 14:return a.type<this._val;case 15:return a.type>this._val;case 16:return a.type>=this._val;case 17:return a.type<=
this._val;case 18:return-1!==this._val.indexOf(a.type);case 19:return-1===this._val.indexOf(a.type)}};a.createFilter=function(d){if(!d)return new a(0,void 0,!0);var f=d[0];if(1>=d.length)return new a(0,void 0,"any"!==f);switch(f){case "\x3d\x3d":return new a(1,d[1],d[2]);case "!\x3d":return new a(2,d[1],d[2]);case "\x3e":return new a(4,d[1],d[2]);case "\x3c":return new a(3,d[1],d[2]);case "\x3e\x3d":return new a(6,d[1],d[2]);case "\x3c\x3d":return new a(5,d[1],d[2]);case "in":return new a(7,d[1],
d.slice(2));case "!in":return new a(8,d[1],d.slice(2));case "any":return new a(9,void 0,d.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,d.slice(1).map(a.createFilter.bind(this)));case "none":return new a(11,void 0,d.slice(1).map(a.createFilter.bind(this)));default:throw Error("invalid operator: "+f);}};a._types=["Unknown","Point","LineString","Polygon"];return a}()})},"esri/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(q,a){Object.defineProperty(a,
"__esModule",{value:!0});q=function(){function a(){}a.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};a.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};a.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number",
"default":2},"line-round-limit":{type:"number","default":1.05}};a.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",values:["point","line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean",
"default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],"default":"auto"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},"icon-padding":{type:"number",minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!1},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],"default":"auto"},"text-font":{type:"array",
value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number","default":1.2},"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},
"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}};
a.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};a.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}};a.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color",
"default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};a.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",
minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number","default":[]},"line-pattern":{type:"string"}};a.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},
"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color","default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",
value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};a.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",
minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}};a.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"circle-stroke-width":{type:"number",
minimum:0,"default":0},"circle-stroke-color":{type:"color","default":[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,"default":1}};return a}();a.StyleDefinition=q})},"esri/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(q,a,d,n){return function(){function a(e,f,b){this.isDataDriven=!1;switch(f.type){case "number":e=!0;break;case "color":e=!0;b=a._parseColor(b);break;case "array":e="number"===f.value;
break;default:e=!1}null==b&&(b=f.default);e&&"interval"===b.type&&(e=!1);var c=b&&b.stops&&0<b.stops.length;if(this.isDataDriven=b&&!!b.property)if(c)switch(b.type){case "identity":this.getValue=this._buildIdentity(b,f);break;case "categorical":this.getValue=this._buildCategorical(b,f);break;default:this.getValue=e?this._buildInterpolate(b,f):this._buildInterval(b,f)}else this.getValue=this._buildIdentity(b,f);else this.getValue=c?e?this._buildZoomInterpolate(b):this._buildZoomInterval(b):this._buildSimple(b)}
a.prototype._buildSimple=function(a){return function(){return a}};a.prototype._buildIdentity=function(e,f){return function(b,c){var l;c&&(l=c.values[e.property],"color"===f.type&&(l=a._parseColor(l)));return void 0!==l?l:void 0!==e.default?e.default:f.default}};a.prototype._buildCategorical=function(a,f){var b=this;return function(c,e){var g;e&&(g=e.values[a.property]);g=b._categorical(g,a.stops);return void 0!==g?g:void 0!==a.default?a.default:f.default}};a.prototype._buildInterval=function(a,f){var b=
this;return function(c,e){var g;e&&(g=e.values[a.property]);return"number"===typeof g?b._interval(g,a.stops):void 0!==a.default?a.default:f.default}};a.prototype._buildInterpolate=function(a,f){var b=this;return function(c,e){var g;e&&(g=e.values[a.property]);return"number"===typeof g?b._interpolate(g,a.stops,a.base||1):void 0!==a.default?a.default:f.default}};a.prototype._buildZoomInterpolate=function(a){var e=this;return function(b){return e._interpolate(b,a.stops,a.base||1)}};a.prototype._buildZoomInterval=
function(a){var e=this;return function(b){return e._interval(b,a.stops)}};a.prototype._categorical=function(a,f){for(var b=f.length,c=0;c<b;c++)if(f[c][0]===a)return f[c][1]};a.prototype._interval=function(a,f){for(var b=f.length,c=0,e=0;e<b;e++)if(f[e][0]<=a)c=e;else break;return f[c][1]};a.prototype._interpolate=function(a,f,b){for(var c,e,g=f.length,d=0;d<g;d++){var m=f[d];if(m[0]<=a)c=m;else{e=m;break}}if(c&&e){d=e[0]-c[0];a-=c[0];b=1===b?a/d:(Math.pow(b,a)-1)/(Math.pow(b,d)-1);if(Array.isArray(c[1])){c=
c[1];e=e[1];a=[];for(d=0;d<c.length;d++)a.push(n.interpolate(c[d],e[d],b));return a}return n.interpolate(c[1],e[1],b)}if(c)return c[1];if(e)return e[1]};a._isEmpty=function(a){for(var e in a)if(a.hasOwnProperty(e))return!1;return!0};a._parseColor=function(e){if(Array.isArray(e))return e;if("string"===typeof e){if(e=new d(e),!this._isEmpty(e))return d.toUnitRGBA(e)}else return e&&e.default&&(e.default=a._parseColor(e.default)),e&&e.stops&&(e.stops=e.stops.map(function(e){return[e[0],a._parseColor(e[1])]})),
e};return a}()})},"esri/Color":function(){define(["./core/declare","./core/accessorSupport/ensureType","dojo/colors"],function(q,a,d){function n(e){return Math.max(0,Math.min(a.ensureInteger(e),255))}var f=q([d],{declaredClass:"esri.Color",toJSON:function(){return[n(this.r),n(this.g),n(this.b),1<this.a?this.a:n(255*this.a)]},clone:function(){return new f(this.toRgba())}});f.toJSON=function(a){return a&&[n(a.r),n(a.g),n(a.b),1<a.a?a.a:n(255*a.a)]};f.fromJSON=function(a){return a&&new f([a[0],a[1],
a[2],a[3]/255])};f.toUnitRGB=function(a){return[a.r/255,a.g/255,a.b/255]};f.toUnitRGBA=function(a){return[a.r/255,a.g/255,a.b/255,null!=a.a?a.a:1]};var e="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(q=0;q<e.length;q++)f[e[q]]=d[e[q]];f.named.rebeccapurple=[102,51,153];return f})},"esri/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(q,a,d){function n(a,c){a&&!Array.isArray(a)&&"function"!==typeof a&&(c=a,a=null);a=a||[];c=c||{};return f([this].concat(a),
c)}function f(a,c){a&&!Array.isArray(a)&&"function"!==typeof a&&(c=a,a=null);"function"===typeof a?a=[a]:a||(a=[]);c=c||{};var b,g;b=0;for(g=e.length;b<g;b++)e[b](a,c);a=d(a,c);a.createSubclass=n;b=0;for(g=m.length;b<g;b++)m[b](a);return a}var e=[],m=[];(function(a){a.hasMixin=function(a,b){a=Array.isArray(a)?a.reduce(function(a,b){return b._meta?a.concat(b._meta.bases):a},[]):a._meta?a._meta.bases:a;if(!a)return!1;if("string"===typeof b)for(var c=a.length-1;0<=c;c--)if(a[c].prototype.declaredClass===
b)return!0;return-1!==a.indexOf(b)};a.safeMixin=function(a,b){return d.safeMixin(a,b)};a.before=function(a){e.push(a)};a.after=function(a){m.push(a)}})(f||(f={}));return f})},"esri/core/accessorSupport/ensureType":function(){define(["require","exports","../Logger"],function(q,a,d){function n(a,b){return b.isInstanceOf?b.isInstanceOf(a):b instanceof a}function f(a){return null==a?a:new Date(a)}function e(a){return null==a?a:!!a}function m(a){return null==a?a:a.toString()}function b(a){return null==
a?a:parseFloat(a)}function c(a){return null==a?a:Math.round(parseFloat(a))}function l(a){return a&&a.constructor&&void 0!==a.constructor._meta}function g(a,b){return null!=b&&a&&!n(a,b)}function r(a,b){g(a,b)&&(l(b)?A.error("Accessor#set","Assigning an instance of '"+(b.declaredClass||"unknown")+"' which is not a subclass of '"+(a&&a.prototype&&a.prototype.declaredClass||"unknown")+"'"):b=new a(b));return b}function y(a){switch(a){case Number:return b;case B:return c;case Boolean:return e;case String:return m;
case Date:return f;default:return r.bind(null,a)}}function u(a,b){var c=y(a);return 1===arguments.length?c:c(b)}function F(a,b){return 1===arguments.length?F.bind(null,a):b?Array.isArray(b)?b.map(a):[a(b)]:b}function p(a,b,c){return 0!==b&&Array.isArray(c)?c.map(function(c){return p(a,b-1,c)}):a(c)}function D(a,b,c){if(2===arguments.length)return D.bind(null,a,b);if(!c)return c;c=p(a,b,c);for(var g=b,e=c;0<g&&Array.isArray(e);)g--,e=e[0];if(void 0!==e)for(e=0;e<g;e++)c=[c];return c}function H(a,b){if(2===
arguments.length)return H(a).call(null,b);var c={},e=[],f=[],d;for(d in a.typeMap){var p=a.typeMap[d];c[d]=u(p);e.push(p&&p.prototype&&p.prototype.declaredClass||"unknown");f.push(d)}var m="string"===typeof a.key?function(b){return b[a.key]}:a.key;return function(b){if(a.base&&!g(a.base,b))return b;var d=m(b)||a.defaultKeyValue,p=c[d];if(!p)return A.error("Accessor#set","Invalid property value, value needs to be one of "+("'"+e.join("', '")+"'")+", or a plain object that can auto-cast (having .type \x3d "+
("'"+f.join("', '")+"'")+")"),null;if(!g(a.typeMap[d],b))return b;if("string"!==typeof a.key||l(b))return p(b);var d={},r;for(r in b)r!==a.key&&(d[r]=b[r]);return p(d)}}Object.defineProperty(a,"__esModule",{value:!0});var A=d.getLogger("esri.core.Accessor");a.isInstanceOf=n;a.ensureDate=f;a.ensureBoolean=e;a.ensureString=m;a.ensureNumber=b;a.ensureInteger=c;a.isClassedType=l;a.requiresType=g;a.ensureClass=r;a.ensureType=u;a.ensureArrayTyped=F;a.ensureArray=function(a,b){return 1===arguments.length?
F(u.bind(null,a)):F(u.bind(null,a),b)};a.ensureNArrayTyped=D;a.ensureNArray=function(a,b,c){return 2===arguments.length?D(u.bind(null,a),b):D(u.bind(null,a),b,c)};a.ensureOneOfType=H;var B=function(){return function(){}}();a.Integer=B;a.default=u})},"esri/core/Logger":function(){define(["require","exports","dojo/has"],function(q,a,d){var n={info:0,warn:1,error:2};q=function(){function a(e){void 0===e&&(e={});this.module=e.module||"";this.writer=e.writer||null;this.level=e.level||null;null!=e.enabled&&
(this.enabled=!!e.enabled);a._loggers[this.module]=this;e=this.module.lastIndexOf(".");-1!==e&&(this.parent=a.getLogger(this.module.slice(0,e)))}a.prototype.log=function(a){for(var e=[],b=1;b<arguments.length;b++)e[b-1]=arguments[b];this._isEnabled()&&this._matchLevel(a)&&(b=this._inheritedWriter())&&b.apply(void 0,[a,this.module].concat(e))};a.prototype.error=function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];this.log.apply(this,["error"].concat(a))};a.prototype.warn=function(){for(var a=
[],f=0;f<arguments.length;f++)a[f]=arguments[f];this.log.apply(this,["warn"].concat(a))};a.prototype.info=function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];this.log.apply(this,["info"].concat(a))};a.prototype.getLogger=function(e){return a.getLogger(this.module+"."+e)};a.getLogger=function(e){var f=a._loggers[e];f||(f=new a({module:e}));return f};a.prototype._parentWithMember=function(a,f){for(var b=this;b&&null==b[a];)b=b.parent;return b?b[a]:f};a.prototype._inheritedWriter=function(){return this._parentWithMember("writer",
this._consoleWriter)};a.prototype._consoleWriter=function(a,f){for(var b=[],c=2;c<arguments.length;c++)b[c-2]=arguments[c];console[a].apply(console,["["+f+"]"].concat(b))};a.prototype._matchLevel=function(a){return n[this._parentWithMember("level","error")]<=n[a]};a.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};a._loggers={};return a}();q.getLogger("esri").level="warn";return q})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],
function(q,a,d,n){var f={};a.setObject("dojo.colors",f);var e=function(a,c,e){0>e&&++e;1<e&&--e;var b=6*e;return 1>b?a+(c-a)*b:1>2*e?c:2>3*e?a+(c-a)*(2/3-e)*6:a};q.colorFromRgb=d.fromRgb=function(a,c){var b=a.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(b){a=b[2].split(/\s*,\s*/);var g=a.length,b=b[1];if("rgb"==b&&3==g||"rgba"==b&&4==g)return b=a[0],"%"==b.charAt(b.length-1)?(b=n.map(a,function(a){return 2.56*parseFloat(a)}),4==g&&(b[3]=a[3]),d.fromArray(b,c)):d.fromArray(a,c);if("hsl"==
b&&3==g||"hsla"==b&&4==g){var b=(parseFloat(a[0])%360+360)%360/360,f=parseFloat(a[1])/100,m=parseFloat(a[2])/100,f=.5>=m?m*(f+1):m+f-m*f,m=2*m-f,b=[256*e(m,f,b+1/3),256*e(m,f,b),256*e(m,f,b-1/3),1];4==g&&(b[3]=a[3]);return d.fromArray(b,c)}}return null};var m=function(a,c,e){a=Number(a);return isNaN(a)?e:a<c?c:a>e?e:a};d.prototype.sanitize=function(){this.r=Math.round(m(this.r,0,255));this.g=Math.round(m(this.g,0,255));this.b=Math.round(m(this.b,0,255));this.a=m(this.a,0,1);return this};f.makeGrey=
d.makeGrey=function(a,c){return d.fromArray([a,a,a,c])};a.mixin(d.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],
darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,
105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,
128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,
112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,
239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,
99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return d})},"esri/views/vectorTiles/Placement":function(){define(["require","exports","../2d/engine/webgl/Geometry","./Conflict","./GeometryUtils"],function(q,a,d,n,f){Object.defineProperty(a,"__esModule",{value:!0});q=function(){return function(a,b,e,f,d){void 0===e&&(e=0);void 0===f&&(f=-1);void 0===d&&(d=c);this.x=a;this.y=b;this.angle=e;this.segment=f;this.minzoom=d}}();a.Anchor=
q;var e=function(){return function(a,b,e,d,m,n,p){void 0===m&&(m=!1);void 0===n&&(n=c);void 0===p&&(p=f.C_INFINITY);this.anchor=a;this.labelAngle=b;this.glyphAngle=e;this.page=d;this.upsideDown=m;this.minzoom=n;this.maxzoom=p}}(),m=function(){return function(a,b,c,e,f,d,p,m,n,A){this.tl=a;this.tr=b;this.bl=c;this.br=e;this.mosaicRect=f;this.labelAngle=d;this.anchor=p;this.minzoom=m;this.maxzoom=n;this.page=A}}();a.PlacedSymbol=m;var b=function(){return function(a,b){this.footprint=a;this.shapes=b}}();
a.Placement=b;var c=.5;q=function(){function a(){this.mapAngle=0;this._conflictEngine=new n.ConflictEngine}a.prototype.reset=function(){this._conflictEngine.reset()};a.prototype.setAngle=function(a){this.mapAngle=a;this._conflictEngine.setAngle(a)};a.prototype.getIconPlacement=function(a,e,l,u,F,p,D){var g=l.width/l.pixelRatio,r=l.height/l.pixelRatio;F=p.offset[0]-g/2;var y=p.offset[1]-r/2,g=F+g,r=y+r,z=l.rect,v=l.sdf?17:2,w=F-v,q=y-v,G=w+z.width/l.pixelRatio,P=q+z.height/l.pixelRatio;l=new d.Point(w,
q);v=new d.Point(G,P);P=new d.Point(w,P);q=new d.Point(G,q);G=p.rotate*f.C_DEG_TO_RAD;w=1===p.rotationAlignment;0<=a.segment&&!w&&(G+=a.angle);if(0!==G){var Q=Math.cos(G),M=Math.sin(G);l.rotate(Q,M);v.rotate(Q,M);P.rotate(Q,M);q.rotate(Q,M)}Q=8*p.padding;M=new d.Point(a.x,a.y);a=new n.Footprint(this.mapAngle,Q,w);a.addBox(M,new n.Box(F,y,g,r),u,G,e,c,f.C_INFINITY);e=new m(l,q,P,v,z,0,M,c,f.C_INFINITY,0);e=new b(a,[e]);u=c;p.allowOverlap||(u=this._conflictEngine.getMinZoom(e.footprint,u,D,w));a.minzoom=
u;return e};a.prototype.getTextPlacement=function(a,l,y,u,F,p,D,H){for(var g=new d.Point(a.x,a.y),r=D.rotate*f.C_DEG_TO_RAD,z=0===D.rotationAlignment,v=D.keepUpright,w=c,q=!z,G=q?0:a.angle,P=0<=a.segment&&z,Q=new n.Footprint(this.mapAngle,8*D.padding,q),M=[],R=!P,K=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,E=K,x=S,I=P?v:z&&v,J,U=0;U<u.length;U++){var L=u[U],T=L.glyphMosaicItem;if(T&&!T.rect.isEmpty){var V=T.rect,ca=T.metrics,da=T.page;R&&(J&&J!==L.y&&(Q.addBox(g,new n.Box(K,E,S,x),F,r,l,
c,f.C_INFINITY),K=Number.POSITIVE_INFINITY,S=Number.NEGATIVE_INFINITY,E=K,x=S),J=L.y);var fa=[];if(P){if(T=(y.x+L.x+ca.left-4+.5*T.metrics.width)*F,w=this._placeGlyph(a,w,T,p,a.segment,1,da,fa),v&&(w=this._placeGlyph(a,w,T,p,a.segment,-1,da,fa)),2<=w)break}else fa.push(new e(g,G,G,da)),z&&v&&fa.push(new e(g,G+f.C_PI,G+f.C_PI,da,!0));for(var da=L.x+y.x+ca.left,L=L.y+y.y-ca.top,T=da+ca.width,ca=L+ca.height,ga=new d.Point(da-4,L-4),ea=new d.Point(ga.x+V.width,ga.y+V.height),ba=new d.Point(ga.x,ea.y),
ha=new d.Point(ea.x,ga.y),X=0;X<fa.length;X++){var Y=fa[X],ka=ga.clone(),la=ba.clone(),ma=ha.clone(),na=ea.clone(),ja=L,oa=ca,Z=Y.glyphAngle+r;if(0!==Z){var N=Math.cos(Z),W=Math.sin(Z);ka.rotate(N,W);na.rotate(N,W);la.rotate(N,W);ma.rotate(N,W)}M.push(new m(ka,ma,la,na,V,Y.labelAngle,Y.anchor,Y.minzoom,Y.maxzoom,Y.page));if(!I||this._legible(Y.labelAngle))R?(da<K&&(K=da),ja<E&&(E=ja),T>S&&(S=T),oa>x&&(x=oa)):2>Y.minzoom&&Q.addBox(Y.anchor,new n.Box(da,ja,T,oa),F,Z,l,Y.minzoom,Y.maxzoom)}}}if(2<=w)return null;
R&&Q.addBox(g,new n.Box(K,E,S,x),F,r,l,c,f.C_INFINITY);a=new b(Q,M);D.allowOverlap||(w=this._conflictEngine.getMinZoom(a.footprint,w,H,q));Q.minzoom=w;return a};a.prototype.add=function(a){this._conflictEngine.add(a.footprint)};a.prototype._legible=function(a){a=f.radToByte(a);return 65>a||193<=a};a.prototype._placeGlyph=function(a,b,c,l,m,p,n,H){var g=0>p?f.positiveMod(a.angle+f.C_PI,f.C_2PI):a.angle,r=this._legible(g),y=0;0>c&&(p*=-1,c*=-1,y=f.C_PI);0<p&&++m;a=new d.Point(a.x,a.y);var F=l[m],u=
f.C_INFINITY;if(l.length<=m)return u;for(;;){var D=F.x-a.x,q=F.y-a.y,P=Math.sqrt(D*D+q*q),Q=Math.max(c/P,b),D=f.positiveMod(Math.atan2(q/P,D/P)+y,f.C_2PI);H.push(new e(a,g,D,n,r,Q,u));if(Q<=b)return Q;a=F.clone();do{m+=p;if(l.length<=m||0>m)return Q;F=l[m]}while(a.isEqual(F));u=F.x-a.x;D=F.y-a.y;q=Math.sqrt(u*u+D*D);u*=P/q;D*=P/q;a.x-=u;a.y-=D;u=Q}};return a}();a.PlacementEngine=q})},"esri/views/vectorTiles/Conflict":function(){define(["require","exports","../2d/engine/webgl/Geometry","./GeometryUtils"],
function(q,a,d,n){Object.defineProperty(a,"__esModule",{value:!0});q=function(){function a(a,c,e,g){this.left=a;this.top=c;this.right=e;this.bottom=g}a.prototype.clone=function(){return new a(this.left,this.top,this.right,this.bottom)};a.prototype.move=function(a,c){this.left+=a;this.top+=c;this.right+=a;this.bottom+=c};a.prototype.rotate=function(a,c){var b=this.left,g=this.right,e=this.top,f=this.bottom,d=b*a-e*c,m=b*c+e*a,p=g*a-e*c,e=g*c+e*a,n=b*a-f*c,b=b*c+f*a,H=g*a-f*c;a=g*c+f*a;this.left=Math.min(d,
p,n,H);this.top=Math.min(m,e,b,a);this.right=Math.max(d,p,n,H);this.bottom=Math.max(m,e,b,a)};a.overlaps=function(a,c){return a.right>c.left&&a.left<c.right&&a.bottom>c.top&&a.top<c.bottom};return a}();a.Box=q;var f=function(){function a(a,c,e,g){this.anchor=a;this.corners=c;this.minzoom=e;this.maxzoom=g}a.prototype.left=function(){return this.corners[0].x};a.prototype.right=function(){return this.corners[2].x};a.prototype.top=function(){return this.corners[1].y};a.prototype.bottom=function(){return this.corners[3].y};
return a}();a.Obstacle=f;q=function(){function a(a,c,f){this.obstacles=[];this.mapAngle=a;this.padding=c;this.isScreenAligned=f;this.minzoom=e}a.prototype.addBox=function(a,c,e,g,m,n,u){var b=c.left*e-this.padding,l=c.top*e-this.padding,r=c.right*e+this.padding;c=c.bottom*e+this.padding;b=[new d.Point(b,l),new d.Point(r,l),new d.Point(r,c),new d.Point(b,c)];0!==this.mapAngle&&(l=Math.cos(this.mapAngle),r=Math.sin(this.mapAngle),a=a.clone(),a.rotate(l,r));this.isScreenAligned||(g+=this.mapAngle);if(0!==
g){l=Math.cos(g);r=Math.sin(g);b[0].rotate(l,r);b[1].rotate(l,r);b[2].rotate(l,r);b[3].rotate(l,r);g=0;for(l=1;4>l;l++)b[l].x<b[g].x?g=l:b[l].x===b[g].x&&b[l].y<b[g].y&&(g=l);if(g){r=[];for(l=0;4>l;l++)r.push(b[(l+g)%4]);b=r}}if(m)for(g=0,l=b;g<l.length;g++)l[g].move(m[0],m[1]);this.obstacles.push(new f(a,b,n,u))};return a}();a.Footprint=q;var e=.5;q=function(){function a(){this._grid=[]}a.prototype.setAngle=function(a){};a.prototype.reset=function(){this._grid=[]};a.prototype.add=function(b){var c=
this._grid,e=0;for(b=b.obstacles;e<b.length;e++)for(var g=b[e],f=g.anchor,d=a._gridClamp(Math.min(g.left()+f.x,f.x)),m=a._gridClamp(Math.max(g.right()+f.x,f.x)),n=a._gridClamp(Math.min(g.top()+f.y,f.y)),f=a._gridClamp(Math.max(g.bottom()+f.y,f.y));n<=f;n++)for(var p=d;p<=m;p++){var D=c[16*n+p];D||(D=c[16*n+p]=[]);D.push(g)}};a.prototype.getMinZoom=function(b,c,e,g){if(0===b.obstacles.length)return n.C_INFINITY;e=this._grid;g=0;for(b=b.obstacles;g<b.length;g++)for(var f=b[g],d=f.anchor,l=a._gridClamp(Math.min(f.left()+
d.x,d.x)),m=a._gridClamp(Math.max(f.right()+d.x,d.x)),p=a._gridClamp(Math.min(f.top()+d.y,d.y)),d=a._gridClamp(Math.max(f.bottom()+d.y,d.y));p<=d;p++)for(var D=l;D<=m;D++){var H=e[16*p+D];if(H)for(var A=0;A<H.length;A++){var B=H[A];if(!(f.minzoom>=B.maxzoom||B.minzoom>=f.maxzoom)&&(c=a._calcPlacementZoom(f,B,c),2<=c))return n.C_INFINITY}}return 2>c?c:n.C_INFINITY};a._gridClamp=function(a){return n.clamp(a>>9,-7,8)};a._calcPlacementZoom=function(b,c,e){var g=c.anchor.x-b.anchor.x;if(0===g&&(b.right()<
c.left()||c.right()<b.left()))return e;var f=c.anchor.y-b.anchor.y;if(0===f&&(b.bottom()<c.top()||c.bottom()<b.top()))return e;var d=n.C_INFINITY;if(0!==g){var l=(0<g?b.right()-c.left():b.left()-c.right())/g;l<d&&(d=l);g=0<g?a._calcExtZoomX(b,c,l):a._calcExtZoomX(c,b,l);g<d&&(d=g)}0!==f&&(g=(0<f?b.bottom()-c.top():b.top()-c.bottom())/f,g<d&&(d=g),f=0<f?a._calcExtZoomY(b,c,g):a._calcExtZoomY(c,b,g),f<d&&(d=f));if(d<b.minzoom||d<c.minzoom)return e;d=Math.min(d,b.maxzoom,c.maxzoom);d<e&&(d=e);return d};
a._calcExtZoomX=function(a,c,e){var b,f,d;if(a.anchor.y+a.corners[2].y/e<c.anchor.y+c.corners[0].y/e){b=a.corners[2].x-a.corners[3].x;d=a.corners[2].y-a.corners[3].y;var l=c.corners[1].x-c.corners[0].x;f=c.corners[1].y-c.corners[0].y;0<=b*f-d*l?a.anchor.y+a.corners[3].y/e<c.anchor.y+c.corners[0].y/e?(e=a.corners[3],b=c.corners[0],f=c.corners[1],d=1):(e=c.corners[0],b=a.corners[3],f=a.corners[2],d=-1):a.anchor.y+a.corners[2].y/e>c.anchor.y+c.corners[1].y/e?(e=a.corners[2],b=c.corners[0],f=c.corners[1],
d=1):(e=c.corners[1],b=a.corners[3],f=a.corners[2],d=-1)}else b=a.corners[2].x-a.corners[1].x,d=a.corners[2].y-a.corners[1].y,l=c.corners[3].x-c.corners[0].x,f=c.corners[3].y-c.corners[0].y,0>b*f-d*l?a.anchor.y+a.corners[1].y/e>c.anchor.y+c.corners[0].y/e?(e=a.corners[1],b=c.corners[0],f=c.corners[3],d=1):(e=c.corners[0],b=a.corners[1],f=a.corners[2],d=-1):a.anchor.y+a.corners[2].y/e<c.anchor.y+c.corners[3].y/e?(e=a.corners[2],b=c.corners[0],f=c.corners[3],d=1):(e=c.corners[3],b=a.corners[1],f=a.corners[2],
d=-1);l=f.x-b.x;f=f.y-b.y;return d*((e.y-b.y)*l-(e.x-b.x)*f)/((a.anchor.x-c.anchor.x)*f-(a.anchor.y-c.anchor.y)*l)};a._calcExtZoomY=function(a,c,e){var b,f,d;if(a.anchor.x+a.corners[3].x/e<c.anchor.x+c.corners[1].x/e){b=a.corners[3].x-a.corners[2].x;d=a.corners[3].y-a.corners[2].y;var l=c.corners[0].x-c.corners[1].x;f=c.corners[0].y-c.corners[1].y;0>b*f-d*l?a.anchor.x+a.corners[2].x/e<c.anchor.x+c.corners[1].x/e?(e=a.corners[2],b=c.corners[1],f=c.corners[0],d=1):(e=c.corners[1],b=a.corners[2],f=a.corners[3],
d=-1):a.anchor.x+a.corners[3].x/e>c.anchor.x+c.corners[0].x/e?(e=a.corners[3],b=c.corners[1],f=c.corners[0],d=1):(e=c.corners[0],b=a.corners[2],f=a.corners[3],d=-1)}else b=a.corners[3].x-a.corners[0].x,d=a.corners[3].y-a.corners[0].y,l=c.corners[2].x-c.corners[1].x,f=c.corners[2].y-c.corners[1].y,0<b*f-d*l?a.anchor.x+a.corners[0].x/e>c.anchor.x+c.corners[1].x/e?(e=a.corners[0],b=c.corners[1],f=c.corners[2],d=1):(e=c.corners[1],b=a.corners[0],f=a.corners[3],d=-1):a.anchor.x+a.corners[3].x/e<c.anchor.x+
c.corners[2].x/e?(e=a.corners[3],b=c.corners[1],f=c.corners[2],d=1):(e=c.corners[2],b=a.corners[0],f=a.corners[3],d=-1);l=f.x-b.x;f=f.y-b.y;return d*((e.y-b.y)*l-(e.x-b.x)*f)/((a.anchor.x-c.anchor.x)*f-(a.anchor.y-c.anchor.y)*l)};return a}();a.ConflictEngine=q})},"esri/views/vectorTiles/SymbolBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper dojox/string/BidiEngine ../2d/engine/webgl/Geometry ../2d/engine/webgl/TextShaping ./Bucket ./GeometryUtils ./Placement ./style/StyleLayer".split(" "),
function(q,a,d,n,f,e,m,b,c,l,g){function r(a,b){if(a.iconMosaicItem&&b.iconMosaicItem){if(a.iconMosaicItem.page!==b.iconMosaicItem.page)return a.iconMosaicItem.page<b.iconMosaicItem.page?-1:1}else{if(a.iconMosaicItem&&!b.iconMosaicItem)return 1;if(!a.iconMosaicItem&&b.iconMosaicItem)return-1}return 0}(function(){return function(){}})();return function(a){function b(b,c,e,f,g,d,l,m){c=a.call(this,b,c)||this;c._markerMap=new Map;c._glyphMap=new Map;c._glyphBufferDataStorage=new Map;c._sdfMarkers=!1;
if(b.hasDataDrivenIcon!==e.isDataDriven())throw Error("incompatible icon buffer");if(b.hasDataDrivenText!==g.isDataDriven())throw Error("incompatible text buffer");c._iconVertexBuffer=e;c._iconIndexBuffer=f;c._textVertexBuffer=g;c._textIndexBuffer=d;c._placementEngine=l;c._workerTileHandler=m;return c}d(b,a);Object.defineProperty(b.prototype,"markerPageMap",{get:function(){return this._markerMap},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"glyphsPageMap",{get:function(){return this._glyphMap},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"sdfMarker",{get:function(){return this._sdfMarkers},enumerable:!0,configurable:!0});b.prototype.copy=function(a,c,e,f,g){a=new b(this.layer,this.zoom,a,c,e,f,g,this._workerTileHandler);a.layerIndex=this.layerIndex;a.layerExtent=this.layerExtent;a._iconIndexStart=c.index;a._textIndexStart=f.index;a._iconIndexCount=0;a._textIndexCount=0;a._symbolInstances=this._symbolInstances;a._workerTileHandler=this._workerTileHandler;a._fontArray=
this._fontArray;a._textLayout=this._textLayout;a._iconLayout=this._iconLayout;a._isLinePlacement=this._isLinePlacement;a._avoidEdges=this._avoidEdges;return a};b.prototype.getResources=function(a,c,e){var f=this.layer,g=this.zoom,d=f.hasDataDrivenIcon,l=f.hasDataDrivenText;a&&a.setExtent(this.layerExtent);for(var p=f.getLayoutProperty("icon-image"),m=f.getLayoutProperty("text-field"),n=f.getLayoutValue("text-font",g),r=f.getLayoutValue("text-transform",g),D=[],F=0,u=this._features;F<u.length;F++){var y=
u[F],q=y.getGeometry(a);if(q&&0!==q.length){var S=void 0;p&&(S=f.getLayoutValue("icon-image",g,y),p.isDataDriven||(S=this._replaceKeys(S,y.values)),S&&c.add(S));var E=void 0,x=!1;if(m&&(E=f.getLayoutValue("text-field",g,y),m.isDataDriven||(E=this._replaceKeys(E,y.values)),E)){switch(r){case 2:E=E.toLowerCase();break;case 1:E=E.toUpperCase()}b._bidiEngine.hasBidiChar(E)&&(x=void 0,x="rtl"===b._bidiEngine.checkContextual(E)?"IDNNN":"ICNNN",E=b._bidiEngine.bidiTransform(E,x,"VLYSN"),x=!0);var I=E.length;
if(0<I)for(var J=0,U=n;J<U.length;J++){var L=U[J],T=e[L];T||(T=e[L]=new Set);for(L=0;L<I;L++){var V=E.charCodeAt(L);T.add(V)}}}if(S||E)I=f.getLayoutValue("icon-size",g,y),J=f.getLayoutValue("text-size",g,y),y={sprite:S,label:E,rtl:x,geometry:q,iconSize:I,iconRotate:f.getLayoutValue("icon-rotate",g,y),ddIconValues:d?{color:f.getPaintValue("icon-color",g,y),opacity:f.getPaintValue("icon-opacity",g,y),size:I}:null,textSize:J,textRotate:f.getLayoutValue("text-rotate",g,y),ddTextValues:l?{color:f.getPaintValue("text-color",
g,y),opacity:f.getPaintValue("text-opacity",g,y),size:J}:null},D.push(y)}}this._symbolFeatures=D};b.prototype.processFeatures=function(a,e){a&&a.setExtent(this.layerExtent);var f=this.layer,d=this.zoom;e=this._isLinePlacement=1===f.getLayoutValue("symbol-placement",d);a=this._avoidEdges=f.getLayoutValue("symbol-avoid-edges",d)&&!e;var p=8*f.getLayoutValue("symbol-spacing",d),n=f.getLayoutProperty("icon-image"),y=f.getLayoutProperty("text-field"),F=this._workerTileHandler,u,q;n&&(this._iconLayout=
new g.IconLayout(f,d,e),u=F.getSpriteItems(),q=this._getTranslate(!0));var G,P,Q;if(y){G=this._textLayout=new g.TextLayout(f,d,e);this._fontArray=G.fontArray;Q=.5;switch(G.anchor){case 5:case 1:case 7:Q=0;break;case 6:case 2:case 8:Q=1}P=.5;switch(G.anchor){case 5:case 3:case 6:P=0;break;case 7:case 4:case 8:P=1}f=.5;switch(G.justify){case 0:f=0;break;case 2:f=1}var d=24*G.letterSpacing,n=e?0:24*G.maxWidth,y=24*G.lineHeight,M=[24*G.offset[0],24*G.offset[1]];G=this._fontArray.map(function(a){return F.getGlyphItems(a)});
P=new m(G,n,y,d,M,Q,P,f);Q=this._getTranslate(!1)}this._iconIndexStart=this._iconIndexBuffer.index;this._textIndexStart=this._textIndexBuffer.index;this._textIndexCount=this._iconIndexCount=0;this._markerMap.clear();this._glyphMap.clear();this._symbolInstances=f=[];d=this._textLayout;n=1;d&&d.size&&(n=d.size/24);y=d?d.maxAngle*c.C_DEG_TO_RAD:0;G=d?8*d.size:0;for(var M=0,R=this._symbolFeatures;M<R.length;M++){var K=R[M],S=void 0;K.sprite&&(S=u[K.sprite])&&S.sdf&&(this._sdfMarkers=!0);var E=void 0,
x=K.label,I=0;if(x&&(E=P.getShaping(x,K.rtl))&&0<E.length){for(var I=1E30,x=-1E30,J=0,U=E;J<U.length;J++)var L=U[J],I=Math.min(I,L.x),x=Math.max(x,L.x);I=(x-I+48)*n*8}x=0;for(J=K.geometry;x<J.length;x++){var U=J[x],T=void 0;e?(E&&0<E.length&&d&&d.size&&b._smoothVertices(U,8*d.size*(2+Math.min(2,4*Math.abs(d.offset[1])))),T=b._findAnchors(U,p,I)):T=[new l.Anchor(U[0].x,U[0].y)];for(L=0;L<T.length;L++){var V=T[L];0>V.x||4096<V.x||0>V.y||4096<V.y||e&&0<I&&0===d.rotationAlignment&&!b._honorsTextMaxAngle(U,
V,I,y,G)||f.push({shaping:E,line:U,iconMosaicItem:S,anchor:V,iconSize:K.iconSize,iconRotate:K.iconRotate,ddIconValues:K.ddIconValues,textSize:K.textSize,textRotate:K.textRotate,ddTextValues:K.ddTextValues})}}}f.sort(r);for(u=0;u<f.length;u++)this._processFeature(f[u],q,Q,a);this._addPlacedGlyphs()};b.prototype.updateSymbols=function(){this._iconIndexStart=this._iconIndexBuffer.index;this._textIndexStart=this._textIndexBuffer.index;this._textIndexCount=this._iconIndexCount=0;this._markerMap.clear();
this._glyphMap.clear();var a=this._avoidEdges,b=this.layer,c;b.getLayoutProperty("icon-image")&&(c=this._getTranslate(!0));var e;b.getLayoutProperty("text-field")&&(e=this._getTranslate(!1));for(var b=0,f=this._symbolInstances;b<f.length;b++)this._processFeature(f[b],c,e,a);this._addPlacedGlyphs()};b.prototype._getTranslate=function(a){var b=this.layer.getPaintValue(a?"icon-translate":"text-translate",this.zoom);if(0!==b[0]||0!==b[1]){var c=this._placementEngine.mapAngle;return 0!==c&&0===this.layer.getPaintValue(a?
"icon-translate-anchor":"text-translate-anchor",this.zoom)?(a=Math.sin(c),c=Math.cos(c),[8*(b[0]*c-b[1]*a),8*(b[0]*a+b[1]*c)]):[8*b[0],8*b[1]]}};b.prototype._replaceKeys=function(a,b){return a.replace(/{([^{}]+)}/g,function(a,c){return c in b?b[c]:""})};b.prototype._processFeature=function(a,b,f,g){var d=a.line,l=a.iconMosaicItem,p=a.shaping,m=a.anchor,n=this._iconLayout,r=n&&!!l,y=!0,u=1;r&&(n.size=a.iconSize,n.rotate=a.iconRotate,u=8*n.size,y=n.optional||!l);var F=this._textLayout,D=F&&p&&0<p.length,
q;q=1;var H=!0;D&&(F.size=a.textSize,F.rotate=a.textRotate,q=F.size/24,q*=8,H=F.optional||!p||0===p.length);var S=new e.Point(0,-17),E;if(r){E=this._placementEngine.getIconPlacement(m,b,l,u,d,n,g);if(E.footprint.minzoom===c.C_INFINITY&&!y)return;m.minzoom>E.footprint.minzoom&&(E.footprint.minzoom=m.minzoom)}var x;if(D&&(x=this._placementEngine.getTextPlacement(m,f,S,p,q,d,F,g))){if(x.footprint.minzoom===c.C_INFINITY&&!H)return;m.minzoom>x.footprint.minzoom&&(x.footprint.minzoom=m.minzoom)}if(!H&&
!y||!y&&x&&x.footprint.minzoom!==c.C_INFINITY||!H&&E&&E.footprint.minzoom!==c.C_INFINITY)b=Math.max(E.footprint.minzoom,x.footprint.minzoom),E.footprint.minzoom=b,x.footprint.minzoom=b;x&&x.footprint.minzoom!==c.C_INFINITY&&(F.ignorePlacement||this._placementEngine.add(x),this._storePlacedGlyphs(x.shapes,x.footprint.minzoom,this.zoom,a.ddTextValues));E&&E.footprint.minzoom!==c.C_INFINITY&&(n.ignorePlacement||this._placementEngine.add(E),this._addPlacedIcons(E.shapes,E.footprint.minzoom,this.zoom,
l.page,a.ddIconValues))};b.prototype._addPlacedIcons=function(a,b,e,f,g){b=Math.max(e+c.log2(b),0);for(var d=this._iconVertexBuffer,l=this._iconIndexBuffer,p=0;p<a.length;p++){var m=a[p],n=Math.max(e+c.log2(m.minzoom),b),r=Math.min(e+c.log2(m.maxzoom),25);if(!(r<=n)){var y=m.tl,u=m.tr,F=m.bl,D=m.br,q=m.mosaicRect,A=m.labelAngle,m=m.anchor,H=d.index,x=q.x,I=q.y,J=x+q.width,q=I+q.height;d.add(m.x,m.y,y.x,y.y,x,I,A,n,r,b,g);d.add(m.x,m.y,u.x,u.y,J,I,A,n,r,b,g);d.add(m.x,m.y,F.x,F.y,x,q,A,n,r,b,g);d.add(m.x,
m.y,D.x,D.y,J,q,A,n,r,b,g);l.add(H+0,H+1,H+2);l.add(H+1,H+2,H+3);this._markerMap.has(f)?this._markerMap.get(f)[1]+=6:this._markerMap.set(f,[this._iconIndexStart+this._iconIndexCount,6]);this._iconIndexCount+=2}}};b.prototype._addPlacedGlyphs=function(){var a=this,b=this._textVertexBuffer,c=this._textIndexBuffer;this._glyphBufferDataStorage.forEach(function(e,f){for(var g=0;g<e.length;g++){var d=e[g],l=b.index;b.add(d.glyphAnchor[0],d.glyphAnchor[1],d.tl[0],d.tl[1],d.xmin,d.ymin,d.labelAngle,d.minLod,
d.maxLod,d.placementLod,d.ddValues);b.add(d.glyphAnchor[0],d.glyphAnchor[1],d.tr[0],d.tr[1],d.xmax,d.ymin,d.labelAngle,d.minLod,d.maxLod,d.placementLod,d.ddValues);b.add(d.glyphAnchor[0],d.glyphAnchor[1],d.bl[0],d.bl[1],d.xmin,d.ymax,d.labelAngle,d.minLod,d.maxLod,d.placementLod,d.ddValues);b.add(d.glyphAnchor[0],d.glyphAnchor[1],d.br[0],d.br[1],d.xmax,d.ymax,d.labelAngle,d.minLod,d.maxLod,d.placementLod,d.ddValues);c.add(l+0,l+1,l+2);c.add(l+1,l+2,l+3);a._glyphMap.has(f)?a._glyphMap.get(f)[1]+=6:
a._glyphMap.set(f,[a._textIndexStart+a._textIndexCount,6]);a._textIndexCount+=2}});this._glyphBufferDataStorage.clear()};b.prototype._storePlacedGlyphs=function(a,b,e,f){b=Math.max(e+c.log2(b),0);for(var d=0;d<a.length;d++){var g=a[d],l=Math.max(e+c.log2(g.minzoom),b),m=Math.min(e+c.log2(g.maxzoom),25);if(!(m<=l)){var p=g.tl,n=g.tr,r=g.bl,y=g.br,u=g.labelAngle,q=g.anchor,F=g.mosaicRect;this._glyphBufferDataStorage.has(g.page)||this._glyphBufferDataStorage.set(g.page,[]);this._glyphBufferDataStorage.get(g.page).push({glyphAnchor:[q.x,
q.y],tl:[p.x,p.y],tr:[n.x,n.y],bl:[r.x,r.y],br:[y.x,y.y],xmin:F.x,ymin:F.y,xmax:F.x+F.width,ymax:F.y+F.height,labelAngle:u,minLod:l,maxLod:m,placementLod:b,ddValues:f})}}};b._findAnchors=function(a,b,f){b+=f;for(var g=0,d=a.length-1,m=0;m<d;m++)g+=e.Point.distance(a[m],a[m+1]);m=.5*(f||b);if(g<=m)return[];f=m/g;b=g/Math.max(Math.round(g/b),1);for(var g=0,d=-b/2,p=[],n=a.length-1,m=0;m<n;m++){for(var r=a[m],y=a[m+1],u=y.x-r.x,q=y.y-r.y,F=Math.sqrt(u*u+q*q),D=void 0;d+b<g+F;){var d=d+b,R=(d-g)/F,K=
c.interpolate(r.x,y.x,R),R=c.interpolate(r.y,y.y,R);void 0===D&&(D=Math.atan2(q,u));p.push(new l.Anchor(K,R,D,m,f))}g+=F}return p};b.deviation=function(a,b,c){return Math.atan2((b.x-a.x)*(c.y-b.y)-(b.y-a.y)*(c.x-b.x),(b.x-a.x)*(c.x-b.x)+(b.y-a.y)*(c.y-b.y))};b._honorsTextMaxAngle=function(a,b,c,f,g){var d=0;c/=2;for(var l=new e.Point(b.x,b.y),m=b.segment+1;d>-c;){--m;if(0>m)return!1;d-=e.Point.distance(a[m],l);l=a[m]}d+=e.Point.distance(a[m],a[m+1]);b=[];for(var l=0,p=a.length;d<c;){var n=a[m],r=
void 0;do{++m;if(m===p)return!1;r=a[m]}while(r.isEqual(n));var y=m,u=void 0;do{++y;if(y===p)return!1;u=a[y]}while(u.isEqual(r));n=this.deviation(n,r,u);b.push({deviation:n,distToAnchor:d});for(l+=n;d-b[0].distToAnchor>g;)l-=b.shift().deviation;if(Math.abs(l)>f)return!1;d+=e.Point.distance(r,u)}return!0};b._smoothVertices=function(a,b){if(!(0>=b)){var c=a.length;if(!(3>c)){var f=[],g=0;f.push(0);for(var d=1;d<c;d++)g+=e.Point.distance(a[d],a[d-1]),f.push(g);b=Math.min(b,.2*g);g=[];g.push(a[0].x);g.push(a[0].y);
var l=a[c-1].x,m=a[c-1].y,d=e.Point.sub(a[0],a[1]);d.normalize();a[0].x+=b*d.x;a[0].y+=b*d.y;d.assignSub(a[c-1],a[c-2]);d.normalize();a[c-1].x+=b*d.x;a[c-1].y+=b*d.y;for(d=1;d<c;d++)f[d]+=b;f[c-1]+=b;for(var p=.5*b,d=1;d<c-1;d++){for(var n=0,r=0,y=0,u=d-1;0<=u&&!(f[u+1]<f[d]-p);u--){var q=p+f[u+1]-f[d],F=f[u+1]-f[u],K=f[d]-f[u]<p?1:q/F;if(1E-6>Math.abs(K))break;var S=K*K,E=K*q-.5*S*F,x=K*F/b,I=a[u+1],J=a[u].x-I.x,U=a[u].y-I.y,n=n+x/E*(I.x*K*q+.5*S*(q*J-F*I.x)-S*K*F*J/3),r=r+x/E*(I.y*K*q+.5*S*(q*U-
F*I.y)-S*K*F*U/3),y=y+x}for(u=d+1;u<c&&!(f[u-1]>f[d]+p);u++){q=p-f[u-1]+f[d];F=f[u]-f[u-1];K=f[u]-f[d]<p?1:q/F;if(1E-6>Math.abs(K))break;S=K*K;E=K*q-.5*S*F;x=K*F/b;I=a[u-1];J=a[u].x-I.x;U=a[u].y-I.y;n+=x/E*(I.x*K*q+.5*S*(q*J-F*I.x)-S*K*F*J/3);r+=x/E*(I.y*K*q+.5*S*(q*U-F*I.y)-S*K*F*U/3);y+=x}g.push(n/y);g.push(r/y)}g.push(l);g.push(m);for(u=d=0;d<c;d++)a[d].x=g[u++],a[d].y=g[u++]}}};b._bidiEngine=new f;return b}(b)})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare",
"dojo/Stateful"],function(q,a,d){function n(a,c,d,g,h){var k=a;void 0===c&&(c=h.defInFormat);void 0===d&&(d=h.defOutFormat);void 0===g&&(g=h.defSwap);if(c!==d){var l,m=c.substring(0,1);l=c.substring(1,4);var p=d.substring(0,1),r=d.substring(1,4);"C"===l.charAt(0)&&(l=f(k),l="ltr"===l||"rtl"===l?l.toUpperCase():"L"===c.charAt(2)?"LTR":"RTL",c=m+l);"C"===r.charAt(0)&&(l=f(k),"rtl"===l?r="RTL":"ltr"===l?(k=k.split(""),k.reverse(),l=f(k.join("")),r=l.toUpperCase()):r="L"===d.charAt(2)?"LTR":"RTL",d=p+
r)}if(c===d)return a;p=c.substring(0,1);k=c.substring(1,4);m=d.substring(0,1);r=d.substring(1,4);h.inFormat=c;h.outFormat=d;h.swap=g;if("L"===p&&"VLTR"===d){if("LTR"===k)return h.dir=C,e(a,h);if("RTL"===k)return h.dir=G,e(a,h)}if("V"===p&&"V"===m)return h.dir="RTL"===k?G:C,b(a,h);if("L"===p&&"VRTL"===d)return h.dir="LTR"===k?C:G,a=e(a,h),b(a);if("VLTR"===c&&"LLTR"===d)return h.dir=C,e(a,h);if("V"===p&&"L"===m&&k!==r)return a=b(a),"RTL"===k?n(a,"LLTR","VLTR",g,h):n(a,"LRTL","VRTL",g,h);if("VRTL"===
c&&"LRTL"===d)return n(a,"LRTL","VRTL",g,h);if("L"===p&&"L"===m)return c=h.swap,h.swap=c.substr(0,1)+"N","RTL"===k?(h.dir=G,a=e(a,h),h.swap="N"+c.substr(1,2),h.dir=C,a=e(a,h)):(h.dir=C,a=e(a,h),h.swap="N"+c.substr(1,2),a=n(a,"VLTR","LRTL",h.swap,h)),a}function f(a){return(a=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(a))?"z">=a[0]?"ltr":"rtl":""}function e(a,b){a=a.split("");var c=[];m(a,c,b);if(0!==b.hiLevel&&b.swap.substr(0,1)!==b.swap.substr(1,2))for(var e=
0;e<a.length;e++)if(1===c[e]){var d=e,f;b:{f=a[e];for(var h=void 0,k=0,l=M.length-1;k<=l;)if(h=Math.floor((k+l)/2),f<M[h][0])l=h-1;else if(f>M[h][0])k=h+1;else{f=M[h][1];break b}}a[d]=f}g(2,a,c,b);g(1,a,c,b);B=c;return a.join("")}function m(a,b,c){var e=a.length,f=c.dir?fa:da,d=null,g=null,h=null,d=0,g=g=null,k=-1,l=g=null,m=[],p=[];c.hiLevel=c.dir;c.lastArabic=!1;c.hasUbatAl=!1;c.hasUbatB=!1;c.hasUbatS=!1;for(g=0;g<e;g++){var l=g,h=a[g].charCodeAt(0),n=qa[h>>8];m[l]=n<Z?n:ra[n-Z][h&255]}for(l=0;l<
e;l++){p[l]=g=r(a,m,p,l,c);d=f[d][g];g=d&240;d&=15;b[l]=h=f[d][v];if(0<g){if(16===g)for(g=k;g<l;g++)b[g]=1;k=-1}if(g=f[d][w])-1===k&&(k=l);else if(-1<k){for(g=k;g<l;g++)b[g]=h;k=-1}m[l]===Y&&(b[l]=0);c.hiLevel|=h}if(c.hasUbatS)for(a=0;a<e;a++)if(m[a]===ka)for(b[a]=c.dir,f=a-1;0<=f;f--)if(m[f]===ma)b[f]=c.dir;else break}function b(a,b){a=a.split("");if(b){var c=[];m(a,c,b);B=c}a.reverse();H.reverse();return a.join("")}function c(a){for(var b=0;b<V.length;b++)if(a>=V[b]&&a<=ca[b])return!0;return!1}
function l(a,b,e,f){for(;b*e<f&&u(a[b]);)b+=e;return b*e<f&&c(a[b])?!0:!1}function g(a,b,c,e){if(!(e.hiLevel<a))if(1!==a||e.dir!==G||e.hasUbatB){e=b.length;for(var f=0,d,g,h;f<e;){if(c[f]>=a){for(d=f+1;d<e&&c[d]>=a;)d++;for(g=d-1;f<g;f++,g--)h=b[f],b[f]=b[g],b[g]=h,h=H[f],H[f]=H[g],H[g]=h;f=d}f++}}else b.reverse(),H.reverse()}function r(a,b,c,e,f){return{UBAT_L:function(){f.lastArabic=!1;return ga},UBAT_R:function(){f.lastArabic=!1;return ea},UBAT_ON:function(){return X},UBAT_AN:function(){return ha},
UBAT_EN:function(){return f.lastArabic?ha:ba},UBAT_AL:function(){f.lastArabic=!0;f.hasUbatAl=!0;return ea},UBAT_WS:function(){return X},UBAT_CS:function(){var a,d;if(1>e||e+1>=b.length||(a=c[e-1])!==ba&&a!==ha||(d=b[e+1])!==ba&&d!==ha)return X;f.lastArabic&&(d=ha);return d===a?d:X},UBAT_ES:function(){return(0<e?c[e-1]:Y)===ba&&e+1<b.length&&b[e+1]===ba?ba:X},UBAT_ET:function(){if(0<e&&c[e-1]===ba)return ba;if(f.lastArabic)return X;for(var a=e+1,d=b.length;a<d&&b[a]===na;)a++;return a<d&&b[a]===ba?
ba:X},UBAT_NSM:function(){if("VLTR"===f.inFormat){for(var d=b.length,g=e+1;g<d&&b[g]===ja;)g++;if(g<d&&(d=a[e],g=b[g],(1425<=d&&2303>=d||64286===d)&&(g===ea||g===la)))return ea}return 1>e||b[e-1]===Y?X:c[e-1]},UBAT_B:function(){f.lastArabic=!0;f.hasUbatB=!0;return f.dir},UBAT_S:function(){f.hasUbatS=!0;return X},UBAT_LRE:function(){f.lastArabic=!1;return X},UBAT_RLE:function(){f.lastArabic=!1;return X},UBAT_LRO:function(){f.lastArabic=!1;return X},UBAT_RLO:function(){f.lastArabic=!1;return X},UBAT_PDF:function(){f.lastArabic=
!1;return X},UBAT_BN:function(){return X}}[oa[b[e]]]()}function y(a,b){for(var c=0;c<E.length;c++)if(a===E[c])return b[c];return a}function u(a){return"\u064b"<=a&&"\u0655">=a?!0:!1}function F(a){if("L"===a)return"LTR";if("R"===a)return"RTL";if("C"===a)return"CLR";if("D"===a)return"CRL"}function p(a,b){for(var c=0;c<R.length;c++)if(a===R[c])return b[c];return a}function D(a,b,c,e){for(var f=0;f<a.length;f++)if(a[f]>b||!c&&a[f]===b)a[f]+=e}q.getObject("string",!0,dojox);q=a("dojox.string.BidiEngine",
d,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(a,b,e){this.sourceToTarget=[];this.targetToSource=[];if(!a)return"";var f=this.sourceToTarget,d=this.targetToSource,g=a.length;H=[];B=[];for(var h=0;h<g;h++)f[h]=h,d[h]=h,H[h]=h;if(!this.checkParameters(b,e))return a;b=this.inputFormat;e=this.outputFormat;var f=a,f=z,h=F(b.charAt(1)),d=F(e.charAt(1)),k="I"===b.charAt(0)?"L":b.charAt(0),g="I"===e.charAt(0)?"L":e.charAt(0),h=k+h,d=g+d,g=
b.charAt(2)+e.charAt(2);f.defInFormat=h;f.defOutFormat=d;f.defSwap=g;a=n(a,h,d,g,f);f=!1;if("R"===e.charAt(1))f=!0;else if("C"===e.charAt(1)||"D"===e.charAt(1))f=this.checkContextual(a);d=this.sourceToTarget=H;g=Array(d.length);for(h=0;h<d.length;h++)g[d[h]]=h;A=this.targetToSource=g;if(b.charAt(3)===e.charAt(3))f=a;else if("S"===e.charAt(3))if(b=f,e=!0,0===a.length)f=void 0;else{void 0===b&&(b=!0);void 0===e&&(e=!0);a=String(a);a=a.split("");var m=0,d=1,f=a.length;b||(m=a.length-1,d=-1,f=1);for(var g=
f,h=e,r=0,f=[],k=0;m*d<g;m+=d)if(c(a[m])||u(a[m])){var q;if(q="\u0644"===a[m])b:{for(var t=a,v=m+d,w=d,C=g;v*w<C&&u(t[v]);)v+=w;q=" ";if(v*w<C)for(q=t[v],t=0;t<R.length;t++)if(R[t]===q){q=!0;break b}q=!1}if(q){a[m]=0===r?p(a[m+d],K):p(a[m+d],S);m+=d;r=a;q=m;t=d;for(v=g;q*t<v&&u(r[q]);)q+=t;q*t<v&&(r[q]=" ");h&&(f[k]=m,k++);r=0}else{q=a[m];if(1===r){t=m;if(l(a,m+d,d,g))b:for(v=a[m],w=0;w<E.length;w++){if(v===E[w]){v=J[w];break b}}else v=y(a[m],I);a[t]=v}else!0===l(a,m+d,d,g)?a[m]=y(a[m],U):a[m]=y(a[m],
x);u(q)||(r=1);b:{for(t=0;t<L.length;t++)if(L[t]===q){q=!0;break b}q=!1}!0===q&&(r=0)}}else r=0;d="";for(g=0;g<a.length;g++){if(h=e){b:{for(h=0;h<f.length;h++)if(f[h]===g)break b;h=-1}h=-1<h}h?(D(A,g,!b,-1),H.splice(g,1)):d+=a[g]}f=d}else if(b=a,e=f,a=!0,0===b.length)f=void 0;else for(void 0===a&&(a=!0),void 0===e&&(e=!0),b=String(b),f="",d=[],d=b.split(""),g=0;g<b.length;g++)h=!1,"\ufe70"<=d[g]&&"\ufeff">d[g]?(k=b.charCodeAt(g),"\ufef5"<=d[g]&&"\ufefc">=d[g]?(e?(0<g&&a&&" "===d[g-1]?f=f.substring(0,
f.length-1)+"\u0644":(f+="\u0644",h=!0),f+=R[(k-65269)/2]):(f+=R[(k-65269)/2],f+="\u0644",g+1<b.length&&a&&" "===d[g+1]?g++:h=!0),h&&(D(A,g,!0,1),H.splice(g,0,H[g]))):f+=T[k-65136]):f+=d[g];this.sourceToTarget=H;this.targetToSource=A;this.levels=B;return f},_inputFormatSetter:function(a){if(!P.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=a},_outputFormatSetter:function(a){if(!P.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");
this.outputFormat=a},checkParameters:function(a,b){a?this.set("inputFormat",a):a=this.inputFormat;b?this.set("outputFormat",b):b=this.outputFormat;return a===b?!1:!0},checkContextual:function(a){a=f(a);if("ltr"!==a&&"rtl"!==a){try{a=document.dir.toLowerCase()}catch(sa){}"ltr"!==a&&"rtl"!==a&&(a="ltr")}return a},hasBidiChar:function(a){return Q.test(a)}});var H=[],A=[],B=[],z={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,
hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},v=5,w=6,C=0,G=1,P=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,Q=/[\u0591-\u06ff\ufb1d-\ufefc]/,M=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],
["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],R=["\u0622","\u0623","\u0625","\u0627"],K=["\ufef5","\ufef7","\ufef9","\ufefb"],S=["\ufef6","\ufef8","\ufefa","\ufefc"],E="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),
x="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),I="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),
J="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),U="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),
L="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),T="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
V=["\u0621","\u0641"],ca=["\u063a","\u064a"],da=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],fa=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],ga=0,ea=1,ba=2,ha=3,X=4,Y=5,ka=6,la=7,ma=8,na=11,ja=12,oa="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),Z=100;a=ga;d=ea;var N=ba,W=ha,h=X,ia=Y,pa=ka,k=la,aa=ma,O=
na,t=ja,qa=[Z+0,a,a,a,a,Z+1,Z+2,Z+3,d,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,Z+4,h,h,h,a,h,a,h,a,h,h,h,a,a,h,h,a,a,a,a,a,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,a,a,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,a,a,h,h,a,a,h,h,a,a,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,
h,h,h,h,h,h,h,h,a,a,a,Z+5,k,k,Z+6,Z+7],ra=[[18,18,18,18,18,18,18,18,18,pa,ia,pa,aa,ia,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ia,ia,ia,pa,aa,h,h,O,O,O,h,h,h,h,h,10,9,10,9,9,N,N,N,N,N,N,N,N,N,N,9,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,18,18,18,18,18,18,ia,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,h,O,O,O,O,h,h,h,h,a,h,h,18,h,h,O,O,N,N,h,a,h,h,h,N,a,h,h,h,h,h,a,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,a,a,a,a,a,a,a,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,a,h,h,h,h,h,h,h,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,
t,t,d,t,d,t,t,d,t,t,d,t,h,h,h,h,h,h,h,h,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,h,h,h,h,h,d,d,d,d,d,h,h,h,h,h,h,h,h,h,h,h],[W,W,W,W,h,h,h,h,k,O,O,k,9,k,h,h,t,t,t,t,t,t,t,t,t,t,t,k,h,h,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,W,W,W,W,W,W,W,W,W,W,O,W,W,k,k,k,t,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,
k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,t,t,t,t,t,t,t,W,h,t,t,t,t,t,t,k,k,t,t,h,t,t,t,t,k,k,N,N,N,N,N,N,N,N,N,N,k,k,k,k,k,k],[k,k,k,k,k,k,k,k,k,k,k,k,k,k,h,k,k,t,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,h,h,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,t,t,t,t,t,t,t,t,t,t,
t,k,h,h,h,h,h,h,h,h,h,h,h,h,h,h,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,d,t,t,t,t,t,t,t,t,t,d,d,h,h,h,h,d,h,h,h,h,h],[aa,aa,aa,aa,aa,aa,aa,aa,aa,aa,aa,18,18,18,a,d,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,aa,ia,13,14,15,16,17,9,O,O,O,O,O,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,9,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,aa,18,18,18,18,18,h,h,h,h,h,18,18,18,18,18,18,N,a,h,h,N,N,N,N,N,N,10,10,h,h,h,a,N,N,N,N,N,N,N,N,N,N,10,10,h,h,h,h,a,a,a,a,a,a,a,
a,a,a,a,a,a,h,h,h,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h],[a,a,a,a,a,a,a,h,h,h,h,h,h,h,h,h,h,h,h,a,a,a,a,a,h,h,h,h,h,d,t,d,d,d,d,d,d,d,d,d,d,10,d,d,d,d,d,d,d,d,d,d,d,d,d,h,d,d,d,d,d,h,d,h,d,d,h,d,d,h,d,d,d,d,d,d,d,d,d,d,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,
k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k],[t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,t,t,t,t,t,t,t,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,9,h,9,h,h,9,h,h,h,h,h,h,h,h,h,O,h,h,10,10,h,h,h,h,h,O,O,h,h,h,h,h,k,k,k,k,k,h,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,
k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,k,h,h,18],[h,h,h,O,O,O,h,h,h,h,h,10,9,10,9,9,N,N,N,N,N,N,N,N,N,N,9,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,a,a,a,a,a,a,h,h,a,a,a,a,a,a,h,h,a,a,a,a,a,a,h,h,a,a,a,h,h,h,O,O,h,h,h,O,O,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h]];return q})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(q,a,d,n){return q("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var f=this._attrPairNames;return f[a]?f[a]:f[a]=
{s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,e){return"function"===typeof this[e.g]?this[e.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(a,e){if("object"===typeof a){for(var d in a)a.hasOwnProperty(d)&&"_watchCallbacks"!=d&&this.set(d,a[d]);return this}d=this._getAttrNames(a);var b=this._get(a,d);d=this[d.s];var c;"function"===typeof d?c=d.apply(this,Array.prototype.slice.call(arguments,1)):this[a]=e;if(this._watchCallbacks){var f=
this;n(c,function(){f._watchCallbacks(a,b,e)})}return this},_changeAttrValue:function(a,d){var e=this.get(a);this[a]=d;this._watchCallbacks&&this._watchCallbacks(a,e,d);return this},watch:function(a,e){var f=this._watchCallbacks;if(!f)var b=this,f=this._watchCallbacks=function(a,c,d,e){var g=function(e){if(e){e=e.slice();for(var f=0,g=e.length;f<g;f++)e[f].call(b,a,c,d)}};g(f["_"+a]);e||g(f["*"])};e||"function"!==typeof a?a="_"+a:(e=a,a="*");var c=f[a];"object"!==typeof c&&(c=f[a]=[]);c.push(e);a=
{};a.unwatch=a.remove=function(){var a=d.indexOf(c,e);-1<a&&c.splice(a,1)};return a}})})},"esri/views/2d/engine/webgl/TextShaping":function(){define(["require","exports","../../../../core/SetPool"],function(q,a,d){return function(){function a(a,d,m,b,c,l,g,n){this._glyphItems=a;this._maxWidth=d;this._lineHeight=m;this._letterSpacing=b;this._offset=c;this._hAnchor=l;this._vAnchor=g;this._justify=n}a.prototype.getShaping=function(a,e){for(var f=this._letterSpacing,b=this._offset[0],c=this._offset[1],
l=[],g=d.acquire(),n=a.length,y=0;y<n;y++){var u=a.charCodeAt(y);if(10===u)g.add(l.length);else{for(var q=void 0,p=0,D=this._glyphItems;p<D.length&&!(q=D[p][u]);p++);q&&(l.push({codePoint:u,x:b,y:c,glyphMosaicItem:q}),b+=q.metrics.advance+f)}}if(0<l.length){q=this._maxWidth;a=this._lineHeight;b=this._justify;c=l.length;u=n=f=0;if(0!==q||0<g.size)for(var H=0,y=p=0;y<c;y++){D=l[y];D.x-=p;D.y=e?D.y-a*f:D.y+a*f;var A=g.has(y);if(q&&D.x>q&&0<H||A){for(var B=A?y:H+1,z=l[B].x,u=Math.max(z,u),v=B;v<=y;v++)l[v].y=
e?l[v].y-a:l[v].y+a,l[v].x-=z;b&&(H=A?y-1:H-1,0<=H&&this._applyJustification(l,n,H));n=B;H=0;p+=z;f++}32===D.codePoint&&(H=y)}y=l[c-1];u=Math.max(u,y.x+y.glyphMosaicItem.metrics.advance);b&&this._applyJustification(l,n,c-1);y=(b-this._hAnchor)*u;b=(-this._vAnchor*(f+1)+.5)*a;e&&f&&(b+=f*a);for(e=0;e<l.length;e++)a=l[e],a.x+=y,a.y+=b}d.release(g);return l};a.getBox=function(a,d){var e=a.length;if(0!==e){for(var b=a[0].x,c=b,f=a[0].y,g=f,n=f,q=1;q<e;q++){var u=a[q],F=u.x;F<b&&(b=F);F>c&&(c=F);u=u.y;
u<f&&(f=u);u>g&&(g=u);u!==n&&(n=this._glyphWidth(a[q-1].codePoint,d),c=Math.max(c,a[q-1].x+n),n=u)}d=this._glyphWidth(a[e-1].codePoint,d);c=Math.max(c,a[e-1].x+d);f+=17;return{x:b,y:f,width:c-b,height:g+7-f}}};a.prototype._applyJustification=function(a,d,m){for(var b=a[m],b=(b.x+b.glyphMosaicItem.metrics.advance)*this._justify;d<=m;d++)a[d].x-=b};a._glyphWidth=function(a,d){for(var e,b=0;b<d.length&&!(e=d[b][a]);b++);return e?e.metrics.advance:0};return a}()})},"esri/core/SetPool":function(){define(["require",
"exports","./ObjectPool"],function(q,a,d){q=function(){function a(a,f){void 0===a&&(a=50);void 0===f&&(f=50);this._pool=new d(Set,!1,function(a){return a.clear()},f,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.release=function(a){this._pool.release(a)};a.acquire=function(){return n.acquire()};a.release=function(a){return n.release(a)};return a}();var n=new q(100);return q})},"esri/views/vectorTiles/TileParser":function(){define("require exports dojo/promise/all ../../core/executeAsync ../../core/pbf ../../core/promiseUtils ../2d/engine/webgl/TileClipper ./BackgroundBucket ./CircleBucket ./Feature ./FillBucket ./LineBucket ./SourceLayerData ./SymbolBucket".split(" "),
function(q,a,d,n,f,e,m,b,c,l,g,r,y,u){return function(){function a(a,b,c){this._pbfTile=new f(new Uint8Array(a),new DataView(a));this._tile=b;this._connection=c;this._layers=b.getLayers();c=b.tileKey.split("/").map(parseFloat);var d=c[0];a=c[1];c=c[2];this._level=d;b.refKey&&(b=b.refKey.split("/").map(parseFloat)[0],b=d-b,0<b&&(d=(1<<b)-1,this._tileClipper=new m.TileClipper(b,a&d,c&d)));this._tileClipper||(this._tileClipper=new m.SimpleBuilder)}a.prototype.parse=function(){for(var a=this,b=this._parseTileData(this._pbfTile),
c=this._layers,g=c.length,f=this._level,m,r=[],u={},q=new Set,g=g-1;0<=g;g--)if(m=c[g],!(m.minzoom&&f<m.minzoom||m.maxzoom&&f>=m.maxzoom||m.layout&&"none"===m.layout.visibility))if(0===m.type)m=this._createBucket(m),m.layerIndex=g,r.push(m);else{var y=m.sourceLayer,F=b[y];F&&(q.add(y),m=this._createBucket(m))&&(m.layerIndex=g,m.layerExtent=F.extent,(F=u[y])||(F=u[y]=[]),F.push(m))}var Q=10*this._level,M=10*(this._level+1),R=[],K=[],S=[],E=[],x=this._tileClipper,I=new Set,J={},U=[];q.forEach(function(a){return U.push(a)});
var L=0,T=0,V=U.length;return n(function(){if(6===a._tile.status)return!0;switch(L){case 0:if(T<V){var c=U[T++],d=b[c],e=u[c];if(e&&0!==e.length)for(c=d.getData();c.next(2);){var g=new l(c.getMessage(),d),f=g.values;if(f){var m=f._minzoom;if(m&&m>=M)continue;if((f=f._maxzoom)&&f<=Q)continue}for(var m=0,n=e;m<n.length;m++)f=n[m],f.pushFeature(g)}}else{d=a._tile;for(c in u)for(e=u[c],g=0;g<e.length;g++)f=e[g],f.hasFeatures()&&(3===f.layer.type?(R.push(f),d.addBucket(f)):f.layer.refLayerId?S.push(f):
(K.push(f),E[f.layer.id]=f));L=1;T=0;V=R.length}break;case 1:T<V?R[T++].getResources(x,I,J):L=2}return 2===L}).then(function(){if(6===a._tile.status)return[];var b=[],c=a._tile.getWorkerTileHandler(),g;0<I.size&&(g=c.fetchSprites(I,a._connection),b.push(g));for(var f in J)g=J[f],0<g.size&&(g=c.fetchGlyphs(a._tile.tileKey,f,g,a._connection),b.push(g));return d(b).then(function(b){if(6===a._tile.status)return[];var c=0,d=0,g=K.length;return n(function(){if(6===a._tile.status)return!0;switch(c){case 0:if(d<
g){var b=K[d++];b.processFeatures(x,a._tile);r.push(b)}else c=1,d=0,g=S.length;break;case 1:for(var e=0;e<S.length;e++){var b=S[e],f=E[b.layer.refLayerId];f&&(f.assignBufferInfo(b),r.push(b))}c=2;d=0;g=R.length;break;case 2:d<g?(b=R[d++],b.processFeatures(x,a._tile),r.push(b)):c=3}return 3===c}).then(function(){r.sort(function(a,b){return a.layerIndex-b.layerIndex});return r})}).catch(function(a){return e.reject(Error(a))})}).catch(function(a){return e.reject(Error(a))})};a.prototype._parseTileData=
function(a){for(var b={};a.next();)switch(a.tag()){case 3:var c=new y(a.getMessage());b[c.name]=c;break;default:a.skip()}return b};a.prototype._createBucket=function(a){switch(a.type){case 0:return this._createBackgroundBucket(a);case 1:return this._createFillBucket(a);case 2:return this._createLineBucket(a);case 4:return this._createCircleBucket(a);case 3:return this._createSymbolBucket(a)}};a.prototype._createBackgroundBucket=function(a){return new b(a,this._level)};a.prototype._createFillBucket=
function(a){var b=this._tile;return new g(a,this._level,a.hasDataDrivenFill?b.fillDDVertexBuffer:b.fillVertexBuffer,b.fillIndexBuffer,a.hasDataDrivenOutline?b.outlineDDVertexBuffer:b.outlineVertexBuffer,b.outlineIndexBuffer)};a.prototype._createLineBucket=function(a){var b=this._tile;return new r(a,this._level,a.hasDataDrivenLine?b.lineDDVertexBuffer:b.lineVertexBuffer,b.lineIndexBuffer)};a.prototype._createCircleBucket=function(a){var b=this._tile;return new c(a,this._level,b.circleVertexBuffer,
b.circleIndexBuffer)};a.prototype._createSymbolBucket=function(a){var b=this._tile;return new u(a,this._level,a.hasDataDrivenIcon?b.iconDDVertexBuffer:b.iconVertexBuffer,b.iconIndexBuffer,a.hasDataDrivenText?b.textDDVertexBuffer:b.textVertexBuffer,b.textIndexBuffer,b.placementEngine,b.getWorkerTileHandler())};return a}()})},"esri/core/pbf":function(){define(["require","exports"],function(q,a){return function(){function a(a,d,e,m){this._tag=0;this._dataType=99;this._data=a;this._dataView=d;this._pos=
e||0;this._end=m||a.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var d=this._decodeVarint();this._tag=d>>3;this._dataType=d&7;if(!a||a===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};
a.prototype.getUInt32=function(){var a=4294967295,a=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<7)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<21)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&15)<<28)>>>0;if(128>this._data[this._pos++])return a};a.prototype.getUInt64=function(){return this._decodeVarint()};
a.prototype.getSInt32=function(){var a=this.getUInt32();return a>>>1^-(a&1)|0};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var a=0!==this._data[this._pos];this._skip(1);return a};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var a=this._dataView,d=this._pos,a=a.getUint32(d,!0)+4294967296*a.getUint32(d+4,!0);this._skip(8);return a};a.prototype.getSFixed64=function(){var a=this._dataView,d=this._pos,a=
a.getUint32(d,!0)+4294967296*a.getInt32(d+4,!0);this._skip(8);return a};a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);this._skip(8);return a};a.prototype.getFixed32=function(){var a=this._dataView.getUint32(this._pos,!0);this._skip(4);return a};a.prototype.getSFixed32=function(){var a=this._dataView.getInt32(this._pos,!0);this._skip(4);return a};a.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,!0);this._skip(4);return a};a.prototype.getString=
function(){var a=this._getLength(),d=this._pos,d=this._toString(this._data,d,d+a);this._skip(a);return d};a.prototype.getBytes=function(){var a=this._getLength(),d=this._pos,d=this._toBytes(this._data,d,d+a);this._skip(a);return d};a.prototype.getMessage=function(){var d=this._getLength(),f=this._pos,f=new a(this._data,this._dataView,f,f+d);this._skip(d);return f};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());
break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=a};a.prototype._decodeVarint=function(){var a=this._data,d=this._pos,e=0,m;if(10<=this._end-d){if(m=a[d++],e|=m&127,0!==(m&128)&&(m=a[d++],e|=(m&127)<<7,0!==(m&128)&&(m=a[d++],e|=(m&127)<<14,0!==(m&128)&&(m=a[d++],e|=(m&127)<<21,0!==(m&128)&&(m=a[d++],e+=268435456*(m&127),0!==(m&128)&&(m=a[d++],e+=34359738368*
(m&127),0!==(m&128)&&(m=a[d++],e+=4398046511104*(m&127),0!==(m&128)&&(m=a[d++],e+=562949953421312*(m&127),0!==(m&128)&&(m=a[d++],e+=72057594037927936*(m&127),0!==(m&128)&&(m=a[d++],e+=0x7fffffffffffffff*(m&127),0!==(m&128)))))))))))throw Error("Varint too long!");}else{for(var b=1;d!==this._end;){m=a[d];if(0===(m&128))break;++d;e+=(m&127)*b;b*=128}if(d===this._end)throw Error("Varint overrun!");++d;e+=m*b}this._pos=d;return e};a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%
2?-(a+1)/2:a/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(a,d,e){var f="",b="";for(e=Math.min(this._end,e);d<e;++d){var c=a[d];c&128?b+="%"+c.toString(16):(f+=decodeURIComponent(b)+String.fromCharCode(c),b="")}b.length&&(f+=decodeURIComponent(b));return f};a.prototype._toBytes=function(a,d,e){e=Math.min(this._end,e);return new Uint8Array(a.buffer,d,e-d)};return a}()})},"esri/views/2d/engine/webgl/TileClipper":function(){define(["require",
"exports","./Geometry","./GeometryUtils"],function(q,a,d,n){Object.defineProperty(a,"__esModule",{value:!0});var f=function(){return function(a,b,c){this.ratio=a;this.x=b;this.y=c}}();q=function(){function a(a,c,d,g,e){void 0===g&&(g=8);void 0===e&&(e=8);this.lines=[];this.starts=[];this.pixelRatio=g;this.pixelMargin=e;this.tileSize=512*g;this.dz=a;this.yPos=c;this.xPos=d}a.prototype.setExtent=function(a){this.finalRatio=this.tileSize/a*(1<<this.dz);var b=this.pixelRatio*this.pixelMargin,b=b/this.finalRatio;
a>>=this.dz;b>a&&(b=a);this.margin=b;this.xmin=a*this.xPos-b;this.ymin=a*this.yPos-b;this.xmax=this.xmin+a+2*b;this.ymax=this.ymin+a+2*b};a.prototype.reset=function(a){this.type=a;this.lines=[];this.starts=[];this.line=null;this.start=0};a.prototype.moveTo=function(a,c){this._pushLine();this._prevIsIn=this._isIn(a,c);this._moveTo(a,c,this._prevIsIn);this._prevPt=new d.Point(a,c);this._firstPt=new d.Point(a,c);this._dist=0};a.prototype.lineTo=function(a,c){var b=this._isIn(a,c),g=new d.Point(a,c),
e=d.Point.distance(this._prevPt,g),m,n,q;if(b)this._prevIsIn?this._lineTo(a,c,!0):(m=this._prevPt,n=g,a=this._intersect(n,m),this.start=this._dist+e*(1-this._r),this._lineTo(a.x,a.y,!0),this._lineTo(n.x,n.y,!0));else if(this._prevIsIn)n=this._prevPt,m=g,a=this._intersect(n,m),this._lineTo(a.x,a.y,!0),this._lineTo(m.x,m.y,!1);else{var p=this._prevPt;if(!(p.x<=this.xmin&&g.x<=this.xmin||p.x>=this.xmax&&g.x>=this.xmax||p.y<=this.ymin&&g.y<=this.ymin||p.y>=this.ymax&&g.y>=this.ymax)){a=[];if(p.x<this.xmin&&
g.x>this.xmin||p.x>this.xmin&&g.x<this.xmin)c=(this.xmin-p.x)/(g.x-p.x),q=p.y+c*(g.y-p.y),q<=this.ymin?n=!1:q>=this.ymax?n=!0:a.push(new f(c,this.xmin,q));if(p.x<this.xmax&&g.x>this.xmax||p.x>this.xmax&&g.x<this.xmax)c=(this.xmax-p.x)/(g.x-p.x),q=p.y+c*(g.y-p.y),q<=this.ymin?n=!1:q>=this.ymax?n=!0:a.push(new f(c,this.xmax,q));if(p.y<this.ymin&&g.y>this.ymin||p.y>this.ymin&&g.y<this.ymin)c=(this.ymin-p.y)/(g.y-p.y),q=p.x+c*(g.x-p.x),q<=this.xmin?m=!1:q>=this.xmax?m=!0:a.push(new f(c,q,this.ymin));
if(p.y<this.ymax&&g.y>this.ymax||p.y>this.ymax&&g.y<this.ymax)c=(this.ymax-p.y)/(g.y-p.y),q=p.x+c*(g.x-p.x),q<=this.xmin?m=!1:q>=this.xmax?m=!0:a.push(new f(c,q,this.ymax));if(0===a.length)m?n?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):n?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<a.length&&a[0].ratio>a[1].ratio)this.start=this._dist+e*a[1].ratio,this._lineTo(a[1].x,a[1].y,!0),this._lineTo(a[0].x,a[0].y,!0);else for(this.start=
this._dist+e*a[0].ratio,m=0;m<a.length;m++)this._lineTo(a[m].x,a[m].y,!0)}this._lineTo(g.x,g.y,!1)}this._dist+=e;this._prevIsIn=b;this._prevPt=g};a.prototype.close=function(){var a,c;0<this.line.length&&(a=this._firstPt,c=this._prevPt,a.x===c.x&&a.y===c.y||this.lineTo(a.x,a.y),a=this.line,c=a.length,4<=c&&(a[0].x===a[1].x&&a[0].x===a[c-2].x||a[0].y===a[1].y&&a[0].y===a[c-2].y)&&(a.pop(),a[0].x=a[c-2].x,a[0].y=a[c-2].y))};a.prototype.result=function(a){void 0===a&&(a=!0);this._pushLine();if(0===this.lines.length)return null;
3===this.type&&a&&e.simplify(this.tileSize,this.margin*this.finalRatio,this.lines);return this.lines};a.prototype.resultWithStarts=function(){if(2!==this.type)throw Error("Only valid for lines");this._pushLine();var a=this.lines,c=a.length;if(0===c)return null;for(var d=[],e=0;e<c;e++)d.push({line:a[e],start:this.starts[e]||0});return d};a.prototype._isIn=function(a,c){return a>=this.xmin&&a<=this.xmax&&c>=this.ymin&&c<=this.ymax};a.prototype._intersect=function(a,c){var b,e,f;if(c.x>=this.xmin&&
c.x<=this.xmax)e=c.y<=this.ymin?this.ymin:this.ymax,f=(e-a.y)/(c.y-a.y),b=a.x+f*(c.x-a.x);else if(c.y>=this.ymin&&c.y<=this.ymax)b=c.x<=this.xmin?this.xmin:this.xmax,f=(b-a.x)/(c.x-a.x),e=a.y+f*(c.y-a.y);else{e=c.y<=this.ymin?this.ymin:this.ymax;b=c.x<=this.xmin?this.xmin:this.xmax;var m=(b-a.x)/(c.x-a.x),n=(e-a.y)/(c.y-a.y);m<n?(f=m,e=a.y+m*(c.y-a.y)):(f=n,b=a.x+n*(c.x-a.x))}this._r=f;return new d.Point(b,e)};a.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&(this.lines.push(this.line),
this.starts.push(this.start)):2===this.type?1<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&3<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)));this.line=[];this.start=0};a.prototype._moveTo=function(a,c,e){3!==this.type?e&&(a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line.push(new d.Point(a,c))):(e||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),
c<this.ymin&&(c=this.ymin),c>this.ymax&&(c=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line.push(new d.Point(a,c)),this._is_v=this._is_h=!1)};a.prototype._lineTo=function(a,c,e){if(3!==this.type)if(e){a=Math.round((a-(this.xmin+this.margin))*this.finalRatio);c=Math.round((c-(this.ymin+this.margin))*this.finalRatio);if(0<this.line.length&&(e=this.line[this.line.length-1],e.equals(a,c)))return;this.line.push(new d.Point(a,
c))}else this.line&&0<this.line.length&&this._pushLine();else if(e||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),c<this.ymin&&(c=this.ymin),c>this.ymax&&(c=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){e=this.line[this.line.length-1];var b=e.x===a,f=e.y===c;b&&f||(this._is_h&&b?(e.x=a,e.y=c,e=this.line[this.line.length-2],this._is_h=e.x===a,this._is_v=e.y===c):this._is_v&&f?(e.x=
a,e.y=c,e=this.line[this.line.length-2],this._is_h=e.x===a,this._is_v=e.y===c):(this.line.push(new d.Point(a,c)),this._is_h=b,this._is_v=f))}else this.line.push(new d.Point(a,c))};return a}();a.TileClipper=q;q=function(){function a(){}a.prototype.setExtent=function(a){this._ratio=4096===a?1:4096/a};a.prototype.reset=function(a){this.type=a;this.lines=[];this.line=null};a.prototype.moveTo=function(a,c){this.line&&this.lines.push(this.line);this.line=[];var b=this._ratio;this.line.push(new d.Point(Math.round(a*
b),Math.round(c*b)))};a.prototype.lineTo=function(a,c){var b=this._ratio;this.line.push(new d.Point(Math.round(a*b),Math.round(c*b)))};a.prototype.close=function(){var a=this.line;a&&!a[0].isEqual(a[a.length-1])&&a.push(a[0])};a.prototype.result=function(){this.line&&this.lines.push(this.line);if(0===this.lines.length)return null;3===this.type&&1!==this._ratio&&e.simplify(4096,64,this.lines);return this.lines};return a}();a.SimpleBuilder=q;var e=function(){function a(){}a.simplify=function(b,c,d){if(d){var e=
-c,f=b+c,l=-c,m=b+c;b=[];c=[];for(var n=d.length,p=0;p<n;++p){var q=d[p];if(q&&!(2>q.length))for(var H=q[0],A=void 0,B=q.length,z=1;z<B;++z)A=q[z],H.x===A.x&&(H.x<=e&&(H.y>A.y?(b.push(p),b.push(z),b.push(0),b.push(-1)):(c.push(p),c.push(z),c.push(0),c.push(-1))),H.x>=f&&(H.y<A.y?(b.push(p),b.push(z),b.push(1),b.push(-1)):(c.push(p),c.push(z),c.push(1),c.push(-1)))),H.y===A.y&&(H.y<=l&&(H.x<A.x?(b.push(p),b.push(z),b.push(2),b.push(-1)):(c.push(p),c.push(z),c.push(2),c.push(-1))),H.y>=m&&(H.x>A.x?
(b.push(p),b.push(z),b.push(3),b.push(-1)):(c.push(p),c.push(z),c.push(3),c.push(-1)))),H=A}0!==b.length&&0!==c.length&&(a.fillParent(d,c,b),a.fillParent(d,b,c),e=[],a.calcDeltas(e,c,b),a.calcDeltas(e,b,c),a.addDeltas(e,d))}};a.fillParent=function(a,c,d){for(var b=d.length,e=c.length,f=0;f<e;f+=4){for(var l=c[f],m=c[f+1],p=c[f+2],q=a[l][m-1],l=a[l][m],m=8092,H=-1,A=0;A<b;A+=4)if(d[A+2]===p){var B=d[A],z=d[A+1],v=a[B][z-1],B=a[B][z];switch(p){case 0:case 1:n.between(q.y,v.y,B.y)&&n.between(l.y,v.y,
B.y)&&(v=Math.abs(B.y-v.y),v<m&&(m=v,H=A));break;case 2:case 3:n.between(q.x,v.x,B.x)&&n.between(l.x,v.x,B.x)&&(v=Math.abs(B.x-v.x),v<m&&(m=v,H=A))}}c[f+3]=H}};a.calcDeltas=function(b,c,d){for(var e=c.length,f=0;f<e;f+=4){var l=a.calcDelta(f,c,d,[]);b.push(c[f]);b.push(c[f+1]);b.push(c[f+2]);b.push(l)}};a.calcDelta=function(b,c,d,e){b=c[b+3];if(-1===b)return 0;var f=e.length;if(1<f&&e[f-2]===b)return 0;e.push(b);return a.calcDelta(b,d,c,e)+1};a.addDeltas=function(a,c){for(var b=a.length,d=0,e=0;e<
b;e+=4){var f=a[e+3];f>d&&(d=f)}for(e=0;e<b;e+=4){var m=c[a[e]],n=a[e+1],f=d-a[e+3];switch(a[e+2]){case 0:m[n-1].x-=f;m[n].x-=f;break;case 1:m[n-1].x+=f;m[n].x+=f;break;case 2:m[n-1].y-=f;m[n].y-=f;break;case 3:m[n-1].y+=f,m[n].y+=f}}a=c.length;for(b=0;b<a;++b)m=c[b],!m||2>m.length||m[m.length-1].x!==m[0].x&&m[m.length-1].y!==m[0].y&&m.push(m[0])};return a}()})},"esri/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],function(q,a){function d(a,d){a%=d;return 0<=a?a:a+d}
Object.defineProperty(a,"__esModule",{value:!0});a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var n=1/Math.LN2;a.positiveMod=d;a.radToByte=function(f){return d(f*a.C_RAD_TO_256,256)};a.degToByte=function(f){return d(f*a.C_DEG_TO_256,256)};a.log2=function(a){return Math.log(a)*n};a.sqr=function(a){return a*
a};a.clamp=function(a,d,m){return Math.min(Math.max(a,d),m)};a.interpolate=function(a,d,m){return a*(1-m)+d*m};a.between=function(a,d,m){return a>=d&&a<=m||a>=m&&a<=d}})},"esri/views/vectorTiles/Feature":function(){define(["require","exports","../2d/engine/webgl/Geometry"],function(q,a,d){return function(){function a(a,d){this.values={};var e=d.keys;for(d=d.values;a.next();)switch(a.tag()){case 1:this.id=a.getUInt64();break;case 2:for(var b=a.getMessage(),c=this.values;!b.empty();){var f=b.getUInt32(),
g=b.getUInt32();c[e[f]]=d[g]}break;case 3:this.type=a.getUInt32();break;case 4:this._pbfGeometry=a.getMessage();break;default:a.skip()}}a.prototype.getGeometry=function(a){if(void 0!==this._geometry)return this._geometry;var e=this._pbfGeometry,f,b;a?a.reset(this.type):f=[];for(var c=1,l=0,g=0,n=0;!e.empty();)switch(0===l&&(l=e.getUInt32(),c=l&7,l>>=3),l--,c){case 1:g+=e.getSInt32();n+=e.getSInt32();a?a.moveTo(g,n):(b&&f.push(b),b=[],b.push(new d.Point(g,n)));break;case 2:g+=e.getSInt32();n+=e.getSInt32();
a?a.lineTo(g,n):b.push(new d.Point(g,n));break;case 7:a?a.close():b&&!b[0].equals(g,n)&&b.push(b[0].clone());break;default:throw Error("Invalid path operation");}a?a=a.result():(b&&f.push(b),a=f);return this._geometry=a};return a}()})},"esri/views/vectorTiles/SourceLayerData":function(){define(["require","exports"],function(q,a){return function(){function a(d){this.extent=4096;this.keys=[];this.values=[];for(this._pbfLayer=d.clone();d.next();)switch(d.tag()){case 1:this.name=d.getString();break;case 3:this.keys.push(d.getString());
break;case 4:this.values.push(a._parseValue(d.getMessage()));break;case 5:this.extent=d.getUInt32();break;default:d.skip()}}a.prototype.getData=function(){return this._pbfLayer};a._parseValue=function(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();case 3:return a.getDouble();case 4:return a.getInt64();case 5:return a.getUInt64();case 6:return a.getSInt64();case 7:return a.getBool();default:a.skip()}return null};return a}()})},"esri/views/vectorTiles/VertexMemoryBuffer":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./GeometryUtils ./MemoryBuffer".split(" "),
function(q,a,d,n,f,e){Object.defineProperty(a,"__esModule",{value:!0});var m=new Float32Array(1),b=new Uint32Array(m.buffer);q=function(a){function c(b){var c=a.call(this,b?20:12)||this;c._isDataDriven=b;return c}d(c,a);c.prototype.isDataDriven=function(){return this._isDataDriven};c.prototype.add=function(a,c,d,f,l,p,n,q){var g=this.array;a=e.i1616to32(a,c);g.push(a);a=e.i8888to32(Math.round(31*d),Math.round(31*f),Math.round(31*l),Math.round(31*p));g.push(a);a=e.i1616to32(n,0);g.push(a);if(this._isDataDriven){if(!q)throw Error("Expecting data driven values.");
d=q.color;f=d[3]*q.opacity*255;g.push(e.i8888to32(d[0]*f,d[1]*f,d[2]*f,f));m[0]=q.size;g.push(b[0])}};return c}(e);a.LineVertexBuffer=q;q=function(a){function b(b){var c=a.call(this,b?8:4)||this;c._isDataDriven=b;return c}d(b,a);b.prototype.isDataDriven=function(){return this._isDataDriven};b.prototype.add=function(a,b,c){var d=this.array;d.push(e.i1616to32(a,b));if(this._isDataDriven){if(!c)throw Error("Expecting data driven values.");a=c.color;c=a[3]*c.opacity*255;d.push(e.i8888to32(a[0]*c,a[1]*
c,a[2]*c,c))}};return b}(e);a.FillVertexBuffer=q;q=function(a){function b(b){var c=a.call(this,b?12:8)||this;c._isDataDriven=b;return c}d(b,a);b.prototype.isDataDriven=function(){return this._isDataDriven};b.prototype.add=function(a,b,c,d,f,l,m){var g=this.array,p=this.index;a=e.i1616to32(a,b);g.push(a);a=e.i8888to32(Math.round(15*c),Math.round(15*d),f,l);g.push(a);if(this._isDataDriven){if(!m)throw Error("Expecting data driven values.");c=m.color;m=c[3]*m.opacity*255;g.push(e.i8888to32(c[0]*m,c[1]*
m,c[2]*m,m))}return p};return b}(e);a.OutlineVertexBuffer=q;q=function(a){function c(b){var c=a.call(this,b?24:16)||this;c._isDataDriven=b;return c}d(c,a);c.prototype.isDataDriven=function(){return this._isDataDriven};c.prototype.add=function(a,c,d,l,n,p,q,H,A,B,z){var g=this.array;a=e.i1616to32(a,c);g.push(a);a=e.i1616to32(Math.round(32*d),Math.round(32*l));g.push(a);a=e.i8888to32(n/4,p/4,0,0);g.push(a);a=e.i8888to32(Math.ceil(10*B),f.radToByte(q),10*H,Math.min(10*A,255));g.push(a);if(this._isDataDriven){if(!z)throw Error("Expecting data driven values.");
d=z.color;l=d[3]*z.opacity*255;g.push(e.i8888to32(d[0]*l,d[1]*l,d[2]*l,l));m[0]=z.size;g.push(b[0])}};return c}(e);a.SymbolVertexBuffer=q;q=function(a){function b(){return a.call(this,16)||this}d(b,a);b.prototype.add=function(a,b,c,d,f,l,m,n,q,B,z){var g=this.array;a=e.i1616to32(2*a+c,2*b+d);g.push(a);m=l[3]*m*255;a=e.i8888to32(l[0]*m,l[1]*m,l[2]*m,m);g.push(a);l=B[3]*z*255;a=e.i8888to32(B[0]*l,B[1]*l,B[2]*l,l);g.push(a);a=e.i8888to32(Math.min(32*n,255),Math.min(4*q,255),Math.min(f,255),0);g.push(a)};
return b}(e);a.CircleVertexBuffer=q})},"esri/views/vectorTiles/style/StyleRepository":function(){define(["require","exports","dojo/has","./StyleLayer"],function(q,a,d,n){return function(){function a(e,f){this.styleJSON=e;this.version=parseFloat(e.version);this.sprite=f?f.spriteUrl:e.sprite;this.glyphs=f?f.glyphsUrl:e.glyphs;if(d("stable-symbol-rendering")){var b=(e.layers||[]).filter(function(a){return a.layout&&a.layout["text-font"]})[0];b&&(e.layers||[]).forEach(function(a){a.layout&&a.layout["text-font"]&&
(a.layout["text-font"]=b.layout["text-font"])})}this.layers=(e.layers||[]).map(a._create);this._identifyRefLayers()}a.prototype._identifyRefLayers=function(){for(var a=[],d=[],b=0,c=0,f=this.layers;c<f.length;c++){var g=f[c];if(1===g.type){var n=g,q=g.sourceLayer,q=q+("|"+JSON.stringify(g.minzoom)),q=q+("|"+JSON.stringify(g.maxzoom)),q=q+("|"+JSON.stringify(g.filter));if(n.hasDataDrivenFill||n.hasDataDrivenOutline)q+="|"+JSON.stringify(b);a.push({key:q,layer:g})}2===g.type&&(n=g,q=g.sourceLayer,q+=
"|"+JSON.stringify(g.minzoom),q+="|"+JSON.stringify(g.maxzoom),q+="|"+JSON.stringify(g.filter),q+="|"+JSON.stringify(g.layout&&g.layout["line-cap"]),q+="|"+JSON.stringify(g.layout&&g.layout["line-join"]),n.hasDataDrivenLine&&(q+="|"+JSON.stringify(b)),d.push({key:q,layer:g}));++b}this._assignRefLayers(a);this._assignRefLayers(d)};a.prototype._assignRefLayers=function(a){a.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var d,b,c=a.length,e=0;e<c;e++){var f=a[e];if(f.key===d)f.layer.refLayerId=
b;else if(d=f.key,b=f.layer.id,1===f.layer.type&&!f.layer.getPaintProperty("fill-outline-color"))for(var n=e+1;n<c;n++){var q=a[n];if(q.key===d){if(q.layer.getPaintProperty("fill-outline-color")){a[e]=q;a[n]=f;b=q.layer.id;break}}else break}}};a._create=function(a,d,b){d=1-1/(b.length+1)*(1+d);switch(a.type){case "background":return new n.BackgroundStyleLayer(0,a,d);case "fill":return new n.FillStyleLayer(1,a,d);case "line":return new n.LineStyleLayer(2,a,d);case "symbol":return new n.SymbolStyleLayer(3,
a,d);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new n.CircleStyleLayer(4,a,d)}throw Error("Unknown vector tile layer");};return a}()})},"*noref":1}});
define("require exports dojo/Deferred ../../core/promiseUtils ./WorkerTile ./style/StyleRepository".split(" "),function(q,a,d,n,f,e){return function(){function a(){this._tiles=new Map;this._spriteInfo={};this._glyphInfo={}}a.prototype.reset=function(){var a=new d;this._spriteInfo={};this._glyphInfo={};var c=this._tiles;c.forEach(function(a){return a.setObsolete()});c.clear();a.resolve();return a.promise};a.prototype.getLayers=function(){return this._layers};a.prototype.setLayers=function(a){this._layers=
(new e(a)).layers;return n.resolve({data:""})};a.prototype.getTile=function(a,c){var b=this,d=a.key,e=f.pool.acquire();e.initialize(a.key,a.refKey,this,a.rotation);var m=a.cacheTile;return c.invoke("fetchTileData",a.refKey).then(function(a){return e.setDataAndParse(a,c).then(function(a){m&&6!==e.status&&b._tiles.set(d,e);return a}).catch(function(a){e.setObsolete();f.pool.release(e);b._tiles["delete"](e.tileKey);return n.reject(a)})}).catch(function(a){e.setObsolete();if(b._tiles.has(e.tileKey))b._tiles["delete"](e.tileKey);
return n.reject(a)}).always(function(a){m||f.pool.release(e);return a})};a.prototype.update=function(a){var b=this._tiles.get(a.key);return b?b.updateSymbols(a.rotation):n.reject()};a.prototype.destructTileData=function(a){this._tiles.has(a)&&(f.pool.release(this._tiles.get(a)),this._tiles["delete"](a));return n.resolve()};a.prototype.fetchSprites=function(a,c){var b=[],d=this._spriteInfo;a.forEach(function(a){void 0===d[a]&&b.push(a)});return 0===b.length?n.resolve():c.invoke("getSprites",b).then(function(a){for(var b in a)d[b]=
a[b]})};a.prototype.getSpriteItems=function(){return this._spriteInfo};a.prototype.fetchGlyphs=function(a,c,d,e){var b=[],f=this._glyphInfo[c];f?d.forEach(function(a){f[a]||b.push(a)}):(f=this._glyphInfo[c]=[],d.forEach(function(a){return b.push(a)}));return 0===b.length?n.resolve():e.invoke("getGlyphs",{tileID:a,font:c,codePoints:b}).then(function(a){for(var b in a)f[b]=a[b]})};a.prototype.getGlyphItems=function(a){return this._glyphInfo[a]};return a}()});