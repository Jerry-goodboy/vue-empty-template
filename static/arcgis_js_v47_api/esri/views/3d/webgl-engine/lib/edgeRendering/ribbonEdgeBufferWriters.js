// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.7/esri/copyright.txt for details.
//>>built
define("require exports ../../../../../core/tsSupport/assignHelper ../../../../../core/tsSupport/extendsHelper ../../../lib/glMatrix ../../../support/buffer/glUtil ../../../support/buffer/InterleavedLayout ../Util".split(" "),function(e,g,q,y,l,r,w,t){Object.defineProperty(g,"__esModule",{value:!0});e=w.newLayout().vec3f("position0").vec3f("position1").u16("componentIndex").vec2u8("packedAttributes").u8("variantOffset",{glNormalized:!0}).u8("variantStroke").u8("variantExtension",{glNormalized:!0}).u8("_padding",
{glPadding:!0});var m=function(){function a(d){this.settings=d}a.prototype.write=function(d,a,c){var b=u;b[0]=c.position0[0];b[1]=c.position0[1];b[2]=c.position0[2];b[3]=c.position1[0];b[4]=c.position1[1];b[5]=c.position1[2];h[0]=5381;for(b=0;b<v.length;b++)h[0]=31*h[0]+v[b];k.reseed(h[0]);var b=k.randomRangeInt(0,255),e=k.randomRangeInt(0,this.settings.variants-1),f=k.randomFloat(),f=-(1-Math.min(f/.7,1))+Math.max(0,f-.7)/(1-.7),f=255*(Math.pow(Math.abs(f),1.2)*(0>f?-1:1)*.5+.5);d.position0.setVec(a,
c.position0);d.position1.setVec(a,c.position1);d.componentIndex.set(a,c.componentIndex);if(this.settings.uber){var g=c.type|t.clamp(c.lineWidth,0,127)<<1;d.packedAttributes.set(a,0,g);d.packedAttributes.set(a,1,Math.round(t.clamp(c.extensions,0,255)))}d.variantOffset.set(a,b);d.variantStroke.set(a,e);d.variantExtension.set(a,f)};a.prototype.trim=function(d,a){return d.slice(0,a)};return a}();g.RibbonCommonBufferWriter=m;var u=new Float32Array(6),v=new Uint32Array(u.buffer),h=new Uint32Array(1),k=
new (function(){function a(d){void 0===d&&(d=1);this.seed=d}a.prototype.randomFloat=function(){return this.step()/a.LARGE_PRIME};a.prototype.randomRangeInt=function(d,a){a-=d;return Math.round(d+this.randomFloat()*a)};a.prototype.reseed=function(a){this.seed=a};a.prototype.step=function(){return this.seed=this.seed*a.SMALL_PRIME%a.LARGE_PRIME};a.LARGE_PRIME=2147483647;a.SMALL_PRIME=16807;return a}()),n=e.clone().vec3f("normal");q=function(){function a(a){this.commonWriter=new m(a)}a.prototype.allocate=
function(a){return n.createBuffer(a)};a.prototype.write=function(a,b,c){this.commonWriter.write(a,b,c);c=l.vec3d.normalize(l.vec3d.add(c.faceNormal0,c.faceNormal1,x));a.normal.setVec(b,c)};a.prototype.trim=function(a,b){return this.commonWriter.trim(a,b)};a.Layout=n;a.glLayout=r.glLayout(n,1);return a}();g.RibbonDefaultEdgeBufferWriter=q;var p=e.clone().vec3f("normalA").vec3f("normalB");e=function(){function a(a){this.commonWriter=new m(a)}a.prototype.allocate=function(a){return p.createBuffer(a)};
a.prototype.write=function(a,b,c){this.commonWriter.write(a,b,c);a.normalA.setVec(b,c.faceNormal0);a.normalB.setVec(b,c.faceNormal1)};a.prototype.trim=function(a,b){return this.commonWriter.trim(a,b)};a.Layout=p;a.glLayout=r.glLayout(p,1);return a}();g.RibbonSilhouetteBufferWriter=e;var x=l.vec3d.create()});