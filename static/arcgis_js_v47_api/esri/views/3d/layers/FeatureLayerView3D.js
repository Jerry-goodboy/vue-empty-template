// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.7/esri/copyright.txt for details.
//>>built
define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Error ../../../core/promiseUtils ../../../core/watchUtils ../../../core/accessorSupport/decorators ../../../layers/FeatureLayer ../../../layers/graphics/controllers/SnapshotController ../../../layers/graphics/controllers/support/controllerUtils ./GraphicLayerView3DBase ../../layers/RefreshableLayerView".split(" "),function(t,u,k,e,f,g,l,d,m,n,p,q,r){return function(h){function a(a){var b=
h.call(this)||this;b.labelingEnabled=a.layer instanceof m;return b}k(a,h);c=a;a.prototype.initialize=function(){this.addResolvingPromise(this.validateMaximumFeatureCount())};a.prototype.createController=function(){var a=this;return this.layer.createGraphicsController({layerView:this,options:{maxPageSize:300,extent:this.view.clippingArea}}).then(function(b){b instanceof n&&a._eventHandles.push(l.whenFalseOnce(a,"suspended",function(){b.startup()}));return b}).catch(function(a){return g.reject(new f("featurelayerview3d:create-controller",
a.message,{error:a}))})};a.prototype.validateMaximumFeatureCount=function(){return 0>c.maximumFeatureCount||!this.layer.url?g.resolve():this.layer.queryFeatureCount().then(function(a){if(a>c.maximumFeatureCount)throw new f("featurelayerview3d:maximum-feature-count-exceeded","The maximum number of allowed features (${maximumFeatureCount}) has been exceeded (layer has ${numberOfFeatures} features)",{maximumFeatureCount:c.maximumFeatureCount,numberOfFeatures:a});})};a.prototype.doRefresh=function(){!this.suspended&&
p.isRefreshable(this.controller)&&this.controller.refresh()};a.maximumFeatureCount=-1;e([d.property()],a.prototype,"controller",void 0);return a=c=e([d.subclass("esri.views.3d.layers.FeatureLayerView3D")],a);var c}(d.declared(q,r))});