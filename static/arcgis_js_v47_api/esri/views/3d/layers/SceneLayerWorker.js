// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.7/esri/copyright.txt for details.
//>>built
require({cache:{"esri/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),function(a,b,h,t,q,k,n,p){a=function(a){function b(b){b=a.call(this)||this;b.latestWkid=null;b.wkid=null;b.wkt=null;return b}h(b,a);d=b;b.fromJSON=function(a){if(!a)return null;if(a.wkid){if(102100===a.wkid)return d.WebMercator;if(4326===
a.wkid)return d.WGS84}var b=new d;b.read(a);return b};b.prototype.normalizeCtorArgs=function(a){return a&&"object"===typeof a?a:(b={},b["string"===typeof a?"wkt":"wkid"]=a,b);var b};Object.defineProperty(b.prototype,"isWGS84",{get:function(){return p.isWGS84(this)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isWebMercator",{get:function(){return p.isWebMercator(this)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isGeographic",{get:function(){return p.isGeographic(this)},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"isWrappable",{get:function(){return p.isWrappable(this)},enumerable:!0,configurable:!0});b.prototype.writeWkt=function(a,b){this.wkid||(b.wkt=a)};b.prototype.clone=function(){if(this===d.WGS84)return d.WGS84;if(this===d.WebMercator)return d.WebMercator;var a=new d;null!=this.wkid?(a.wkid=this.wkid,null!=this.latestWkid&&(a.latestWkid=this.latestWkid),null!=this.vcsWkid&&(a.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(a.latestVcsWkid=
this.latestVcsWkid)):null!=this.wkt&&(a.wkt=this.wkt);return a};b.prototype.equals=function(a){return p.equals(this,a)};b.prototype.toJSON=function(a){return this.write(null,a)};b.GCS_NAD_1927=null;b.WGS84=null;b.WebMercator=null;t([n.property({dependsOn:["wkid"],readOnly:!0})],b.prototype,"isWGS84",null);t([n.property({dependsOn:["wkid"],readOnly:!0})],b.prototype,"isWebMercator",null);t([n.property({dependsOn:["wkid","wkt"],readOnly:!0})],b.prototype,"isGeographic",null);t([n.property({dependsOn:["wkid"],
readOnly:!0})],b.prototype,"isWrappable",null);t([n.property({type:Number,json:{write:!0}})],b.prototype,"latestWkid",void 0);t([n.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt?!0:!1}}}}}}})],b.prototype,"wkid",void 0);t([n.property({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkid?!0:!1}}}}}}})],b.prototype,"wkt",void 0);t([n.writer("wkt"),n.writer("web-scene",
"wkt")],b.prototype,"writeWkt",null);t([n.property({type:Number,json:{write:!0}})],b.prototype,"vcsWkid",void 0);t([n.property({type:Number,json:{write:!0}})],b.prototype,"latestVcsWkid",void 0);return b=d=t([n.subclass("esri.geometry.SpatialReference")],b);var d}(n.declared(q));a.prototype.toJSON.isDefaultToJSON=!0;a.GCS_NAD_1927=new a({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'});
a.WGS84=new a(4326);a.WGS84.wkt=k.substitute({Central_Meridian:"0.0"},p.getInfo(a.WGS84).wkTemplate);a.WebMercator=new a({wkid:102100,latestWkid:3857});Object.freeze&&(Object.freeze(a.GCS_NAD_1927),Object.freeze(a.WGS84),Object.freeze(a.WebMercator));return a})},"esri/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(a,b){return function(a,b){a.__bases__=b.__bases__}})},"esri/core/tsSupport/decorateHelper":function(){define([],function(){return function(a,b,h,t){var q=
arguments.length,k=3>q?b:null===t?t=Object.getOwnPropertyDescriptor(b,h):t,n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)k=Reflect.decorate(a,b,h,t);else for(var p=a.length-1;0<=p;p--)if(n=a[p])k=(3>q?n(k):3<q?n(b,h,k):n(b,h))||k;return 3<q&&k&&Object.defineProperty(b,h,k),k}})},"esri/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/decorators ./accessorSupport/read ./accessorSupport/write".split(" "),
function(a,b,h,t,q,k,n,p,d){function l(a,b){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");var d=new this;d.read(a,b);return d}var f=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}h(b,a);b.prototype.read=function(a,b){p.default(this,a,b);return this};b.prototype.write=function(a,b){return d.default(this,a||{},b)};b.prototype.toJSON=function(a){return this.write(null,a)};b.fromJSON=function(a,b){return l.call(this,a,b)};return b=t([n.subclass("esri.core.JSONSupport")],
b)}(n.declared(q));f.prototype.toJSON.isDefaultToJSON=!0;k.after(function(a){k.hasMixin(a,f)&&(a.fromJSON=l.bind(a))});return f})},"esri/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(a,b,h,t,q,k){b=b.default;a.before(function(b,d){a.hasMixin(b,n)&&t.processPrototype(d)});a.after(function(b){a.hasMixin(b,n)&&(t.processClass(b),Object.defineProperties(b.prototype,
{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var n=a(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===n)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{value:new b(this)});if(0<
arguments.length&&this.normalizeCtorArgs){for(var a=[],d=0;d<arguments.length;d++)a.push(arguments[d]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,a)}},__accessor__:null,postscript:function(a){var b=this.__accessor__;a=b.ctorArgs||a;var l;null!=this.getDefaults&&(l=this.getDefaults(a||{}),this.set(l));b.initialize();a&&(this.set(a),b.ctorArgs=null);b.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");
}catch(p){console.warn(p.stack)}else k.removeTarget(this),this.__accessor__.destroy()},get:function(a){return h.get(this,a)},hasOwnProperty:function(a){return this.__accessor__?this.__accessor__.has(a):Object.prototype.hasOwnProperty.call(this,a)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(a,b){q.set(this,a,b);return this},watch:function(a,b,l){return k.watch(this,a,b,l)},_clearOverride:function(a){return this.__accessor__.clearOverride(a)},_override:function(a,
b){return this.__accessor__.override(a,b)},_isOverridden:function(a){return this.__accessor__.isOverridden(a)},notifyChange:function(a){this.__accessor__.propertyInvalidated(a)},_get:function(a){return this.__accessor__.internalGet(a)},_set:function(a,b){return this.__accessor__.internalSet(a,b)}});return n})},"esri/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(a,b,h){function t(a,b){a&&!Array.isArray(a)&&"function"!==typeof a&&(b=a,a=null);a=a||[];b=b||{};return q([this].concat(a),
b)}function q(a,b){a&&!Array.isArray(a)&&"function"!==typeof a&&(b=a,a=null);"function"===typeof a?a=[a]:a||(a=[]);b=b||{};var d,f;d=0;for(f=k.length;d<f;d++)k[d](a,b);a=h(a,b);a.createSubclass=t;d=0;for(f=n.length;d<f;d++)n[d](a);return a}var k=[],n=[];(function(a){a.hasMixin=function(a,b){a=Array.isArray(a)?a.reduce(function(a,b){return b._meta?a.concat(b._meta.bases):a},[]):a._meta?a._meta.bases:a;if(!a)return!1;if("string"===typeof b)for(var d=a.length-1;0<=d;d--)if(a[d].prototype.declaredClass===
b)return!0;return-1!==a.indexOf(b)};a.safeMixin=function(a,b){return h.safeMixin(a,b)};a.before=function(a){k.push(a)};a.after=function(a){n.push(a)}})(q||(q={}));return q})},"esri/core/accessorSupport/Properties":function(){define("require exports dojo/has ../Logger ./extensions ./PropertyOrigin ./Store".split(" "),function(a,b,h,t,q,k,n){Object.defineProperty(b,"__esModule",{value:!0});t.getLogger("esri.core.accessorSupport.Properties");a=function(){function a(a){this.host=a;this._origin=k.OriginId.USER;
this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new n.default;a=this.host.constructor.__accessorMetadata__;this.metadatas=a.properties;this.autoDestroy=a.autoDestroy}a.prototype.initialize=function(){this.lifecycle=1;q.instanceCreated(this.host,this.metadatas)};a.prototype.constructed=function(){this.lifecycle=2};a.prototype.destroy=function(){this.destroyed=!0;var a=this.cursors;if(this.cursors)for(var b=0,f=Object.getOwnPropertyNames(a);b<
f.length;b++){var p=f[b],k=a[p];if(k){for(;0<k.length;)k.pop().propertyDestroyed(this,p);a[p]=null}}if(this.autoDestroy)for(p in this.metadatas)(a=this.internalGet(p))&&a&&"function"===typeof a.destroy&&(a.destroy(),this.metadatas[p].nonNullable||this.internalSet(p,null))};Object.defineProperty(a.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0});a.prototype.clearOverride=function(a){this.isOverridden(a)&&(this.overridden[a]=!1,this.propertyInvalidated(a))};
a.prototype.get=function(a){var b=this.metadatas[a];if(this.store.has(a)&&!this.dirties[a])return this.store.get(a);var d=b.get;return d?(b=d.call(this.host),this.store.set(a,b,k.OriginId.COMPUTED),this.propertyCommitted(a),b):b.value};a.prototype.originOf=function(a){var b=this.store.originOf(a);return void 0===b&&(a=this.metadatas[a])&&a.hasOwnProperty("value")?"defaults":k.idToName(b)};a.prototype.has=function(a){return this.metadatas[a]?this.store.has(a):!1};a.prototype.internalGet=function(a){if(this.metadatas[a]){var b=
this.store;return b.has(a)?b.get(a):this.metadatas[a].value}};a.prototype.internalSet=function(a,b){this.metadatas[a]&&(this.propertyInvalidated(a),this.initialized?this.store.set(a,b,this._origin):this.store.set(a,b,k.OriginId.DEFAULTS),this.propertyCommitted(a))};a.prototype.isOverridden=function(a){return null!=this.overridden&&!0===this.overridden[a]};a.prototype.keys=function(){return this.store.keys()};a.prototype.override=function(a,b){if(this.metadatas[a]){this.overridden||(this.overridden=
{});var f=this.metadatas[a];f.nonNullable&&null==b||((f=f.cast)&&(b=f.call(this.host,b)),this.overridden[a]=!0,this.internalSet(a,b))}};a.prototype.set=function(a,b){if(this.metadatas[a]){var f=this.metadatas[a];if(!f.nonNullable||null!=b){var d=f.set;(f=f.cast)&&(b=f.call(this.host,b));d?d.call(this.host,b):this.internalSet(a,b)}}};a.prototype.setDefaultOrigin=function(a){this._origin=k.nameToId(a)};a.prototype.propertyInvalidated=function(a){var b=this.dirties,f=this.isOverridden(a),d=this.cursors&&
this.cursors[a],p=this.metadatas[a].computes;if(d)for(var k=0;k<d.length;k++)d[k].propertyInvalidated(this,a);f||(b[a]=!0);if(p)for(a=0;a<p.length;a++)this.propertyInvalidated(p[a])};a.prototype.propertyCommitted=function(a){var b=this.cursors&&this.cursors[a];this.dirties[a]=!1;if(b)for(var f=0;f<b.length;f++)b[f].propertyCommitted(this,a)};a.prototype.addCursor=function(a,b){this.cursors||(this.cursors={});var f=this.cursors[a];f||(this.cursors[a]=f=[]);f.push(b)};a.prototype.removeCursor=function(a,
b){var f=this.cursors[a];this.cursors[a]&&(f.splice(f.indexOf(b),1),0===f.length&&(this.cursors[a]=null))};return a}();b.default=a})},"esri/core/Logger":function(){define(["require","exports","dojo/has"],function(a,b,h){var t={info:0,warn:1,error:2};a=function(){function a(b){void 0===b&&(b={});this.module=b.module||"";this.writer=b.writer||null;this.level=b.level||null;null!=b.enabled&&(this.enabled=!!b.enabled);a._loggers[this.module]=this;b=this.module.lastIndexOf(".");-1!==b&&(this.parent=a.getLogger(this.module.slice(0,
b)))}a.prototype.log=function(a){for(var b=[],p=1;p<arguments.length;p++)b[p-1]=arguments[p];this._isEnabled()&&this._matchLevel(a)&&(p=this._inheritedWriter())&&p.apply(void 0,[a,this.module].concat(b))};a.prototype.error=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log.apply(this,["error"].concat(a))};a.prototype.warn=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log.apply(this,["warn"].concat(a))};a.prototype.info=function(){for(var a=[],
b=0;b<arguments.length;b++)a[b]=arguments[b];this.log.apply(this,["info"].concat(a))};a.prototype.getLogger=function(b){return a.getLogger(this.module+"."+b)};a.getLogger=function(b){var k=a._loggers[b];k||(k=new a({module:b}));return k};a.prototype._parentWithMember=function(a,b){for(var p=this;p&&null==p[a];)p=p.parent;return p?p[a]:b};a.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};a.prototype._consoleWriter=function(a,b){for(var p=[],d=2;d<
arguments.length;d++)p[d-2]=arguments[d];console[a].apply(console,["["+b+"]"].concat(p))};a.prototype._matchLevel=function(a){return t[this._parentWithMember("level","error")]<=t[a]};a.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};a._loggers={};return a}();a.getLogger("esri").level="warn";return a})},"esri/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],
function(a,b,h,t,q){Object.defineProperty(b,"__esModule",{value:!0});var k=[h.default,t.default,q.default];b.processPrototypeMetadatas=function(a,b){for(var d=Object.getOwnPropertyNames(a),l=0;l<k.length;l++){var f=k[l];if(f.processPrototypePropertyMetadata)for(var p=0,y=d;p<y.length;p++){var n=y[p];f.processPrototypePropertyMetadata(n,a[n],a,b)}}};b.processClassMetadatas=function(a,b){for(var d=Object.getOwnPropertyNames(a),l=0;l<k.length;l++){var f=k[l];if(f.processClassPropertyMetadata)for(var p=
0,y=d;p<y.length;p++){var n=y[p];f.processClassPropertyMetadata(n,a[n],a,b)}}};b.instanceCreated=function(a,b){for(var d=Object.getOwnPropertyNames(b),l=0;l<k.length;l++){var f=k[l];f.instanceCreated&&f.instanceCreated(a,b,d)}}})},"esri/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../get ../set ../utils ../wire".split(" "),function(a,b,h,t,q,k,n){function p(a,b,f){var d=k.getProperties(a);return n.wire(a,f.aliasOf,function(){d.propertyInvalidated(b)})}
Object.defineProperty(b,"__esModule",{value:!0});b.AliasedPropertyExtension={processClassPropertyMetadata:function(a,b,f,p){var d=b.aliasOf;if(d&&(a=d.split(".")[0],null!=f[a]&&!b.set&&!b.get)){var l;b.get=function(){var a=t.default(this,d);if("function"===typeof a){l||(l=d.split(".").slice(0,-1).join("."));var b=t.default(this,l);b&&(a=a.bind(b))}return a};b.readOnly||(b.set=function(a){return q.default(this,d,a)})}},instanceCreated:function(a,b,f){for(var d=0;d<f.length;d++){var l=f[d],k=b[l];k.aliasOf&&
p(a,l,k)}}};b.default=b.AliasedPropertyExtension})},"esri/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(a,b,h){function t(a,b,l){if(null!=l.getItemAt||Array.isArray(l)){var f=parseInt(a,10);if(!isNaN(f))return Array.isArray(l)?l[f]:l.getItemAt(f)}f=h.getProperties(l);return b?h.isPropertyDeclared(f,a)?f.get(a):l[a]:h.isPropertyDeclared(f,a)?f.internalGet(a):l[a]}function q(a,b,l,f){if(null==a)return a;if((a=t(b[f],l,a))||!(f<b.length-1))return f===b.length-1?
a:q(a,b,l,f+1)}function k(a,b,l,f){void 0===l&&(l=!1);void 0===f&&(f=0);return"string"===typeof b&&-1===b.indexOf(".")?t(b,l,a):q(a,h.pathToArray(b),l,f)}function n(a,b){return k(a,b,!0)}Object.defineProperty(b,"__esModule",{value:!0});b.valueOf=k;b.get=n;b.exists=function(a,b){return void 0!==k(b,a,!0)};b.default=n})},"esri/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(a,b,h){function t(a,b){return b?Object.keys(b).reduce(function(a,f){if("value"===f)return a[f]=
b[f],a;if(void 0===a[f])return a[f]=h.clone(b[f]),a;var d=a[f],l=b[f];if(d===l)return a;if(Array.isArray(l)||Array.isArray(a))d=d?Array.isArray(d)?a[f]=d.concat():a[f]=[d]:a[f]=[],l&&(Array.isArray(l)||(l=[l]),l.forEach(function(a){-1===d.indexOf(a)&&d.push(a)}));else if(l&&"object"===typeof l)a[f]=t(d,l);else if(!a.hasOwnProperty(f)||b.hasOwnProperty(f))a[f]=l;return a},a||{}):a}function q(a){return Array.isArray(a)?a:a.split(".")}function k(a){if(Array.isArray(a)||-1<a.indexOf(",")){a=Array.isArray(a)?
a:a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return 1===a.length?a[0]:a}return a.trim()}function n(a){var b=!1;return function(){b||(b=!0,a())}}Object.defineProperty(b,"__esModule",{value:!0});b.getProperties=function(a){return a?a.__accessor__?a.__accessor__:a.propertyInvalidated?a:null:null};b.isPropertyDeclared=function(a,b){return a&&a.metadatas&&null!=a.metadatas[b]};b.merge=t;b.pathToStringOrArray=function(a){return a?"string"===typeof a&&-1===a.indexOf(".")?a:q(a):a};b.pathToArray=
q;b.splitPath=k;b.parse=function(a,b,l,f){b=k(b);if(Array.isArray(b)){var d=b.map(function(b){return f(a,b.trim(),l)});return{remove:n(function(){return d.forEach(function(a){return a.remove()})})}}return f(a,b.trim(),l)};b.once=n})},"esri/core/accessorSupport/set":function(){define(["require","exports","dojo/has","../Logger","./get"],function(a,b,h,t,q){function k(a,b,d){if(a&&b)if("object"===typeof b){d=0;for(var l=Object.getOwnPropertyNames(b);d<l.length;d++){var f=l[d];k(a,f,b[f])}}else"_"!==
b[0]&&(-1!==b.indexOf(".")?(b=b.split("."),f=b.splice(b.length-1,1)[0],k(q.default(a,b),f,d)):a[b]=d)}Object.defineProperty(b,"__esModule",{value:!0});t.getLogger("esri.core.accessorSupport.set");b.set=k;b.default=k})},"esri/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(a,b,h){function t(a,b,k){b=h.splitPath(b);if(Array.isArray(b)){for(var f=[],l=0;l<b.length;l++)f.push((new q(b[l],k)).install(a));return new p(f)}a=(new q(b,k)).install(a);return new d(a)}Object.defineProperty(b,
"__esModule",{value:!0});var q=function(){function a(a,b){this.path=a;this.callback=b;this.chain=null;this.path=a;-1<a.indexOf(".")&&(this.chain=h.pathToArray(a));this.callback=b;return this}a.prototype.install=function(a){a=this.chain?new n(this,a):new k(this,a);return a};a.prototype.notify=function(a){this.callback(a,this.path)};return a}(),k=function(){function a(a,b){this.binding=a;this.target=b;h.getProperties(b).addCursor(this.binding.path,this)}a.prototype.destroy=function(){this.target&&(h.getProperties(this.target).removeCursor(this.binding.path,
this),this.target=this.binding=null)};a.prototype.propertyDestroyed=function(a,b){h.getProperties(this.target).removeCursor(b,this)};a.prototype.propertyInvalidated=function(a,b){this.binding&&this.binding.notify(this.target)};a.prototype.propertyCommitted=function(a,b){this.binding&&this.binding.notify(this.target)};return a}(),n=function(){function a(a,b){this.binding=a;this.target=b;this.stack=[];this.properties=h.getProperties(b);this.stack.push({properties:this.properties,propertyName:a.chain[0]});
this.properties.addCursor(a.chain[0],this);this.moveForward();return this}a.prototype.destroy=function(){for(;;){var a=this.stack.pop();if(null==a)break;a.properties.removeCursor(a.propertyName,this)}this.target=this.binding=null};a.prototype.propertyDestroyed=function(a,b){this.moveBackward(a,b)};a.prototype.propertyInvalidated=function(a,b){this.binding&&this.binding.notify(this.target)};a.prototype.propertyCommitted=function(a,b){this.binding&&(this.moveBackward(a,b),this.moveForward(),this.binding.notify(this.target))};
a.prototype.moveBackward=function(a,b){for(var f=this.stack,d=f[f.length-1];d.properties!==a&&d.propertyName!==b;)d.properties.removeCursor(d.propertyName,this),f.pop(),d=f[f.length-1]};a.prototype.moveForward=function(){var a=this.stack,b=a[a.length-1],b=b.properties.internalGet(b.propertyName);(b=h.getProperties(b))&&a.length<this.binding.chain.length&&(a=this.binding.chain[a.length],this.stack.push({properties:b,propertyName:a}),b.addCursor(a,this),this.moveForward())};return a}(),p=function(){function a(a){this.cursors=
a}a.prototype.remove=function(){for(var a=this.cursors;0<a.length;)a.pop().destroy();this.cursors=null};return a}(),d=function(){function a(a){this.cursor=a}a.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return a}();b.create=function(a,b){a=h.splitPath(a);if(Array.isArray(a)){for(var f=[],l=0;l<a.length;l++)f.push(new q(a[l],b));return function(a){for(var b=[],m=0;m<f.length;m++)b[m]=f[m].install(a);return new p(b)}}var k=new q(a,b);return function(a){return new d(k.install(a))}};
b.wire=t;b.default=t})},"esri/core/accessorSupport/extensions/computedProperty":function(){define("require exports dojo/has ../../Logger ../utils ../wire".split(" "),function(a,b,h,t,q,k){Object.defineProperty(b,"__esModule",{value:!0});t.getLogger("esri.core.accessorSupport.extensions.computedProperty");b.ComputedPropertyExtension={processClassPropertyMetadata:function(a,b,d,l){b.dependsOn&&(d=void 0,d=b.dependsOn.slice())&&(b.wire=k.create(d,function(b){return q.getProperties(b).propertyInvalidated(a)}))},
instanceCreated:function(a,b,d){for(var l=0;l<d.length;l++){var f=b[d[l]];f.wire&&f.wire(a)}}};b.default=b.ComputedPropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),function(a,b,h,t,q,k){function n(a,b,l){var f=a&&a.json;a&&a.json&&a.json.origins&&l&&(a=a.json.origins[l.origin])&&b in a&&(f=
a);return f}Object.defineProperty(b,"__esModule",{value:!0});b.originSpecificReadPropertyDefinition=function(a,b){return n(a,"read",b)};b.originSpecificWritePropertyDefinition=function(a,b){return n(a,"write",b)};b.SerializablePropertyExtension={processPrototypePropertyMetadata:function(a,b,l,f){if(q.process(b)){h.process(b);l=b.type;for(f=0;Array.isArray(l);)l=l[0],f++;if(b.json.origins)for(var d in b.json.origins){var p=b.json.origins[d];t.create(l,f,a,p);k.create(l,f,a,p)}t.create(l,f,a,b.json);
k.create(l,f,a,b.json)}}};b.default=b.SerializablePropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.process=function(a){if(a.json&&a.json.origins){var b=a.json.origins,h={"web-document":["web-scene","web-map"]};a=function(a){if(b[a]){var k=b[a];h[a].forEach(function(a){b[a]=k});delete b[a]}};for(var k in h)a(k)}}})},"esri/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require",
"exports","dojo/_base/lang","./type"],function(a,b,h,t){function q(a,b,f,h){if(1<b)return p(a,b);if(1===b)return d(a);if(l(a)){var r=d(a.prototype.itemType.Type);return function(b,f,c){return(b=r(b,f,c))?new a(b):b}}return k(a)}function k(a){return a.prototype.read?function(b,f,d){return null==b?b:(new a).read(b,d)}:a.fromJSON}function n(a,b,f,d){return 0!==d&&Array.isArray(b)?b.map(function(b){return n(a,b,f,d-1)}):a(b,null,f)}function p(a,b){a=k(a);var f=n.bind(null,a);return function(a,d,m){if(null==
a)return a;a=f(a,m,b);d=b;for(m=a;0<d&&Array.isArray(m);)d--,m=m[0];if(void 0!==m)for(m=0;m<d;m++)a=[a];return a}}function d(a){var b=k(a);return function(a,f,d){return null==a?a:Array.isArray(a)?a.map(function(a){return b(a,null,d)}):[b(a,null,d)]}}function l(a){return t.isCollection(a)?(a=a.prototype.itemType)&&a.Type&&"function"===typeof a.Type?f(a.Type):!1:!1}function f(a){return!!a&&(!!a.prototype.read||!!a.fromJSON||l(a))}Object.defineProperty(b,"__esModule",{value:!0});b.create=function(a,
b,d,l){(!l.read||!l.read.reader&&!1!==l.read.enabled)&&f(a)&&h.setObject("read.reader",q(a,b,d,l),l)}})},"esri/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.isCollection=function(a){return!!a&&!!a.prototype.declaredClass&&0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},"esri/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require",
"exports"],function(a,b){function h(a){"boolean"===typeof a.read?a.read={enabled:a.read}:"function"===typeof a.read?a.read={enabled:!0,reader:a.read}:a.read&&"object"===typeof a.read&&void 0===a.read.enabled&&(a.read.enabled=!0)}function t(a){"boolean"===typeof a.write?a.write={enabled:a.write}:"function"===typeof a.write?a.write={enabled:!0,writer:a.write}:a.write&&"object"===typeof a.write&&void 0===a.write.enabled&&(a.write.enabled=!0)}Object.defineProperty(b,"__esModule",{value:!0});b.process=
function(a){a.json||(a.json={});h(a.json);t(a.json);if(a.json.origins)for(var b in a.json.origins)h(a.json.origins[b]),t(a.json.origins[b]);return!0}})},"esri/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","dojo/_base/lang","./type"],function(a,b,h,t){function q(a,b,d,p){h.setObject(d,k(a,p),b)}function k(a,b){return a&&"function"===typeof a.write?a.write({},b):a&&"function"===typeof a.toJSON?a.toJSON():"number"===typeof a?-Infinity===a?-Number.MAX_VALUE:
Infinity===a?Number.MAX_VALUE:isNaN(a)?null:a:a}function n(a,b,d,p){null===a?a=null:a&&"function"===typeof a.map?(a=a.map(function(a){return k(a,p)}),"function"===typeof a.toArray&&(a=a.toArray())):a=[k(a,p)];h.setObject(d,a,b)}function p(a,b,d){return 0!==d&&Array.isArray(a)?a.map(function(a){return p(a,b,d-1)}):k(a,b)}function d(a){return function(b,d,l,k){if(null===b)b=null;else{b=p(b,k,a);k=a;for(var f=b;0<k&&Array.isArray(f);)k--,f=f[0];if(void 0!==f)for(f=0;f<k;f++)b=[b]}h.setObject(l,b,d)}}
Object.defineProperty(b,"__esModule",{value:!0});b.create=function(a,b,k,p){p.write&&!p.write.writer&&!1!==p.write.enabled&&(1===b||t.isCollection(a)?p.write.writer=n:p.write.writer=1<b?d(b):q)}})},"esri/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(a,b){function h(a){switch(a){case "defaults":return q.DEFAULTS;case "service":return q.SERVICE;case "portal-item":return q.PORTAL_ITEM;case "web-scene":return q.WEB_SCENE;case "web-map":return q.WEB_MAP;case "user":return q.USER}}
function t(a){switch(a){case q.DEFAULTS:return"defaults";case q.SERVICE:return"service";case q.PORTAL_ITEM:return"portal-item";case q.WEB_SCENE:return"web-scene";case q.WEB_MAP:return"web-map";case q.USER:return"user"}}Object.defineProperty(b,"__esModule",{value:!0});var q;(function(a){a[a.DEFAULTS=0]="DEFAULTS";a[a.COMPUTED=1]="COMPUTED";a[a.SERVICE=2]="SERVICE";a[a.PORTAL_ITEM=3]="PORTAL_ITEM";a[a.WEB_SCENE=4]="WEB_SCENE";a[a.WEB_MAP=5]="WEB_MAP";a[a.USER=6]="USER";a[a.NUM=7]="NUM"})(q=b.OriginId||
(b.OriginId={}));b.nameToId=h;b.idToName=t;b.readableNameToId=function(a){return h(a)};b.idToReadableName=function(a){return t(a)};b.writableNameToId=function(a){return h(a)};b.idToWritableName=function(a){return t(a)}})},"esri/core/accessorSupport/Store":function(){define(["require","exports","./PropertyOrigin"],function(a,b,h){Object.defineProperty(b,"__esModule",{value:!0});a=function(){function a(){this._values={}}a.prototype.get=function(a){return this._values[a]};a.prototype.originOf=function(a){return h.OriginId.USER};
a.prototype.keys=function(){return Object.keys(this._values)};a.prototype.set=function(a,b){this._values[a]=b};a.prototype.clear=function(a){delete this._values[a]};a.prototype.has=function(a){return a in this._values};return a}();b.default=a})},"esri/core/accessorSupport/introspection":function(){define("require exports dojo/_base/lang ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),function(a,b,h,t,q,k,n,p){Object.defineProperty(b,"__esModule",{value:!0});var d=Object.prototype.hasOwnProperty,
l=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,f={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},z=/^_(set|get)([a-zA-Z0-9]+)Attr$/;b.processPrototype=function(a){for(var b=a.declaredClass,p=a.properties||{},r=0,m=Object.getOwnPropertyNames(p);r<m.length;r++){var v=m[r],c=p[v],e=typeof c;null==c?k.setPropertyMetadata(a,v,{value:c}):Array.isArray(c)?k.setPropertyMetadata(a,v,{type:[c[0]],value:null}):"object"===e?n.getProperties(c)||c instanceof
Date?k.setPropertyMetadata(a,v,{type:c.constructor,value:c}):k.setPropertyMetadata(a,v,c):"boolean"===e?k.setPropertyMetadata(a,v,{type:Boolean,value:c}):"string"===e?k.setPropertyMetadata(a,v,{type:String,value:c}):"number"===e?k.setPropertyMetadata(a,v,{type:Number,value:c}):"function"===e&&k.setPropertyMetadata(a,v,{type:c,value:null})}r=0;for(m=Object.getOwnPropertyNames(a);r<m.length;r++){var e=m[r],c=a[e],p=v=void 0,g=l.exec(e);if(g)v=g[1],p=f[g[2]];else if(g=z.exec(e))v=g[2][0].toLowerCase()+
g[2].substr(1),p=g[1].toLowerCase();v&&p&&(v=k.getPropertyMetadata(a,v),h.setObject(p,c,v))}r=0;for(m=Object.getOwnPropertyNames(k.getPropertiesMetadata(a));r<m.length;r++)if(v=m[r],c=k.getPropertyMetadata(a,v),p=c.type,e=c.types,void 0===c.value&&d.call(a,v)&&(c.value=a[v]),!c.cast&&p){v=c;c=0;for(e=p;Array.isArray(e);)e=e[0],c++;p=1===c?t.ensureArray(e):1<c?t.ensureNArray(e,c):t.ensureType(p);v.cast=p}else!c.cast&&e&&(Array.isArray(e)?c.cast=t.ensureArrayTyped(t.ensureOneOfType(e[0])):c.cast=t.ensureOneOfType(e));
q.processPrototypeMetadatas(k.getPropertiesMetadata(a),b);return k.getPropertiesMetadata(a)};b.processClass=function(a){for(var b=a.prototype,d=b.declaredClass,f=a._meta.bases,m={},v=f.length-1;0<=v;v--)n.merge(m,k.getMetadata(f[v].prototype));var c=m.properties;q.processClassMetadatas(c,d);Object.defineProperty(a,"__accessorMetadata__",{value:{properties:c,autoDestroy:!!m.autoDestroy}});for(var e={},d=function(a){var g=c[a];e[a]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?
this.__accessor__.get(a):g.value},set:function(c){var e=this.__accessor__;if(!e)Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:c});else if(!Object.isFrozen(this)){if(e.initialized&&g.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+a+"' of "+this.declaredClass);if(2===e.lifecycle&&g.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+a+"' of "+this.declaredClass);e.set(a,c)}}}},f=0,v=Object.getOwnPropertyNames(c);f<
v.length;f++)d(v[f]);Object.defineProperties(a.prototype,e);if(m.parameters)for(a=0,d=Object.getOwnPropertyNames(m.parameters);a<d.length;a++)f=d[a],v=Object.getOwnPropertyDescriptor(b,f)||{value:b[f]},(v=p.autocastMethod(b,f,v))&&Object.defineProperty(b,f,v);return m}})},"esri/core/accessorSupport/ensureType":function(){define(["require","exports","../Logger"],function(a,b,h){function t(c,e){return e.isInstanceOf?e.isInstanceOf(c):e instanceof c}function q(c){return null==c?c:new Date(c)}function k(c){return null==
c?c:!!c}function n(c){return null==c?c:c.toString()}function p(c){return null==c?c:parseFloat(c)}function d(c){return null==c?c:Math.round(parseFloat(c))}function l(c){return c&&c.constructor&&void 0!==c.constructor._meta}function f(c,e){return null!=e&&c&&!t(c,e)}function z(e,a){f(e,a)&&(l(a)?c.error("Accessor#set","Assigning an instance of '"+(a.declaredClass||"unknown")+"' which is not a subclass of '"+(e&&e.prototype&&e.prototype.declaredClass||"unknown")+"'"):a=new e(a));return a}function y(c){switch(c){case Number:return p;
case e:return d;case Boolean:return k;case String:return n;case Date:return q;default:return z.bind(null,c)}}function x(c,e){var a=y(c);return 1===arguments.length?a:a(e)}function w(c,e){return 1===arguments.length?w.bind(null,c):e?Array.isArray(e)?e.map(c):[c(e)]:e}function r(c,e,a){return 0!==e&&Array.isArray(a)?a.map(function(a){return r(c,e-1,a)}):c(a)}function m(c,e,a){if(2===arguments.length)return m.bind(null,c,e);if(!a)return a;a=r(c,e,a);for(var g=e,b=a;0<g&&Array.isArray(b);)g--,b=b[0];
if(void 0!==b)for(b=0;b<g;b++)a=[a];return a}function v(e,a){if(2===arguments.length)return v(e).call(null,a);var g={},b=[],u=[],d;for(d in e.typeMap){var m=e.typeMap[d];g[d]=x(m);b.push(m&&m.prototype&&m.prototype.declaredClass||"unknown");u.push(d)}var p="string"===typeof e.key?function(c){return c[e.key]}:e.key;return function(a){if(e.base&&!f(e.base,a))return a;var A=p(a)||e.defaultKeyValue,d=g[A];if(!d)return c.error("Accessor#set","Invalid property value, value needs to be one of "+("'"+b.join("', '")+
"'")+", or a plain object that can auto-cast (having .type \x3d "+("'"+u.join("', '")+"'")+")"),null;if(!f(e.typeMap[A],a))return a;if("string"!==typeof e.key||l(a))return d(a);var A={},m;for(m in a)m!==e.key&&(A[m]=a[m]);return d(A)}}Object.defineProperty(b,"__esModule",{value:!0});var c=h.getLogger("esri.core.Accessor");b.isInstanceOf=t;b.ensureDate=q;b.ensureBoolean=k;b.ensureString=n;b.ensureNumber=p;b.ensureInteger=d;b.isClassedType=l;b.requiresType=f;b.ensureClass=z;b.ensureType=x;b.ensureArrayTyped=
w;b.ensureArray=function(c,e){return 1===arguments.length?w(x.bind(null,c)):w(x.bind(null,c),e)};b.ensureNArrayTyped=m;b.ensureNArray=function(c,e,a){return 2===arguments.length?m(x.bind(null,c),e):m(x.bind(null,c),e,a)};b.ensureOneOfType=v;var e=function(){return function(){}}();b.Integer=e;b.default=x})},"esri/core/accessorSupport/metadata":function(){define(["require","exports"],function(a,b){function h(a){return null!=a.__accessorMetadata__}function t(a){return h(a)&&null!=q(a).properties}function q(a){a.__accessorMetadata__||
Object.defineProperty(a,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return a.__accessorMetadata__}function k(a){a=q(a);var b=a.properties;b||(b=a.properties={});return b}function n(a,b){var d=q(a);a=d.parameters;a||(a=d.parameters={});d=a[b];d||(d=[],a[b]=d);return d}Object.defineProperty(b,"__esModule",{value:!0});b.hasMetadata=h;b.hasPropertiesMetadata=t;b.hasPropertyMetadata=function(a,b){return t(a)&&null!=k(a)[b]};b.hasParametersMetadata=function(a,b){return h(a)&&
null!=q(a).parameters&&null!=q(a).parameters[b]};b.getMetadata=q;b.getPropertiesMetadata=k;b.getPropertyMetadata=function(a,b){a=k(a);var d=a[b];d||(d=a[b]={});return d};b.setPropertyMetadata=function(a,b,l){k(a)[b]=l};b.getParametersMetadata=n;b.getParameterMetadata=function(a,b,l){var f=n(a,b)[l];f||(n(a,b)[l]=f={index:l});return f}})},"esri/core/accessorSupport/decorators/cast":function(){define(["require","exports","../ensureType","../metadata"],function(a,b,h,t){function q(a){var b="_meta"in
a?h.ensureType(a):a;return function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];a.push(b);return"number"===typeof a[2]?n.apply(this,a):k.apply(this,a)}}function k(a,b,d,k){t.getPropertyMetadata(a,b).cast=k}function n(a,b,d,k){t.getParameterMetadata(a,b,d).cast=k}function p(a){return function(b,d,l){t.getPropertyMetadata(b,a).cast=b[d]}}Object.defineProperty(b,"__esModule",{value:!0});var d=Object.prototype.toString;b.autocastMethod=function(a,b,d){if(t.hasParametersMetadata(a,b)){var f=
t.getParametersMetadata(a,b).filter(function(a){return null!=a.cast});if(f.length){var l=d.value;d.value=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(b=0;b<f.length;b++){var d=f[b];a[d.index]=d.cast(a[d.index])}return l.apply(this,a)};return d}console.warn("Method "+a.declaredClass+"::"+b+" is decorated with @cast but no parameters are decorated")}};b.cast=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(3!==a.length||"string"!==typeof a[1]){if(1===
a.length&&"[object Function]"===d.call(a[0]))return q(a[0]);if(1===a.length&&"string"===typeof a[0])return p(a[0])}}})},"esri/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),function(a,b,h,t,q,k,n,p,d){function l(a){v.has(a)?c.splice(c.indexOf(a),1):v.add(a);c.push(a);e||(e=k.schedule(z))}function f(c){if(!c.removed){var e=c.callback,a=c.path,g=c.oldValue,b=c.target,u=n.valueOf(b,c.propertyPath,!0);t.equals(g,
u)||(c.oldValue=u,e.call(b,u,g,a,b))}}function z(){if(e){e=null;var a=c;c=m.acquire();v.clear();for(var b=m.acquire(),d=0;d<a.length;d++){var l=a[d];f(l);l.removed&&b.push(l)}for(d=0;d<c.length;d++)l=c[d],l.removed&&(b.push(l),v.delete(l),c.splice(d,1),--d);for(d=0;d<b.length;d++)r.pool.release(b[d]);m.release(a);m.release(b);g.forEach(function(c){return c()})}}function y(c,e,a){var g=p.parse(c,e,a,function(c,e,a){var b=n.valueOf(c,e,!0),u,A=d.wire(c,e,function(c,e){c.__accessor__.destroyed?g.remove():
(u||(u=r.pool.acquire(c,e,b,a),b=null),l(u))});return{remove:p.once(function(){A.remove();u&&(u.removed=!0,l(u),u=null);g=A=b=null})}});return g}function x(c,e,a){var g=p.parse(c,e,a,function(c,e,a){var b=n.valueOf(c,e,!0),u=!1;return d.wire(c,e,function(c,e){if(c.__accessor__.destroyed)g.remove();else if(!u){u=!0;var A=n.valueOf(c,e,!0);t.equals(b,A)||a.call(c,A,b,e,c);b=n.valueOf(c,e,!0);u=!1}})});return g}function w(c,e,a,g){void 0===g&&(g=!1);return!c.__accessor__||c.__accessor__.destroyed?{remove:function(){}}:
g?x(c,e,a):y(c,e,a)}Object.defineProperty(b,"__esModule",{value:!0});var r=function(){function c(c,e,a,g){this.target=c;this.path=e;this.oldValue=a;this.callback=g;this.removed=!1;this.propertyPath=p.pathToStringOrArray(e)}c.prototype.release=function(){this.target=this.path=this.propertyPath=this.callback=this.oldValue=null;this.removed=!0};c.pool=new q(c,!0);return c}(),m=new h,v=new Set,c=m.acquire(),e;b.dispatchTarget=function(e){for(var a=m.copy(c),g=0;g<a.length;g++){var b=a[g];b.target===e&&
(f(b),v.delete(b),c.splice(c.indexOf(b),1))}};b.removeTarget=function(e){for(var a=0;a<c.length;a++){var g=c[a];g.target===e&&(g.removed=!0)}};b.dispatch=z;var g=new Set;b.afterDispatch=function(c){g.add(c);return{remove:function(){g.delete(c)}}};b.watch=w;b.isValueInUse=function(e){return c.some(function(c){return c.oldValue===e})};b.default=w})},"esri/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(a,b,h){function t(a){a.length=0}var q=Array.prototype.splice;a=function(){function a(a,
b){void 0===a&&(a=50);void 0===b&&(b=50);this._pool=new h(Array,!1,t,b,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.copy=function(a){var b=this.acquire();a.unshift(0,0);q.apply(b,a);a.splice(0,2);return b};a.prototype.release=function(a){this._pool.release(a)};a.acquire=function(){return k.acquire()};a.copy=function(a){return k.copy(a)};a.release=function(a){return k.release(a)};return a}();var k=new a(100);return a})},"esri/core/ObjectPool":function(){define(["require",
"exports"],function(a,b){var h=function(){return function(){}}();return function(){function a(a,b,h,p,d){void 0===p&&(p=1);void 0===d&&(d=0);this.classConstructor=a;this.acquireFunctionOrWithConstructor=b;this.releaseFunction=h;this.growthSize=p;!0===b?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof b&&(this.acquireFunction=b);this._pool=Array(d);this._set=new Set;this._initialSize=d;for(a=0;a<d;a++)this._pool[a]=new this.classConstructor;this.growthSize=Math.max(p,1)}a.prototype.acquire=
function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];b=this.classConstructor||h;if(0===this._pool.length)for(var n=this.growthSize,p=0;p<n;p++)this._pool[p]=new b;b=this._pool.shift();this.acquireFunction?this.acquireFunction.apply(this,[b].concat(a)):b&&b.acquire&&"function"===typeof b.acquire&&b.acquire.apply(b,a);this._set.delete(b);return b};a.prototype.release=function(a){a&&!this._set.has(a)&&(this.releaseFunction?this.releaseFunction(a):a&&a.release&&"function"===typeof a.release&&
a.release(),this._pool.push(a),this._set.add(a))};a.prototype.prune=function(){if(!(this._pool.length<=this._initialSize))for(var a;this._initialSize>this._pool.length;)a=this._pool.shift(),this._set.delete(a),a.dispose&&"function"===typeof a.dispose&&a.dispose()};a.prototype._constructorAcquireFunction=function(a){for(var b=[],h=1;h<arguments.length;h++)b[h-1]=arguments[h];(p=this.classConstructor).call.apply(p,[a].concat(b));var p};return a}()})},"esri/core/scheduling":function(){define(["require",
"exports","./nextTick","./now","./requestAnimationFrame"],function(a,b,h,t,q){function k(c){void 0===c&&(c=b.now());b.debug.rafId=null;0<m.length&&(b.debug.rafId=n());c=b.now();0>y&&(y=c);var a=c-y;y=c;for(var e=0;e<m.length;e++){var A=m[e];-1!==A.epoch&&(A.dt=a)}for(e=0;e<w.length;e++)for(var a=w[e],d=v[a],f=0;f<d.length;f++)A=d[f],A.paused||A.removed||(0===e&&A.ticks++,-1===A.epoch&&(A.epoch=c),x.time=c,x.deltaTime=A.dt,x.elapsedFrameTime=b.now()-c,x.spendInTask=c-A.epoch,A.phases[a].call(A,x));
p()}function n(){return b.debug.requestNextFrame?b.debug.requestNextFrame(l):l()}function p(){for(var c=0;c<m.length;){var a=m[c];c++;if(a.removed){m.splice(c-1,1);for(var b=0;b<w.length;b++){var A=w[b];if(a.phases[A]){var A=v[A],d=A.indexOf(a);-1!==d&&A.splice(d,1)}}}}}function d(){for(;r.length;){var c=r.shift();c.isActive&&(c.isActive=!1,c.callback())}b.debug.willDispatch=!1}function l(){return q(k)}Object.defineProperty(b,"__esModule",{value:!0});b.now=t;var f=function(){return function(c){this.phases=
c;this.paused=!1;this.pausedAt=0;this.epoch=-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),z=function(){function c(c){this.callback=c;this.isActive=!0}c.prototype.remove=function(){this.isActive=!1};return c}(),y=-1,x={time:0,deltaTime:0,elapsedFrameTime:0,spendInTask:0},w=["prepare","preRender","render","postRender","update"],r=[],m=[],v={prepare:[],preRender:[],render:[],postRender:[],update:[]},c=function(){function c(c){this._task=c}c.prototype.remove=function(){this._task.removed=!0};c.prototype.pause=
function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=b.now())};c.prototype.resume=function(){this._task.paused&&(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=b.now()-this._task.pausedAt))};return c}();b.FrameTaskHandle=c;b.debug={frameTasks:m,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(c){void 0===c&&(c=!1);for(var a=0;a<m.length;a++)m[a].removed=!0;c&&p()},dispatch:d,frame:k};b.schedule=function(c){c=new z(c);r.push(c);b.debug.willDispatch||
(b.debug.willDispatch=!0,h(d));return c};b.addFrameTask=function(a){var e=new f(a);m.push(e);for(var u=0,A=w;u<A.length;u++){var d=A[u];a[d]&&v[d].push(e)}b.debug.rafId||(y=-1,b.debug.rafId=n());return new c(e)};b.requestNextFrame=n})},"esri/core/nextTick":function(){define(["require","exports","./global"],function(a,b,h){function t(){if(h.postMessage&&!h.importScripts){var a=h.onmessage,b=!0;h.onmessage=function(){b=!1};h.postMessage("","*");h.onmessage=a;return b}return!1}var q=h.MutationObserver||
h.WebKitMutationObserver;return function(){var a;if(h.process&&h.process.nextTick)a=function(a){h.process.nextTick(a)};else if(h.Promise)a=function(a){h.Promise.resolve().then(a)};else if(q){var b=[],p=document.createElement("div");(new q(function(){for(;0<b.length;)b.shift()()})).observe(p,{attributes:!0});a=function(a){b.push(a);p.setAttribute("queueStatus","1")}}else if(t()){var d=[];h.addEventListener("message",function(a){if(a.source===h&&"esri-nexttick-message"===a.data)for(a.stopPropagation();d.length;)d.shift()()},
!0);a=function(a){d.push(a);h.postMessage("esri-nexttick-message","*")}}else a=h.setImmediate?function(a){return h.setImmediate(a)}:function(a){return h.setTimeout(a,0)};return a}()})},"esri/core/now":function(){define(["require","exports","./global"],function(a,b,h){return function(){var a=h.performance||{};if(a.now)return function(){return a.now()};if(a.webkitNow)return function(){return a.webkitNow()};if(a.mozNow)return function(){return a.mozNow()};if(a.msNow)return function(){return a.msNow()};
if(a.oNow)return function(){return a.oNow()};var b;b=a.timing&&a.timing.navigationStart?a.timing.navigationStart:Date.now();return function(){return Date.now()-b}}()})},"esri/core/requestAnimationFrame":function(){define(["require","exports","./global","./now"],function(a,b,h,t){var q=t();a=h.requestAnimationFrame;if(!a){b=["ms","moz","webkit","o"];for(var k=0;k<b.length&&!a;++k)a=h[b[k]+"RequestAnimationFrame"];a||(a=function(a){var b=t(),d=Math.max(0,16-(b-q)),l=h.setTimeout(function(){a(t())},
d);q=b+d;return l})}return a})},"esri/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),function(a,b,h,t,q,k,n,p,d,l,f){function z(a){for(var d in a)b.hasOwnProperty(d)||(b[d]=a[d])}Object.defineProperty(b,"__esModule",{value:!0});z(h);z(t);z(q);z(k);z(n);z(p);z(d);z(l);z(f)})},"esri/core/accessorSupport/decorators/aliasOf":function(){define(["require",
"exports","../metadata"],function(a,b,h){Object.defineProperty(b,"__esModule",{value:!0});b.aliasOf=function(a){return function(b,k){h.getPropertyMetadata(b,k).aliasOf=a}}})},"esri/core/accessorSupport/decorators/autoDestroy":function(){define(["require","exports","../metadata"],function(a,b,h){Object.defineProperty(b,"__esModule",{value:!0});b.autoDestroy=function(){return function(a,b,k){h.getMetadata(a).autoDestroy=!0;return a[b]}}})},"esri/core/accessorSupport/decorators/declared":function(){define(["require",
"exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.declared=function(a){for(var b=[],h=1;h<arguments.length;h++)b[h-1]=arguments[h];h=function(){return this||{}};h.__bases__=[a].concat(b);return h}})},"esri/core/accessorSupport/decorators/property":function(){define("require exports dojo/has ../../lang ../../Logger ../metadata".split(" "),function(a,b,h,t,q,k){Object.defineProperty(b,"__esModule",{value:!0});q.getLogger("esri.core.accessorSupport.decorators.property");b.property=
function(a){void 0===a&&(a={});return function(b,d){var l=b.constructor.prototype;if(l!==Function.prototype){(b=Object.getOwnPropertyDescriptor(b,d))&&(b.get||b.set)?(a=t.clone(a),b.set&&(a.set=b.set),b.get&&(a.get=b.get)):b&&b.hasOwnProperty("value")&&(a=t.clone(a),a.value=b.value);d=k.getPropertyMetadata(l,d);for(var f in a)l=a[f],Array.isArray(l)?d[f]=(d[f]||[]).concat(l):d[f]=l}}};b.propertyJSONMeta=function(a,b,d){a=k.getPropertyMetadata(a.constructor.prototype,d);a.json||(a.json={});a=a.json;
void 0!==b&&(a.origins||(a.origins={}),a.origins[b]||(a.origins[b]={}),a=a.origins[b]);return a}})},"esri/core/accessorSupport/decorators/reader":function(){define(["require","exports","dojo/_base/lang","./property"],function(a,b,h,t){Object.defineProperty(b,"__esModule",{value:!0});b.reader=function(a,b,n){var k,d;void 0===b||Array.isArray(b)?(d=a,n=b,k=[void 0]):(d=b,k=Array.isArray(a)?a:[a]);return function(a,b,p){var f=a.constructor.prototype;k.forEach(function(l){l=t.propertyJSONMeta(a,l,d);
l.read&&"object"!==typeof l.read&&(l.read={});h.setObject("read.reader",f[b],l);n&&(l.read.source=(l.read.source||[]).concat(n))})}}})},"esri/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});b.shared=function(a){return function(b,h){b[h]=a}}})},"esri/core/accessorSupport/decorators/subclass":function(){define(["require","exports","../../declare","../metadata"],function(a,b,h,t){function q(a,b){a.read&&("function"===
typeof a.read?b.push(a.read):"object"===typeof a.read&&a.read.reader&&b.push(a.read.reader))}function k(a,b){a.write&&("function"===typeof a.write?b.push(a.write):"object"===typeof a.write&&a.write.writer&&b.push(a.write.writer))}function n(a){var b=[];a=t.getPropertiesMetadata(a.prototype);if(!a)return b;for(var d in a){var f=a[d];f.cast&&b.push(f.cast);f.copy&&b.push(f.copy);if(f=f.json)if(q(f,b),k(f,b),f=f.origins)for(var l in f){var h=f[l];q(h,b);k(h,b)}}return b}function p(a){var b={values:{},
descriptors:{}},d=["__bases__"],f=t.getPropertiesMetadata(a.prototype),h=n(a);Object.getOwnPropertyNames(a.prototype).filter(function(b){return-1!==d.indexOf(b)||f&&f.hasOwnProperty(b)||!l(Object.getOwnPropertyDescriptor(a.prototype,b))&&-1!==h.indexOf(a.prototype[b])?!1:!0}).forEach(function(d){var m=Object.getOwnPropertyDescriptor(a.prototype,d);l(m)?b.descriptors[d]=m:b.values[d]=a.prototype[d]});return b}function d(a){var b=Object.getOwnPropertyNames(a),d=Object.getPrototypeOf(a.prototype).constructor,
f=Object.getOwnPropertyNames(Function);f.push("__bases__");var h=Object.getOwnPropertyNames(d),k={values:{},descriptors:{}};b.filter(function(b){return-1!==f.indexOf(b)?!1:-1===h.indexOf(b)||d[b]!==a[b]?!0:!1}).forEach(function(b){var d=Object.getOwnPropertyDescriptor(a,b);l(d)?k.descriptors[b]=d:k.values[b]=a[b]});return k}function l(a){return a&&!(!a.get&&!a.set)}Object.defineProperty(b,"__esModule",{value:!0});b.subclass=function(a){return function(b){var f=p(b),l=d(b);null!=a&&(f.values.declaredClass=
a);b=h(b.__bases__,f.values);Object.defineProperties(b.prototype,f.descriptors);for(var k in l.values)b[k]=l.values[k];Object.defineProperties(b,l.descriptors);return b}}})},"esri/core/accessorSupport/decorators/writer":function(){define(["require","exports","dojo/_base/lang","./property"],function(a,b,h,t){Object.defineProperty(b,"__esModule",{value:!0});b.writer=function(a,b,n){var k,d;void 0===b?(d=a,k=[void 0]):"string"!==typeof b?(d=a,k=[void 0],n=b):(d=b,k=Array.isArray(a)?a:[a]);return function(a,
b,p){var f=a.constructor.prototype;k.forEach(function(l){l=t.propertyJSONMeta(a,l,d);l.write&&"object"!==typeof l.write&&(l.write={});n&&h.setObject("write.target",n,l);h.setObject("write.writer",f[b],l)})}}})},"esri/core/accessorSupport/read":function(){define("require exports dojo/_base/lang ./get ./utils ./extensions/serializableProperty".split(" "),function(a,b,h,t,q,k){function n(a,b,f){void 0===f&&(f=p);for(var d=q.getProperties(a),l=d.metadatas,h={},n=0,r=Object.getOwnPropertyNames(b);n<r.length;n++){var m=
h,v=l,c=r[n],e=b,g=f,u=k.originSpecificReadPropertyDefinition(v[c],g);u&&(!u.read||!1!==u.read.enabled&&!u.read.source)&&(m[c]=!0);for(var A=0,C=Object.getOwnPropertyNames(v);A<C.length;A++){var G=C[A],u=k.originSpecificReadPropertyDefinition(v[G],g),B;a:{B=c;var I=e;if(u&&u.read&&!1!==u.read.enabled&&u.read.source)if(u=u.read.source,"string"===typeof u){if(u===B||-1<u.indexOf(".")&&0===u.indexOf(B)&&t.exists(u,I)){B=!0;break a}}else for(var P=0;P<u.length;P++){var N=u[P];if(N===B||-1<N.indexOf(".")&&
0===N.indexOf(B)&&t.exists(N,I)){B=!0;break a}}B=!1}B&&(m[G]=!0)}}d.setDefaultOrigin(f.origin);r=0;for(m=Object.getOwnPropertyNames(h);r<m.length;r++)n=m[r],c=(v=k.originSpecificReadPropertyDefinition(l[n],f).read)&&v.source,e=void 0,e=c&&"string"===typeof c?t.valueOf(b,c):b[n],v&&v.reader&&(e=v.reader.call(a,e,b,f)),void 0!==e&&d.set(n,e);b=0;for(l=Object.getOwnPropertyNames(l);b<l.length;b++)n=l[b],h[n]||(r=a,m=d,v=f,c=(c=k.originSpecificReadPropertyDefinition(m.metadatas[n],v))&&c.read&&c.read.default,
void 0!==c&&(r="function"===typeof c?c.call(r,n,v):c,void 0!==r&&m.set(n,r)));d.setDefaultOrigin("user")}Object.defineProperty(b,"__esModule",{value:!0});var p={origin:"service"};b.read=n;b.readLoadable=function(a,b,f,k){void 0===k&&(k=p);b=h.mixin({},k,{messages:[]});f(b);b.messages.forEach(function(b){"warning"!==b.type||a.loaded?k&&k.messages.push(b):a.loadWarnings.push(b)})};b.default=n})},"esri/core/accessorSupport/write":function(){define("require exports ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),
function(a,b,h,t,q,k,n){function p(a,b,d,k,p,r){if(!k||!k.write)return!1;var m=a.get(d);if(void 0===m)return!1;if(!p&&k.write.overridePolicy){var f=k.write.overridePolicy.call(a,m,d,r);void 0!==f&&(p=f)}p||(p=k.write);if(!p||!1===p.enabled)return!1;if(null===m){if(p.allowNull)return!0;p.isRequired&&((a=new h("web-document-write:property-required","Missing value for required property '"+d+"' on '"+a.declaredClass+"'",{propertyName:d,target:a}),r)&&r.messages?r.messages.push(a):a&&!r&&l.error(a.name,
a.message));return!1}return!p.ignoreOrigin&&r&&r.origin&&b.store.originOf(d)<q.nameToId(r.origin)?!1:!0}function d(a,b,d){if(a&&"function"===typeof a.toJSON&&(!a.toJSON.isDefaultToJSON||!a.write))return k.merge(b,a.toJSON());var f=k.getProperties(a),l=f.metadatas,h;for(h in l){var m=n.originSpecificWritePropertyDefinition(l[h],d);if(p(a,f,h,m,null,d)){var v=a.get(h),c={};m.write.writer.call(a,v,c,"string"===typeof m.write.target?m.write.target:h,d);m=c;0<Object.keys(m).length&&(b=k.merge(b,m),d&&
d.writtenProperties&&d.writtenProperties.push({target:a,propName:h,oldOrigin:q.idToReadableName(f.store.originOf(h)),newOrigin:d.origin}))}}return b}Object.defineProperty(b,"__esModule",{value:!0});var l=t.getLogger("esri.core.accessorSupport.write");b.willPropertyWrite=function(a,b,d,l){var f=k.getProperties(a),h=n.originSpecificWritePropertyDefinition(f.metadatas[b],l);return h?p(a,f,b,h,d,l):!1};b.write=d;b.default=d})},"esri/geometry/support/spatialReferenceUtils":function(){define(["require",
"exports","./WKIDUnitConversion"],function(a,b,h){function t(a){return a.wkid&&!0===q[a.wkid]}Object.defineProperty(b,"__esModule",{value:!0});var q={102113:!0,102100:!0,3857:!0,3785:!0},k={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};a=[-2.0037508342788905E7,2.0037508342788905E7];var n=[-2.0037508342787E7,2.0037508342787E7],p={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:a,origin:n,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:a,origin:n,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:a,origin:n,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:a,origin:n,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};b.equals=function(a,b){if(b){if(a===b)return!0;if(null!=a.wkid||null!=b.wkid)return a.wkid===b.wkid||t(a)&&t(b)||null!=b.latestWkid&&a.wkid===b.latestWkid||null!=a.latestWkid&&b.wkid===a.latestWkid;if(a.wkt&&b.wkt)return a.wkt.toUpperCase()===b.wkt.toUpperCase()}return!1};b.getInfo=function(a){return a.wkid?p[a.wkid]:null};b.isGeographic=function(a){return a.wkid?null==h[a.wkid]:a.wkt?!!/^\s*GEOGCS/i.test(a.wkt):!1};b.isWGS84=function(a){return 4326===
a.wkid};b.isWebMercator=t;b.isWrappable=function(a){return a.wkid&&!0===k[a.wkid]}})},"esri/geometry/support/WKIDUnitConversion":function(){define([],function(){var a,b={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8058:0,8059:0,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,
8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,
26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,
54034:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,
103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,
103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,
103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,
103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(a=2E3;2045>=a;a++)b[a]=0;for(a=2056;2065>=a;a++)b[a]=0;for(a=2067;2135>=a;a++)b[a]=0;for(a=2137;2154>=a;a++)b[a]=0;for(a=2161;2170>=a;a++)b[a]=0;for(a=2172;2193>=a;a++)b[a]=0;for(a=2195;2198>=a;a++)b[a]=0;for(a=2200;2203>=a;a++)b[a]=0;for(a=2205;2217>=a;a++)b[a]=0;for(a=2222;2224>=a;a++)b[a]=1;for(a=2225;2250>=a;a++)b[a]=2;
for(a=2251;2253>=a;a++)b[a]=1;for(a=2257;2264>=a;a++)b[a]=2;for(a=2274;2279>=a;a++)b[a]=2;for(a=2280;2282>=a;a++)b[a]=1;for(a=2283;2289>=a;a++)b[a]=2;for(a=2290;2292>=a;a++)b[a]=0;for(a=2308;2313>=a;a++)b[a]=0;for(a=2315;2491>=a;a++)b[a]=0;for(a=2494;2866>=a;a++)b[a]=0;for(a=2867;2869>=a;a++)b[a]=1;for(a=2870;2888>=a;a++)b[a]=2;for(a=2891;2895>=a;a++)b[a]=2;for(a=2896;2898>=a;a++)b[a]=1;for(a=2902;2908>=a;a++)b[a]=2;for(a=2915;2920>=a;a++)b[a]=2;for(a=2921;2923>=a;a++)b[a]=1;for(a=2924;2930>=a;a++)b[a]=
2;for(a=2931;2962>=a;a++)b[a]=0;for(a=2964;2968>=a;a++)b[a]=2;for(a=2969;2973>=a;a++)b[a]=0;for(a=2975;2991>=a;a++)b[a]=0;for(a=2995;3051>=a;a++)b[a]=0;for(a=3054;3079>=a;a++)b[a]=0;for(a=3081;3088>=a;a++)b[a]=0;for(a=3092;3101>=a;a++)b[a]=0;for(a=3106;3138>=a;a++)b[a]=0;for(a=3146;3151>=a;a++)b[a]=0;for(a=3153;3166>=a;a++)b[a]=0;for(a=3168;3172>=a;a++)b[a]=0;for(a=3174;3203>=a;a++)b[a]=0;for(a=3294;3358>=a;a++)b[a]=0;for(a=3367;3403>=a;a++)b[a]=0;for(a=3408;3416>=a;a++)b[a]=0;for(a=3417;3438>=a;a++)b[a]=
2;for(a=3441;3446>=a;a++)b[a]=2;for(a=3447;3450>=a;a++)b[a]=0;for(a=3451;3459>=a;a++)b[a]=2;for(a=3460;3478>=a;a++)b[a]=0;for(a=3554;3559>=a;a++)b[a]=0;for(a=3560;3570>=a;a++)b[a]=2;for(a=3571;3581>=a;a++)b[a]=0;for(a=3594;3597>=a;a++)b[a]=0;for(a=3601;3604>=a;a++)b[a]=0;for(a=3637;3639>=a;a++)b[a]=0;for(a=3665;3667>=a;a++)b[a]=0;for(a=3693;3695>=a;a++)b[a]=0;for(a=3701;3727>=a;a++)b[a]=0;for(a=3728;3739>=a;a++)b[a]=2;for(a=3740;3751>=a;a++)b[a]=0;for(a=3753;3760>=a;a++)b[a]=2;for(a=3761;3773>=a;a++)b[a]=
0;for(a=3775;3777>=a;a++)b[a]=0;for(a=3779;3781>=a;a++)b[a]=0;for(a=3783;3785>=a;a++)b[a]=0;for(a=3788;3791>=a;a++)b[a]=0;for(a=3797;3802>=a;a++)b[a]=0;for(a=3814;3816>=a;a++)b[a]=0;for(a=3825;3829>=a;a++)b[a]=0;for(a=3832;3841>=a;a++)b[a]=0;for(a=3844;3852>=a;a++)b[a]=0;for(a=3873;3885>=a;a++)b[a]=0;for(a=3890;3893>=a;a++)b[a]=0;for(a=3907;3912>=a;a++)b[a]=0;for(a=3942;3950>=a;a++)b[a]=0;for(a=3968;3970>=a;a++)b[a]=0;for(a=3973;3976>=a;a++)b[a]=0;for(a=3986;3989>=a;a++)b[a]=0;for(a=3994;3997>=a;a++)b[a]=
0;for(a=4048;4051>=a;a++)b[a]=0;for(a=4056;4063>=a;a++)b[a]=0;for(a=4093;4096>=a;a++)b[a]=0;for(a=4390;4398>=a;a++)b[a]=0;for(a=4399;4413>=a;a++)b[a]=2;for(a=4418;4433>=a;a++)b[a]=2;for(a=4455;4457>=a;a++)b[a]=2;for(a=4484;4489>=a;a++)b[a]=0;for(a=4491;4554>=a;a++)b[a]=0;for(a=4568;4589>=a;a++)b[a]=0;for(a=4652;4656>=a;a++)b[a]=0;for(a=4766;4800>=a;a++)b[a]=0;for(a=5014;5016>=a;a++)b[a]=0;for(a=5069;5072>=a;a++)b[a]=0;for(a=5105;5130>=a;a++)b[a]=0;for(a=5173;5188>=a;a++)b[a]=0;for(a=5253;5259>=a;a++)b[a]=
0;for(a=5269;5275>=a;a++)b[a]=0;for(a=5292;5311>=a;a++)b[a]=0;for(a=5329;5331>=a;a++)b[a]=0;for(a=5343;5349>=a;a++)b[a]=0;for(a=5355;5357>=a;a++)b[a]=0;for(a=5387;5389>=a;a++)b[a]=0;for(a=5459;5463>=a;a++)b[a]=0;for(a=5479;5482>=a;a++)b[a]=0;for(a=5518;5520>=a;a++)b[a]=0;for(a=5530;5539>=a;a++)b[a]=0;for(a=5550;5552>=a;a++)b[a]=0;for(a=5562;5583>=a;a++)b[a]=0;for(a=5623;5625>=a;a++)b[a]=2;for(a=5631;5639>=a;a++)b[a]=0;for(a=5649;5653>=a;a++)b[a]=0;for(a=5663;5680>=a;a++)b[a]=0;for(a=5682;5685>=a;a++)b[a]=
0;for(a=5875;5877>=a;a++)b[a]=0;for(a=5921;5940>=a;a++)b[a]=0;for(a=6050;6125>=a;a++)b[a]=0;for(a=6244;6275>=a;a++)b[a]=0;for(a=6328;6348>=a;a++)b[a]=0;for(a=6350;6356>=a;a++)b[a]=0;for(a=6366;6372>=a;a++)b[a]=0;for(a=6381;6387>=a;a++)b[a]=0;for(a=6393;6404>=a;a++)b[a]=0;for(a=6480;6483>=a;a++)b[a]=0;for(a=6511;6514>=a;a++)b[a]=0;for(a=6579;6581>=a;a++)b[a]=0;for(a=6619;6624>=a;a++)b[a]=0;for(a=6625;6627>=a;a++)b[a]=2;for(a=6628;6632>=a;a++)b[a]=0;for(a=6634;6637>=a;a++)b[a]=0;for(a=6669;6692>=a;a++)b[a]=
0;for(a=6707;6709>=a;a++)b[a]=0;for(a=6720;6723>=a;a++)b[a]=0;for(a=6732;6738>=a;a++)b[a]=0;for(a=6931;6933>=a;a++)b[a]=0;for(a=6956;6959>=a;a++)b[a]=0;for(a=7005;7007>=a;a++)b[a]=0;for(a=7057;7070>=a;a++)b[a]=2;for(a=7074;7082>=a;a++)b[a]=0;for(a=7109;7118>=a;a++)b[a]=0;for(a=7119;7127>=a;a++)b[a]=1;for(a=7374;7376>=a;a++)b[a]=0;for(a=7528;7586>=a;a++)b[a]=0;for(a=7587;7645>=a;a++)b[a]=2;for(a=7755;7787>=a;a++)b[a]=0;for(a=7791;7795>=a;a++)b[a]=0;for(a=7799;7801>=a;a++)b[a]=0;for(a=7803;7805>=a;a++)b[a]=
0;for(a=7825;7831>=a;a++)b[a]=0;for(a=7845;7859>=a;a++)b[a]=0;for(a=8013;8032>=a;a++)b[a]=0;for(a=20002;20032>=a;a++)b[a]=0;for(a=20062;20092>=a;a++)b[a]=0;for(a=20135;20138>=a;a++)b[a]=0;for(a=20248;20258>=a;a++)b[a]=0;for(a=20348;20358>=a;a++)b[a]=0;for(a=20436;20440>=a;a++)b[a]=0;for(a=20822;20824>=a;a++)b[a]=0;for(a=20934;20936>=a;a++)b[a]=0;for(a=21035;21037>=a;a++)b[a]=0;for(a=21095;21097>=a;a++)b[a]=0;for(a=21148;21150>=a;a++)b[a]=0;for(a=21413;21423>=a;a++)b[a]=0;for(a=21473;21483>=a;a++)b[a]=
0;for(a=21780;21782>=a;a++)b[a]=0;for(a=21891;21894>=a;a++)b[a]=0;for(a=21896;21899>=a;a++)b[a]=0;for(a=22171;22177>=a;a++)b[a]=0;for(a=22181;22187>=a;a++)b[a]=0;for(a=22191;22197>=a;a++)b[a]=0;for(a=22234;22236>=a;a++)b[a]=0;for(a=22521;22525>=a;a++)b[a]=0;for(a=22991;22994>=a;a++)b[a]=0;for(a=23028;23038>=a;a++)b[a]=0;for(a=23830;23853>=a;a++)b[a]=0;for(a=23866;23872>=a;a++)b[a]=0;for(a=23877;23884>=a;a++)b[a]=0;for(a=23886;23894>=a;a++)b[a]=0;for(a=23946;23948>=a;a++)b[a]=0;for(a=24311;24313>=
a;a++)b[a]=0;for(a=24342;24347>=a;a++)b[a]=0;for(a=24370;24374>=a;a++)b[a]=10;for(a=24375;24381>=a;a++)b[a]=0;for(a=24718;24721>=a;a++)b[a]=0;for(a=24817;24821>=a;a++)b[a]=0;for(a=24877;24882>=a;a++)b[a]=0;for(a=24891;24893>=a;a++)b[a]=0;for(a=25391;25395>=a;a++)b[a]=0;for(a=25828;25838>=a;a++)b[a]=0;for(a=26191;26195>=a;a++)b[a]=0;for(a=26391;26393>=a;a++)b[a]=0;for(a=26701;26722>=a;a++)b[a]=0;for(a=26729;26799>=a;a++)b[a]=2;for(a=26801;26803>=a;a++)b[a]=2;for(a=26811;26813>=a;a++)b[a]=2;for(a=26847;26870>=
a;a++)b[a]=2;for(a=26891;26899>=a;a++)b[a]=0;for(a=26901;26923>=a;a++)b[a]=0;for(a=26929;26946>=a;a++)b[a]=0;for(a=26948;26998>=a;a++)b[a]=0;for(a=27037;27040>=a;a++)b[a]=0;for(a=27205;27232>=a;a++)b[a]=0;for(a=27258;27260>=a;a++)b[a]=0;for(a=27391;27398>=a;a++)b[a]=0;for(a=27561;27564>=a;a++)b[a]=0;for(a=27571;27574>=a;a++)b[a]=0;for(a=27581;27584>=a;a++)b[a]=0;for(a=27591;27594>=a;a++)b[a]=0;for(a=28191;28193>=a;a++)b[a]=0;for(a=28348;28358>=a;a++)b[a]=0;for(a=28402;28432>=a;a++)b[a]=0;for(a=28462;28492>=
a;a++)b[a]=0;for(a=29118;29122>=a;a++)b[a]=0;for(a=29168;29172>=a;a++)b[a]=0;for(a=29177;29185>=a;a++)b[a]=0;for(a=29187;29195>=a;a++)b[a]=0;for(a=29900;29903>=a;a++)b[a]=0;for(a=30161;30179>=a;a++)b[a]=0;for(a=30491;30494>=a;a++)b[a]=0;for(a=30729;30732>=a;a++)b[a]=0;for(a=31251;31259>=a;a++)b[a]=0;for(a=31265;31268>=a;a++)b[a]=0;for(a=31275;31279>=a;a++)b[a]=0;for(a=31281;31297>=a;a++)b[a]=0;for(a=31461;31469>=a;a++)b[a]=0;for(a=31491;31495>=a;a++)b[a]=0;for(a=31917;31922>=a;a++)b[a]=0;for(a=31965;32E3>=
a;a++)b[a]=0;for(a=32001;32003>=a;a++)b[a]=2;for(a=32005;32031>=a;a++)b[a]=2;for(a=32033;32060>=a;a++)b[a]=2;for(a=32064;32067>=a;a++)b[a]=2;for(a=32074;32077>=a;a++)b[a]=2;for(a=32081;32086>=a;a++)b[a]=0;for(a=32107;32130>=a;a++)b[a]=0;for(a=32133;32158>=a;a++)b[a]=0;for(a=32164;32167>=a;a++)b[a]=2;for(a=32180;32199>=a;a++)b[a]=0;for(a=32201;32260>=a;a++)b[a]=0;for(a=32301;32360>=a;a++)b[a]=0;for(a=32601;32662>=a;a++)b[a]=0;for(a=32664;32667>=a;a++)b[a]=2;for(a=32701;32761>=a;a++)b[a]=0;for(a=53001;53004>=
a;a++)b[a]=0;for(a=53008;53019>=a;a++)b[a]=0;for(a=53021;53032>=a;a++)b[a]=0;for(a=53042;53046>=a;a++)b[a]=0;for(a=53074;53080>=a;a++)b[a]=0;for(a=54001;54004>=a;a++)b[a]=0;for(a=54008;54019>=a;a++)b[a]=0;for(a=54021;54032>=a;a++)b[a]=0;for(a=54042;54046>=a;a++)b[a]=0;for(a=54048;54053>=a;a++)b[a]=0;for(a=54074;54080>=a;a++)b[a]=0;for(a=102001;102040>=a;a++)b[a]=0;for(a=102042;102063>=a;a++)b[a]=0;for(a=102065;102067>=a;a++)b[a]=0;for(a=102070;102117>=a;a++)b[a]=0;for(a=102122;102216>=a;a++)b[a]=
0;for(a=102221;102377>=a;a++)b[a]=0;for(a=102382;102388>=a;a++)b[a]=0;for(a=102389;102398>=a;a++)b[a]=2;for(a=102399;102444>=a;a++)b[a]=0;for(a=102445;102447>=a;a++)b[a]=2;for(a=102448;102458>=a;a++)b[a]=0;for(a=102459;102468>=a;a++)b[a]=2;for(a=102469;102496>=a;a++)b[a]=0;for(a=102500;102519>=a;a++)b[a]=1;for(a=102520;102524>=a;a++)b[a]=0;for(a=102525;102529>=a;a++)b[a]=2;for(a=102530;102568>=a;a++)b[a]=0;for(a=102570;102588>=a;a++)b[a]=0;for(a=102590;102598>=a;a++)b[a]=0;for(a=102601;102603>=a;a++)b[a]=
0;for(a=102605;102628>=a;a++)b[a]=0;for(a=102629;102646>=a;a++)b[a]=2;for(a=102648;102700>=a;a++)b[a]=2;for(a=102701;102703>=a;a++)b[a]=0;for(a=102707;102730>=a;a++)b[a]=2;for(a=102733;102758>=a;a++)b[a]=2;for(a=102767;102900>=a;a++)b[a]=0;for(a=102965;102969>=a;a++)b[a]=0;for(a=102971;102973>=a;a++)b[a]=0;for(a=102975;102989>=a;a++)b[a]=0;for(a=102990;102992>=a;a++)b[a]=1;for(a=102997;103002>=a;a++)b[a]=0;for(a=103003;103008>=a;a++)b[a]=2;for(a=103009;103011>=a;a++)b[a]=0;for(a=103012;103014>=a;a++)b[a]=
2;for(a=103019;103021>=a;a++)b[a]=0;for(a=103022;103024>=a;a++)b[a]=2;for(a=103029;103031>=a;a++)b[a]=0;for(a=103032;103034>=a;a++)b[a]=2;for(a=103065;103068>=a;a++)b[a]=0;for(a=103074;103076>=a;a++)b[a]=0;for(a=103077;103079>=a;a++)b[a]=1;for(a=103080;103082>=a;a++)b[a]=0;for(a=103083;103085>=a;a++)b[a]=2;for(a=103090;103093>=a;a++)b[a]=0;for(a=103097;103099>=a;a++)b[a]=0;for(a=103100;103102>=a;a++)b[a]=2;for(a=103107;103109>=a;a++)b[a]=0;for(a=103110;103112>=a;a++)b[a]=2;for(a=103113;103116>=a;a++)b[a]=
0;for(a=103117;103120>=a;a++)b[a]=2;for(a=103153;103157>=a;a++)b[a]=0;for(a=103158;103162>=a;a++)b[a]=2;for(a=103163;103165>=a;a++)b[a]=0;for(a=103166;103168>=a;a++)b[a]=1;for(a=103169;103171>=a;a++)b[a]=2;for(a=103186;103188>=a;a++)b[a]=0;for(a=103189;103191>=a;a++)b[a]=2;for(a=103192;103195>=a;a++)b[a]=0;for(a=103196;103199>=a;a++)b[a]=2;for(a=103200;103224>=a;a++)b[a]=0;for(a=103225;103227>=a;a++)b[a]=1;for(a=103232;103237>=a;a++)b[a]=0;for(a=103238;103243>=a;a++)b[a]=2;for(a=103244;103246>=a;a++)b[a]=
0;for(a=103247;103249>=a;a++)b[a]=2;for(a=103254;103256>=a;a++)b[a]=0;for(a=103257;103259>=a;a++)b[a]=2;for(a=103264;103266>=a;a++)b[a]=0;for(a=103267;103269>=a;a++)b[a]=2;for(a=103300;103375>=a;a++)b[a]=0;for(a=103381;103383>=a;a++)b[a]=0;for(a=103384;103386>=a;a++)b[a]=1;for(a=103387;103389>=a;a++)b[a]=0;for(a=103390;103392>=a;a++)b[a]=2;for(a=103397;103399>=a;a++)b[a]=0;for(a=103400;103471>=a;a++)b[a]=2;for(a=103476;103478>=a;a++)b[a]=0;for(a=103479;103481>=a;a++)b[a]=2;for(a=103486;103488>=a;a++)b[a]=
0;for(a=103489;103491>=a;a++)b[a]=2;for(a=103492;103495>=a;a++)b[a]=0;for(a=103496;103499>=a;a++)b[a]=2;for(a=103528;103543>=a;a++)b[a]=0;for(a=103544;103548>=a;a++)b[a]=2;for(a=103549;103551>=a;a++)b[a]=0;for(a=103552;103554>=a;a++)b[a]=1;for(a=103555;103557>=a;a++)b[a]=2;for(a=103558;103560>=a;a++)b[a]=0;for(a=103571;103573>=a;a++)b[a]=0;for(a=103574;103576>=a;a++)b[a]=2;for(a=103577;103580>=a;a++)b[a]=0;for(a=103581;103583>=a;a++)b[a]=2;for(a=103600;103694>=a;a++)b[a]=0;for(a=103700;103793>=a;a++)b[a]=
2;for(a=103794;103871>=a;a++)b[a]=0;for(a=103900;103971>=a;a++)b[a]=2;return b})},"esri/views/3d/layers/i3s/I3SGeometryUtil":function(){define("require exports ./I3SBinaryReader ../../support/meshProcessing ../../webgl-engine/lib/gl-matrix ../../webgl-engine/lib/Util".split(" "),function(a,b,h,t,q,k){function n(a,b,d,c,e,g,u){switch(d){case 1:for(d=0;d<u;d++)c[e]=a[b],b+=1,e+=g;break;case 2:for(d=0;d<u;d++)c[e]=a[b],c[e+1]=a[b+1],b+=2,e+=g;break;case 3:for(d=0;d<u;d++)c[e]=a[b],c[e+1]=a[b+1],c[e+
2]=a[b+2],b+=3,e+=g;break;case 4:for(d=0;d<u;d++)c[e]=a[b],c[e+1]=a[b+1],c[e+2]=a[b+2],c[e+3]=a[b+3],b+=4,e+=g;break;default:throw z("Unhandled stride size "+d);}}function p(a,b,d,c,e,g){switch(b){case 1:for(b=0;b<g;b++)d[c]=a,c+=e;break;case 2:for(b=0;b<g;b++)d[c]=a,d[c+1]=a,c+=e;break;case 3:for(b=0;b<g;b++)d[c]=a,d[c+1]=a,d[c+2]=a,c+=e;break;case 4:for(b=0;b<g;b++)d[c]=a,d[c+1]=a,d[c+2]=a,d[c+3]=a,c+=e;break;default:throw z("Unhandled stride size "+b);}}function d(a){switch(a){case 5120:return Int8Array;
case 5126:return Float32Array;case 5124:return Int32Array;case 5122:return Int16Array;case 5121:return Uint8Array;case 5125:return Uint32Array;case 5123:return Uint16Array}throw Error("Unhandled data type: "+a);}function l(a){switch(a){case 5120:return"Int8";case 5126:return"Float32";case 5124:return"Int32";case 5122:return"Int16";case 5121:return"UInt8";case 5125:return"UInt32";case 5123:return"UInt16"}throw Error("Unhandled data type: "+a);}function f(a){return 0<a&&0===a%Uint32Array.BYTES_PER_ELEMENT}
function z(a){return Error("I3SGeometryUtil processing failed: "+a)}Object.defineProperty(b,"__esModule",{value:!0});var y=new Uint8Array(64);b.interleaveGeometryBuffer=function(a,b,v,c,e){void 0===c&&(c=[]);void 0===e&&(e=[]);var g=a.params.vertexAttributes,u=g.position.count;if(!f(v[0].stride))throw z("Layout stride must use "+Uint32Array.BYTES_PER_ELEMENT+"-byte words");var A=new Uint32Array(v[0].stride/Uint32Array.BYTES_PER_ELEMENT*u);v=v.slice(0).sort(function(c,a){return c.offset-a.offset});
a=function(a){if(-1!==e.indexOf(a.name))return"continue";var m=g[a.name],v=d(a.type),h=void 0,C=!1;if(null==m)if(C=c.filter(function(c){return c.name===a.name})[0]){m={valueType:l(a.type),byteOffset:0,count:u,valuesPerElement:a.count};for(h=0;h<y.length;h++)y[h]=C.byteValue;h=y.buffer;C=!0}else throw z("Geometry definition is missing attribute");else h=b;if(l(a.type)!==m.valueType)throw z("Geometry definition type must match attribute type");if(0!==m.byteOffset%Uint32Array.BYTES_PER_ELEMENT||0!==
a.offset%Uint32Array.BYTES_PER_ELEMENT)throw z(a.name+" offset must use "+Uint32Array.BYTES_PER_ELEMENT+"-byte words");if(!f(m.valuesPerElement*v.BYTES_PER_ELEMENT)||!f(a.count*v.BYTES_PER_ELEMENT))throw z(a.name+" data must use "+Uint32Array.BYTES_PER_ELEMENT+"-byte words");var h=new Uint32Array(h),k=m.byteOffset/Uint32Array.BYTES_PER_ELEMENT,m=m.valuesPerElement*v.BYTES_PER_ELEMENT/Uint32Array.BYTES_PER_ELEMENT,v=a.offset/Uint32Array.BYTES_PER_ELEMENT,G=a.stride/Uint32Array.BYTES_PER_ELEMENT;C?
p(h[0],m,A,v,G,u):n(h,k,m,A,v,G,u)};for(var m=0;m<v.length;m++)a(v[m]);return A.buffer};b.processAndInterleaveNormals=function(a,b,d,c,e){if("none"===a){var g=e.normals,u=e.positions;b=e.normalInd;a=e.positionInd;k.assert(e.normalInd.length===e.positionInd.length);e=q.vec3.create();c=q.vec3.create();d=q.vec2.create();for(var A=u.data,f=u.offsetIdx,u=u.strideIdx,m=g.data,v=g.offsetIdx,g=g.strideIdx,l=0;l<a.length;l+=3){var p=a[l],p=f+u*p,n=A[p],r=A[p+1],z=A[p+2],p=a[l+1],p=f+u*p;e[0]=A[p]-n;e[1]=A[p+
1]-r;e[2]=A[p+2]-z;p=a[l+2];p=f+u*p;c[0]=A[p]-n;c[1]=A[p+1]-r;c[2]=A[p+2]-z;q.vec3.cross(e,c,e);k.encodeNormal(e,d);for(n=0;3>n;n++)r=v+g*b[l+n],m[r]=k.encodeInt16(d[0]),m[r+1]=k.encodeInt16(d[1])}}else if(b=h.createTypedView(d,b.params.vertexAttributes.normal),d=e.normals,r="earth-centered"===a?c:null,a=b.length/3,e=d.data,c=d.offsetIdx,d=d.strideIdx,null!=r)for(A=r[0],f=r[1],u=r[2],m=r[4],v=r[5],g=r[6],l=r[8],n=r[9],r=r[10],z=0;z<a;z++){var p=b[3*z],y=b[3*z+1],t=b[3*z+2];x[0]=A*p+f*y+u*t;x[1]=m*
p+v*y+g*t;x[2]=l*p+n*y+r*t;k.encodeNormal(x,w);e[c+z*d]=k.encodeInt16(w[0]);e[c+z*d+1]=k.encodeInt16(w[1])}else for(z=0;z<a;z++)x[0]=b[3*z],x[1]=b[3*z+1],x[2]=b[3*z+2],k.encodeNormal(x,w),e[c+z*d]=k.encodeInt16(w[0]),e[c+z*d+1]=k.encodeInt16(w[1])};b.extractPositionData=function(a,b,d){b=b[0];if(null==b||"position"!==b.name||5126!==b.type)return null;var c=new Float32Array(a),e=b.stride/4,g=3*c.length/e,u=new Float32Array(g);for(a=0;a<g/3;a++)u[3*a]=c[a*e+b.offset],u[3*a+1]=c[a*e+b.offset+1],u[3*
a+2]=c[a*e+b.offset+2];b=t.deduplicate(u.buffer,3);a=65536>b.uniqueCount;if(d)for(c=new (a?Uint16Array:Uint32Array)(d.length),a=0;a<d.length;a++)c[a]=b.indices[d[a]];else c=a?new Uint16Array(b.indices):b.indices;return{data:new Float32Array(b.buffer),indices:c}};var x=q.vec3.create(),w=q.vec2.create()})},"esri/views/3d/layers/i3s/I3SBinaryReader":function(){define("require exports dojo/_base/lang ../../../../core/Error ../../../../core/Logger ./LEPCC".split(" "),function(a,b,h,t,q,k){function n(a,
b,c){for(var e="",g=0;g<c;){var u=a[b+g];if(128>u)e+=String.fromCharCode(u),g++;else if(192<=u&&224>u){if(g+1>=c)throw new t("utf8-decode-error","UTF-8 Decode failed. Two byte character was truncated.");var d=a[b+g+1],u=(u&31)<<6|d&63,e=e+String.fromCharCode(u),g=g+2}else if(224<=u&&240>u){if(g+2>=c)throw new t("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");var d=a[b+g+1],f=a[b+g+2],u=(u&15)<<12|(d&63)<<6|f&63,e=e+String.fromCharCode(u),g=g+3}else if(240<=u&&248>u){if(g+
3>=c)throw new t("utf8-decode-error","UTF-8 Decode failed. Multi byte character was truncated.");d=a[b+g+1];f=a[b+g+2];u=(u&7)<<18|(d&63)<<12|(f&63)<<6|a[b+g+3]&63;e=65536<=u?e+String.fromCharCode((u-65536>>10)+55296,(u&1023)+56320):e+String.fromCharCode(u);g+=4}else throw new t("utf8-decode-error","UTF-8 Decode failed. Invalid multi byte sequence.");}return e}function p(a,d){for(var c={byteOffset:0,byteCount:0,fields:Object.create(null)},e=0,g=0;g<d.length;g++){var u=d[g],A=u.valueType||u.type;c.fields[u.property]=
(0,b.valueType2ArrayBufferReader[A])(a,e);e+=b.valueType2TypedArrayClassMap[A].BYTES_PER_ELEMENT}c.byteCount=e;return c}function d(a,b,c){var e=[],g,u=0,d;for(d=0;d<a;d+=1){g=b[d];if(0<g){if(e.push(n(c,u,g-1)),0!==c[u+g-1])throw new t("string-array-error","Invalid string array: missing null termination.");}else e.push(null);u+=g}return e}function l(a,d){return new b.valueType2TypedArrayClassMap[d.valueType](a,d.byteOffset,d.count*d.valuesPerElement)}function f(a,b){return new Uint8Array(a,b.byteOffset,
b.byteCount)}function z(a,b,c){a=null!=b.header?p(a,b.header):{byteOffset:0,byteCount:0,fields:{count:c}};c={header:a,byteOffset:a.byteCount,byteCount:0,entries:Object.create(null)};for(var e=a.byteCount,g=0;g<b.ordering.length;g++){var u=b.ordering[g],d=h.clone(b[u]);d.count=a.fields.count;if("String"===d.valueType){if(d.byteOffset=e,d.byteCount=a.fields[u+"ByteCount"],"UTF-8"!==d.encoding)throw new t("unsupported-encoding","Unsupported String encoding.",{encoding:d.encoding});}else if(x(d.valueType)){var f=
w(d.valueType),e=e+(0!==e%f?f-e%f:0);d.byteOffset=e;d.byteCount=f*d.valuesPerElement*d.count}else throw new t("unsupported-value-type","Unsupported binary valueType",{valueType:d.valueType});e+=d.byteCount;c.entries[u]=d}c.byteCount=e-c.byteOffset;return c}function y(a,b,c){b!==a&&r.error("Invalid "+c+" buffer size\n expected: "+a+", actual: "+b+")");if(b<a)throw new t("buffer-too-small","Binary buffer is too small",{expectedSize:a,actualSize:b});}function x(a){return b.valueType2TypedArrayClassMap.hasOwnProperty(a)}
function w(a){return x(a)&&b.valueType2TypedArrayClassMap[a].BYTES_PER_ELEMENT}Object.defineProperty(b,"__esModule",{value:!0});var r=q.getLogger("esri.views.3d.layers.i3s.I3SBinaryReader");b.readHeader=p;b.readStringArray=d;b.createTypedView=l;b.createRawView=f;b.createAttributeDataIndex=z;b.createGeometryDataIndex=function(a,b,c){var e=p(a,b&&b.header),g=e.byteCount,u={header:e,byteOffset:e.byteCount,byteCount:0,vertexAttributes:h.clone(b.vertexAttributes)},d=u.vertexAttributes;c||null==d.region||
delete d.region;var e=e.fields,f=null!=e.vertexCount?e.vertexCount:e.count;for(c=0;c<b.ordering.length;c++){var m=b.ordering[c];null!=d[m]&&(d[m].byteOffset=g,d[m].count=f,g+=w(d[m].valueType)*d[m].valuesPerElement*f)}d=e.faceCount;if(b.faces&&d)for(u.faces=h.clone(b.faces),f=u.faces,c=0;c<b.ordering.length;c++)m=b.ordering[c],null!=f[m]&&(f[m].byteOffset=g,f[m].count=d,g+=w(f[m].valueType)*f[m].valuesPerElement*d);e=e.featureCount;if(b.featureAttributes&&b.featureAttributeOrder&&e)for(u.featureAttributes=
h.clone(b.featureAttributes),d=u.featureAttributes,c=0;c<b.featureAttributeOrder.length;c++)f=b.featureAttributeOrder[c],d[f].byteOffset=g,d[f].count=e,m=w(d[f].valueType),"UInt64"===d[f].valueType&&(m=8),g+=m*d[f].valuesPerElement*e;y(g,a.byteLength,"geometry");u.byteCount=g-u.byteOffset;return u};b.readBinaryAttribute=function(a,b,c){if("lepcc-rgb"===a.encoding)return k.decodeRGB(b);if("lepcc-intensity"===a.encoding)return k.decodeIntensity(b);if(null!=a.encoding&&""!==a.encoding)throw new t("unknown-attribute-storage-info-encoding",
"Unknown Attribute Storage Info Encoding");a["attributeByteCounts "]&&!a.attributeByteCounts&&(r.warn("Warning: Trailing space in 'attributeByteCounts '."),a.attributeByteCounts=a["attributeByteCounts "]);"ObjectIds"===a.ordering[0]&&a.hasOwnProperty("objectIds")&&(r.warn("Warning: Case error in objectIds"),a.ordering[0]="objectIds");c=z(b,a,c);y(c.byteOffset+c.byteCount,b.byteLength,"attribute");if(a=c.entries.attributeValues||c.entries.objectIds){if("String"===a.valueType){c=c.entries.attributeByteCounts;
var e=l(b,c);b=f(b,a);return d(c.count,e,b)}return l(b,a)}throw new t("bad-attribute-storage-info","Bad attributeStorageInfo specification.");};b.valueType2TypedArrayClassMap={Float32:Float32Array,Float64:Float64Array,UInt8:Uint8Array,Int8:Int8Array,UInt16:Uint16Array,Int16:Int16Array,UInt32:Uint32Array,Int32:Int32Array};b.valueType2ArrayBufferReader={Float32:function(a,b){return(new DataView(a,0)).getFloat32(b,!0)},Float64:function(a,b){return(new DataView(a,0)).getFloat64(b,!0)},UInt8:function(a,
b){return(new DataView(a,0)).getUint8(b)},Int8:function(a,b){return(new DataView(a,0)).getInt8(b)},UInt16:function(a,b){return(new DataView(a,0)).getUint16(b,!0)},Int16:function(a,b){return(new DataView(a,0)).getInt16(b,!0)},UInt32:function(a,b){return(new DataView(a,0)).getUint32(b,!0)},Int32:function(a,b){return(new DataView(a,0)).getInt32(b,!0)}};b.isValueType=x;b.getBytesPerValue=w})},"esri/views/3d/layers/i3s/LEPCC":function(){define(["require","exports","../../../../core/Error"],function(a,
b,h){function t(a,b,l){return{identifier:String.fromCharCode.apply(null,new Uint8Array(a,l+n.identifierOffset,n.identifierLength)),version:b.getUint16(l+n.versionOffset,!0),checksum:b.getUint32(l+n.checksumOffset,!0)}}function q(a,b,l){var d=[];b=k(a,b,d);for(var h=[],p=0;p<d.length;p++){h.length=0;b=k(a,b,h);for(var n=0;n<h.length;n++)l.push(h[n]+d[p])}return b}function k(a,b,l){var d=new DataView(a,b),k=d.getUint8(0),p=k&31,n=!!(k&32),q=(k&192)>>6,k=0;if(0===q)k=d.getUint32(1,!0),b+=5;else if(1===
q)k=d.getUint16(1,!0),b+=3;else if(2===q)k=d.getUint8(1),b+=2;else throw new h("lepcc-decode-error","Bad count type");if(n)throw new h("lepcc-decode-error","LUT not implemented");a=new Uint8Array(a,b,Math.ceil(k*p/8));for(var q=n=d=0,r=-1>>>32-p,m=0;m<k;m++){for(;n<p;)d|=a[q]<<n,n+=8,q+=1;l[m]=d&r;d>>>=p;n-=p;32<n+p&&(d|=a[q-1]>>8-n)}return b+q}Object.defineProperty(b,"__esModule",{value:!0});var n={identifierOffset:0,identifierLength:10,versionOffset:10,checksumOffset:12,byteCount:16};b.decodeXYZ=
function(a){var b,l,f,k,p,x,w,r,m,v,c,e,g=new DataView(a,0),u=0;k=t(a,g,u);f=k.identifier;k=k.version;u+=n.byteCount;if("LEPCC     "!==f)throw new h("lepcc-decode-error","Bad identifier");if(1<k)throw new h("lepcc-decode-error","Unknown version");var A=u;b=g.getUint32(A+0,!0);l=g.getUint32(A+4,!0);f=g.getFloat64(A+8,!0);k=g.getFloat64(A+16,!0);p=g.getFloat64(A+24,!0);x=g.getFloat64(A+32,!0);w=g.getFloat64(A+40,!0);r=g.getFloat64(A+48,!0);m=g.getFloat64(A+56,!0);v=g.getFloat64(A+64,!0);c=g.getFloat64(A+
72,!0);e=g.getUint32(A+80,!0);g.getUint32(A+84,!0);u+=88;if(l*Math.pow(2,32)+b!==a.byteLength)throw new h("lepcc-decode-error","Bad size");g=new Float64Array(3*e);b=[];l=[];e=[];A=[];u=q(a,u,b);u=q(a,u,l);u=q(a,u,e);u=q(a,u,A);if(u!==a.byteLength)throw new h("lepcc-decode-error","Bad length");for(var C=u=a=0;C<b.length;C++)for(var u=u+b[C],G=0,B=0;B<l[C];B++){var G=G+e[a],I=A[a];g[3*a]=Math.min(x,f+2*m*G);g[3*a+1]=Math.min(w,k+2*v*u);g[3*a+2]=Math.min(r,p+2*c*I);a++}return{errorX:m,errorY:v,errorZ:c,
result:g}};b.decodeRGB=function(a){var b,l,f,k,p,q,w=new DataView(a,0),r=0;k=t(a,w,r);f=k.identifier;k=k.version;r+=n.byteCount;if("ClusterRGB"!==f)throw new h("lepcc-decode-error","Bad identifier");if(1<k)throw new h("lepcc-decode-error","Unknown version");q=r;b=w.getUint32(q+0,!0);l=w.getUint32(q+4,!0);f=w.getUint32(q+8,!0);k=w.getUint16(q+12,!0);p=w.getUint8(q+14);q=w.getUint8(q+15);r+=16;if(l*Math.pow(2,32)+b!==a.byteLength)throw new h("lepcc-decode-error","Bad size");if(2!==p&&1!==p||0!==q){if(0===
p&&0===q){if(3*f+r!==a.byteLength||0!==k)throw new h("lepcc-decode-error","Bad count");return(new Uint8Array(a,r)).slice()}if(2>=p&&1===q){if(r+3!==a.byteLength||1!==k)throw new h("lepcc-decode-error","Bad count");k=w.getUint8(r);b=w.getUint8(r+1);w=w.getUint8(r+2);r=new Uint8Array(3*f);for(a=0;a<f;a++)r[3*a]=k,r[3*a+1]=b,r[3*a+2]=w;return r}throw new h("lepcc-decode-error","Bad method "+p+","+q);}if(3*k+f+r!==a.byteLength||256<k)throw new h("lepcc-decode-error","Bad count");w=new Uint8Array(a,r,
3*k);k=new Uint8Array(a,r+3*k,f);r=new Uint8Array(3*f);for(a=0;a<f;a++)b=k[a],r[3*a]=w[3*b],r[3*a+1]=w[3*b+1],r[3*a+2]=w[3*b+2];return r};b.decodeIntensity=function(a){var b,l,f,p,q,x=new DataView(a,0),w=0;p=t(a,x,w);f=p.identifier;p=p.version;w+=n.byteCount;if("Intensity "!==f)throw new h("lepcc-decode-error","Bad identifier");if(1<p)throw new h("lepcc-decode-error","Unknown version");var r=w;b=x.getUint32(r+0,!0);l=x.getUint32(r+4,!0);f=x.getUint32(r+8,!0);p=x.getUint16(r+12,!0);q=x.getUint8(r+
14);x.getUint8(r+15);w+=16;if(l*Math.pow(2,32)+b!==a.byteLength)throw new h("lepcc-decode-error","Bad size");x=new Uint16Array(f);if(8===q){if(f+w!==a.byteLength)throw new h("lepcc-decode-error","Bad size");q=new Uint8Array(a,w,f)}else if(16===q){if(2*f+w!==a.byteLength)throw new h("lepcc-decode-error","Bad size");q=new Uint16Array(a,w,f)}else if(q=[],k(a,w,q)!==a.byteLength)throw new h("lepcc-decode-error","Bad size");for(a=0;a<f;a++)x[a]=q[a]*p;return x}})},"esri/views/3d/support/meshProcessing":function(){define(["require",
"exports","../webgl-engine/lib/Util"],function(a,b,h){Object.defineProperty(b,"__esModule",{value:!0});b.computeNeighbors=function(a,b){for(var h=a.length/3,k=new Uint32Array(b+1),d=new Uint32Array(b+1),l=function(c,a){c<a?k[c+1]++:d[a+1]++},f=0;f<h;f++){var q=a[3*f],y=a[3*f+1],t=a[3*f+2];l(q,y);l(y,t);l(t,q)}for(f=y=q=0;f<b;f++)t=k[f+1],l=d[f+1],k[f+1]=q,d[f+1]=y,q+=t,y+=l;for(var w=new Uint32Array(6*h),r=k[b],l=function(c,a,e){if(c<a){var b=k[c+1]++;w[2*b]=a;w[2*b+1]=e}else b=d[a+1]++,w[2*r+2*b]=
c,w[2*r+2*b+1]=e},f=0;f<h;f++)q=a[3*f],y=a[3*f+1],t=a[3*f+2],l(q,y,f),l(y,t,f),l(t,q,f);q=function(c,a){var e=2*c;c=a-c;for(a=1;a<c;a++){var b=w[e+2*a],g=w[e+2*a+1],u=a-1;for(u;0<=u&&w[e+2*u]>b;u--)w[e+2*u+2]=w[e+2*u],w[e+2*u+3]=w[e+2*u+1];w[e+2*u+2]=b;w[e+2*u+3]=g}};for(f=0;f<b;f++)q(k[f],k[f+1]),q(r+d[f],r+d[f+1]);for(var m=new Int32Array(3*h),v=function(c,e){return c===a[3*e]?0:c===a[3*e+1]?1:c===a[3*e+2]?2:-1},h=function(c,a){c=v(c,a);m[3*a+c]=-1},q=function(c,a,e,b){c=v(c,a);m[3*a+c]=b;e=v(e,
b);m[3*b+e]=a},f=0;f<b;f++){for(var y=k[f],t=k[f+1],l=d[f],c=d[f+1];y<t&&l<c;){var e=w[2*y],g=w[2*r+2*l];e===g?(q(f,w[2*y+1],g,w[2*r+2*l+1]),y++,l++):e<g?(h(f,w[2*y+1]),y++):(h(g,w[2*r+2*l+1]),l++)}for(;y<t;)h(f,w[2*y+1]),y++;for(;l<c;)g=w[2*r+2*l],h(g,w[2*r+2*l+1]),l++}return m};var t=null;b.deduplicate=function(a,b,n,p,d){void 0===n&&(n=0);void 0===p&&(p=0);void 0===d&&(d=a.byteLength/(4*b));a=new Uint32Array(a,p,d*b);p=new Uint32Array(d);var l=Math.floor(1.1*d)+1;if(null==t||t.length<2*l)t=new Uint32Array(h.nextHighestPowerOfTwo(2*
l));for(var f=0;f<2*l;f++)t[f]=0;for(var k=0,q=0!==n?Math.ceil(7.84*1.96/(n*n)*n*(1-n)):d,f=0;f<d;f++){if(f===q){var x=1-k/f;if(x+1.96*Math.sqrt(x*(1-x)/f)<n)return null;q*=2}for(var x=f*b,w,r=w=0;r<b;r++)w=a[x+r]+w|0,w=w+(w<<11)+(w>>>2)|0;w>>>=0;for(var r=w%l,m=k;0!==t[2*r+1];){if(t[2*r]===w){var v=t[2*r+1]-1,c=v*b;a:{for(var e=0;e<b;e++)if(a[x+e]!==a[c+e]){c=!1;break a}c=!0}if(c){m=p[v];break}}r++;r>=l&&(r-=l)}m===k&&(t[2*r]=w,t[2*r+1]=f+1,k++);p[f]=m}if(0!==n&&1-k/d<n)return null;n=new Uint32Array(b*
k);for(f=k=0;f<d;f++)if(p[f]===k){l=a;q=f*b;x=n;w=k*b;r=b;for(m=0;m<r;m++)x[w+m]=l[q+m];k++}return{buffer:n.buffer,indices:p,uniqueCount:k}}})},"esri/views/3d/webgl-engine/lib/Util":function(){define(["require","exports","./gl-matrix"],function(a,b,h){function t(c,a){if(!c)throw c=Error("dummy"),c.stack&&console.log(c.stack),new ba(a);}function q(c,a,e){return c<a?a:c>e?e:c}function k(c){return c/180*Math.PI}function n(c){return 180*c/Math.PI}function p(c,a,e){h.mat4d.multiply(a,c,w);h.mat4d.inverse(w);
for(c=0;8>c;++c)h.mat4d.multiplyVec4(w,r[c],m),h.vec3d.set3(m[0]/m[3],m[1]/m[3],m[2]/m[3],e[c])}function d(a,b,g,u){h.vec3d.subtract(a,b,c);h.vec3d.subtract(g,b,e);h.vec3d.cross(e,c,u);h.vec3d.normalize(u);u[3]=-h.vec3d.dot(u,a)}function l(c,a,e,g){var u=6378137/Math.sqrt(1-b.ECCENTRICITY_SQUARED*Math.pow(Math.sin(c),2)),d=Math.cos(c);g[0]=(u+e)*Math.cos(a)*d;g[1]=(u*(1-b.ECCENTRICITY_SQUARED)+e)*Math.sin(c);g[2]=-(u+e)*Math.sin(a)*d}function f(c){for(var a in c)return a}function z(c,a){c[12]=a[0];
c[13]=a[1];c[14]=a[2]}function y(c,a){void 0===a&&(a=0);for(var e=0,b=0;4>b;b++)e+=c[a+b]*ha[b];return e}function x(c){return c-Math.floor(c)}Object.defineProperty(b,"__esModule",{value:!0});var w=h.mat4d.create(),r=[h.vec4d.createFrom(-1,-1,-1,1),h.vec4d.createFrom(1,-1,-1,1),h.vec4d.createFrom(1,1,-1,1),h.vec4d.createFrom(-1,1,-1,1),h.vec4d.createFrom(-1,-1,1,1),h.vec4d.createFrom(1,-1,1,1),h.vec4d.createFrom(1,1,1,1),h.vec4d.createFrom(-1,1,1,1)],m=h.vec4d.create(),v=[h.vec3d.create(),h.vec3d.create(),
h.vec3d.create(),h.vec3d.create(),h.vec3d.create(),h.vec3d.create(),h.vec3d.create(),h.vec3d.create()],c=h.vec3d.create(),e=h.vec3d.create(),g=h.vec3d.create(),u=h.vec3d.create(),A=h.vec3d.create(),C=h.vec3d.create(),G=h.vec3d.create(),B=h.vec3d.create(),I=h.vec3d.create(),P=h.vec3d.create(),N=h.vec3d.create(),Q=h.vec3d.create(),W=h.vec3d.create(),V=h.vec3d.create(),aa=h.vec3d.createFrom(0,0,0),ba=function(){function c(c){this.message=c}c.prototype.toString=function(){return"AssertException: "+this.message};
return c}();b.AssertException=ba;b.EARTH_RADIUS=6378137;b.METER2FEET=3.28084;b.ECCENTRICITY_SQUARED=.0066943799901414;b.VertexAttrConstants={POSITION:"position",NORMAL:"normal",NORMALCOMPRESSED:"normalCompressed",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",COLOR:"color",SYMBOLCOLOR:"symbolColor",SIZE:"size",REGION:"region",COMPONENTINDEX:"componentIndex"};b.assert=t;b.verify=function(c,a){c||(console.log("Verify failed: "+a),console.log(Error("dummy").stack))};b.isPowerOfTwo=function(c){return 0===
(c&c-1)};b.lerp=function(c,a,e){return c+(a-c)*e};b.clamp=q;b.encodeInt16=function(c){return q(Math.round(32767*c),-32767,32767)};b.encodeNormal=function(c,a){var e=Math.abs(c[0]),b=Math.abs(c[1]),g=1/(e+b+Math.abs(c[2])),e=e*g,b=b*g,g=Math.min(c[2]*g,0);a[0]=H(c[0])*(e-g);a[1]=H(c[1])*(b-g)};var H="function"===typeof Math.sign?Math.sign:function(c){return+(0<c)-+(0>c)||0};b.fallbackIfUndefined=function(c,a){return void 0===c?a:c};b.hex2rgb=function(c){c=Math.floor(c);return[(c>>16&255)/255,(c>>8&
255)/255,(c&255)/255]};b.rgb2hex=function(c){var a=q(Math.round(255*c[0]),0,255),e=q(Math.round(255*c[1]),0,255);c=q(Math.round(255*c[2]),0,255);return"0x"+((a<<16)+(e<<8)+c).toString(16)};b.dec2hex=function(c){c=c.toString(16);return"00000000".substr(0,8-c.length)+c};b.deg2rad=k;b.rad2deg=n;b.azimuthElevationAngle2Direction=function(c,a){c=1.5*Math.PI-c;a=.5*Math.PI-a;return[Math.cos(c)*Math.sin(a),Math.cos(a),Math.sin(c)*Math.sin(a)]};b.rayPlane=function(c,a,e,b){var g=h.vec3d.dot(e,a);if(0===g)return!1;
e=-(h.vec3d.dot(e,c)+e[3])/g;h.vec3d.add(c,h.vec3d.scale(a,e,b),b);return!0};b.raySphere=function(a,e,b,g,u){b=b||aa;var d=h.vec3d.subtract(a,b,c);b=h.vec3d.dot(e,e);var A=2*h.vec3d.dot(e,d);g=h.vec3d.dot(d,d)-g*g;g=A*A-4*b*g;if(0>g)return!1;d=Math.sqrt(g);g=(-A-d)/(2*b);b=(-A+d)/(2*b);if(0>g||b<g&&0<b)g=b;return 0<g?(h.vec3d.add(a,h.vec3d.scale(e,g,V),u),!0):!1};b.rayTriangle3D=function(c,a,e,b,g,u,d,A,f){void 0===f&&(f=h.vec3d.create());var l=b[d]-e[u],m=b[d+1]-e[u+1],k=b[d+2]-e[u+2];b=g[A]-e[u];
d=g[A+1]-e[u+1];g=g[A+2]-e[u+2];var v=a[1]*g-d*a[2],n=a[2]*b-g*a[0],C=a[0]*d-b*a[1];A=l*v+m*n+k*C;if(-1E-5<A&&1E-5>A)return!1;A=1/A;var p=c[0]-e[u],G=c[1]-e[u+1];c=c[2]-e[u+2];f[1]=A*(p*v+G*n+c*C);if(0>f[1]||1<f[1])return!1;e=G*k-m*c;c=c*l-k*p;l=p*m-l*G;f[2]=A*(a[0]*e+a[1]*c+a[2]*l);if(0>f[2]||1<f[1]+f[2])return!1;f[0]=A*(b*e+d*c+g*l);return!0};b.rayBoxTest=function(c,a,e,b){var g,u=(e[0]-c[0])/a[0],d=(b[0]-c[0])/a[0];u>d&&(g=u,u=d,d=g);var A=(e[1]-c[1])/a[1],f=(b[1]-c[1])/a[1];A>f&&(g=A,A=f,f=g);
if(u>f||A>d)return!1;A>u&&(u=A);f<d&&(d=f);e=(e[2]-c[2])/a[2];c=(b[2]-c[2])/a[2];e>c&&(g=e,e=c,c=g);if(u>c||e>d)return!1;c<d&&(d=c);return 0>d?!1:!0};b.rayRay2D=function(c,a,e,b,g,u){void 0===u&&(u=h.vec2d.create());var d=(b[g]-e[g])*(a[0]-c[0])-(b[0]-e[0])*(a[g]-c[g]);if(0===d)return!1;e=((b[0]-e[0])*(c[g]-e[g])-(b[g]-e[g])*(c[0]-e[0]))/d;u[0]=c[0]+e*(a[0]-c[0]);u[1]=c[g]+e*(a[g]-c[g]);return!0};b.matrix2frustum=p;b.matrix2frustumPlanes=function(c,a,e,b){void 0===b&&(b=e,e=v);p(c,a,e);d(e[4],e[0],
e[3],b[0]);d(e[1],e[5],e[6],b[1]);d(e[4],e[5],e[1],b[2]);d(e[3],e[2],e[6],b[3]);d(e[0],e[1],e[2],b[4]);d(e[5],e[4],e[7],b[5])};b.point2plane=d;b.planeDistance=function(c,a){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]};b.project=function(c,a,e,b,g){g||(g=c);m[0]=c[0];m[1]=c[1];m[2]=c[2];m[3]=1;h.mat4d.multiplyVec4(a,m);2<g.length&&(g[2]=-m[2]);h.mat4d.multiplyVec4(e,m);t(0!==m[3]);g[0]=m[0]/m[3];g[1]=m[1]/m[3];g[2]=m[2]/m[3];g[0]=(.5*g[0]+.5)*b[2]+b[0];g[1]=(.5*g[1]+.5)*b[3]+b[1]};b.geodeticToGeocentricLatidude=
function(c){return Math.atan((1-b.ECCENTRICITY_SQUARED)*Math.tan(c))};b.latLon2positionWGS84Ellipsoid=l;b.pos2latLon=function(c,a){var e=h.vec3d.length(c);a[0]=Math.asin(q(c[1]/e,-1,1));a[1]=(0>c[2]?1:-1)*Math.acos(q(c[0]/(Math.cos(a[0])*e),-1,1));a[0]=n(a[0]);a[1]=n(a[1]);a[2]=e};b.pos2latLonWGS84Ellipsoid=function(c,a){var e=c[0],g=-c[2],u=c[1],d=Math.sqrt(Math.pow(6378137,2)*(1-b.ECCENTRICITY_SQUARED));c=Math.sqrt(Math.pow(e,2)+Math.pow(g,2));var A=Math.atan2(6378137*u,d*c),e=Math.atan2(g,e),g=
Math.atan2(u+Math.pow(Math.sqrt((Math.pow(6378137,2)-Math.pow(d,2))/Math.pow(d,2)),2)*d*Math.pow(Math.sin(A),3),c-6378137*b.ECCENTRICITY_SQUARED*Math.pow(Math.cos(A),3));c=c/Math.cos(g)-6378137/Math.sqrt(1-b.ECCENTRICITY_SQUARED*Math.pow(Math.sin(g),2))+b.EARTH_RADIUS;a[0]=g;a[1]=e;a[2]=c};b.computeGlobeTransformation=function(c,a,e){var b=k(c[0]);c=k(c[1]);l(b,c,a,g);h.mat4d.translate(e,g);h.mat4d.rotateY(e,.5*Math.PI+c);h.mat4d.rotateX(e,.5*Math.PI-b);return e};b.readUInt16=function(c,a){return c[a]+
(c[a+1]<<8)};b.readUInt32=function(c,a){return c[a]+(c[a+1]<<8)+(c[a+2]<<16)+(c[a+3]<<24)};b.setIfDefined=function(c,a,e){void 0!==a[c]&&(e[c]=a[c])};b.array2object=function(c,a){var e={};if(void 0!==a)for(var b=0;b<c.length;b++){var g=c[b];e[a(g)]=g}else for(a=0;a<c.length;a++)g=c[a],e[g]=g;return e};b.object2array=function(c){var a=[],e;for(e in c)a.push(c[e]);return a};b.mergeObjects=function(c,a,e){void 0===e&&(e={});if(e!==c)for(var b in c)e[b]=c[b];if(e!==a)for(var g in a)e[g]=a[g];return e};
b.subtractObjects=function(c,a){var e={},b;for(b in c)void 0===a[b]&&(e[b]=c[b]);return e};b.intersectObjects=function(c,a){var e={},b;for(b in c)void 0!==a[b]&&(e[b]=c[b]);return e};b.getFirstObjectKey=f;b.getFirstObjectValue=function(c){return c[f(c)]};b.objectEmpty=function(c){for(var a in c)return!1;return!0};b.arraysEqual=function(c,a){if(c.length!==a.length)return!1;for(var e=0,b=c.length;e<b;++e)if(c[e]!==a[e])return!1;return!0};var F=0;b.arrayRemove=function(c,a){for(var e=Math.max(0,F-5),
b=Math.min(e+10,c.length),g=-1;e<b;++e)if(c[e]===a){g=e;break}if(-1===g&&(g=c.indexOf(a),-1===g))return null;c[g]=c[c.length-1];c.pop();F=g;return a};b.byteBuffer2base64image=function(c,a,e,b,g){var u=4*a;t(c.length===u*e,"buffer length must match image resolution");var d=document.createElement("canvas");d.width=a;d.height=e;var A=d.getContext("2d");a=A.getImageData(0,0,a,e);for(var f=a.data,l=0;l<e;++l)for(var m=l*u,h=(e-1-l)*u,k=0;k<u;++k)f[m++]=c[h++];A.putImageData(a,0,0);return d.toDataURL(b,
g)};b.cround=function(c){return Math.round(100*c)/100};b.logWithBase=function(c,a){return Math.log(c)/Math.log(a)};b.setMatrixTranslation=z;b.setMatrixTranslation3=function(c,a,e,b){c[12]=a;c[13]=e;c[14]=b};b.getMatrixTranslation=function(c,a){void 0===a&&(a=h.vec3d.create());a[0]=c[12];a[1]=c[13];a[2]=c[14];return a};b.createTranslationMatrix=function(c,a){c=h.mat4d.identity(c);z(c,a);return c};b.isTranslationMatrix=function(c){return 1===c[0]&&0===c[1]&&0===c[2]&&0===c[3]&&0===c[4]&&1===c[5]&&0===
c[6]&&0===c[7]&&0===c[8]&&0===c[9]&&1===c[10]&&0===c[11]&&1===c[15]};b.fovx2fovy=function(c,a,e){return 2*Math.atan(e*Math.tan(.5*c)/a)};b.fovy2fovx=function(c,a,e){return 2*Math.atan(a*Math.tan(.5*c)/e)};b.fovx2fovd=function(c,a,e){return 2*Math.atan(Math.sqrt(a*a+e*e)*Math.tan(.5*c)/a)};b.fovy2fovd=function(c,a,e){return 2*Math.atan(Math.sqrt(a*a+e*e)*Math.tan(.5*c)/e)};b.fovd2fovx=function(c,a,e){return 2*Math.atan(a*Math.tan(.5*c)/Math.sqrt(a*a+e*e))};b.fovd2fovy=function(c,a,e){return 2*Math.atan(e*
Math.tan(.5*c)/Math.sqrt(a*a+e*e))};b.nextHighestPowerOfTwo=function(c){--c;for(var a=1;32>a;a<<=1)c|=c>>a;return c+1};b.nextHighestPowerOfTen=function(c){return Math.pow(10,Math.ceil(Math.LOG10E*Math.log(c)))};b.lineLineDistanceSquared3D=function(c,a,e,b,g){u[0]=c[0]-e[0];u[1]=c[1]-e[1];u[2]=c[2]-e[2];A[0]=b[0]-e[0];A[1]=b[1]-e[1];A[2]=b[2]-e[2];if(1E-4>Math.abs(A[0])&&1E-4>Math.abs(A[1])&&1E-4>Math.abs(A[2]))return g.success=!1,g;C[0]=a[0]-c[0];C[1]=a[1]-c[1];C[2]=a[2]-c[2];if(1E-4>Math.abs(C[0])&&
1E-4>Math.abs(C[1])&&1E-4>Math.abs(C[2]))return g.success=!1,g;a=u[0]*A[0]+u[1]*A[1]+u[2]*A[2];b=A[0]*C[0]+A[1]*C[1]+A[2]*C[2];var d=u[0]*C[0]+u[1]*C[1]+u[2]*C[2],f=A[0]*A[0]+A[1]*A[1]+A[2]*A[2],l=(C[0]*C[0]+C[1]*C[1]+C[2]*C[2])*f-b*b;if(1E-4>Math.abs(l))return g.success=!1,g;d=q((a*b-d*f)/l,0,1);a=q((a+b*d)/f,0,1);G[0]=c[0]+d*C[0];G[1]=c[1]+d*C[1];G[2]=c[2]+d*C[2];B[0]=e[0]+a*A[0];B[1]=e[1]+a*A[1];B[2]=e[2]+a*A[2];c=h.vec3d.dist2(G,B);g.success=!0;g.dist2=c;g.pa=G;g.pb=B;return g};b.pointLineSegmentDistanceSquared2D=
function(c,a,e){Q[0]=a[0]-c[0];Q[1]=a[1]-c[1];Q[2]=0;W[0]=e[0]-c[0];W[1]=e[1]-c[1];W[2]=0;V[0]=e[0];V[1]=e[1];V[2]=0;a=h.vec2d.dot(W,Q);e=h.vec2d.dot(Q,Q);a=q(a/e,0,1);N[0]=Q[0]*a;N[1]=Q[1]*a;I[0]=c[0]+N[0];I[1]=c[1]+N[1];h.vec2d.subtract(V,I,P);c=h.vec2d.dot(P,P);a=h.vec2d.dot(W,W);e=h.vec2d.dot(Q,Q);var b=h.vec2d.dot(N,N);if(b>a||b>e)c=Number.MAX_VALUE;return c};b.packFloatRGBA=function(c,a,e){void 0===e&&(e=0);c=q(c,0,Y);for(var b=0;4>b;b++)a[e+b]=Math.floor(256*x(c*T[b]))};b.unpackFloatRGBA=y;
var T=[1,256,65536,16777216],ha=[1/256,1/65536,1/16777216,1/4294967296],Y=y(new Uint8ClampedArray([255,255,255,255]))})},"esri/views/3d/webgl-engine/lib/gl-matrix":function(){define([],function(){var a={};(function(a,h){h(a,!0);h(a,!1)})(a,function(a,h){var b={};(function(){if("undefined"!=typeof Float32Array){var c=new Float32Array(1),a=new Int32Array(c.buffer);b.invsqrt=function(e){c[0]=e;a[0]=1597463007-(a[0]>>1);var b=c[0];return b*(1.5-.5*e*b*b)}}else b.invsqrt=function(c){return 1/Math.sqrt(c)}})();
var q=Array;"undefined"!=typeof Float32Array&&(q=h?Float32Array:Array);var k={create:function(c){var a=new q(3);c?(a[0]=c[0],a[1]=c[1],a[2]=c[2]):a[0]=a[1]=a[2]=0;return a},createFrom:function(c,a,b){var e=new q(3);e[0]=c;e[1]=a;e[2]=b;return e},set:function(c,a){a[0]=c[0];a[1]=c[1];a[2]=c[2];return a},set3:function(c,a,b,u){u[0]=c;u[1]=a;u[2]=b;return u},add:function(c,a,b){if(!b||c===b)return c[0]+=a[0],c[1]+=a[1],c[2]+=a[2],c;b[0]=c[0]+a[0];b[1]=c[1]+a[1];b[2]=c[2]+a[2];return b},subtract:function(c,
a,b){if(!b||c===b)return c[0]-=a[0],c[1]-=a[1],c[2]-=a[2],c;b[0]=c[0]-a[0];b[1]=c[1]-a[1];b[2]=c[2]-a[2];return b},multiply:function(c,a,b){if(!b||c===b)return c[0]*=a[0],c[1]*=a[1],c[2]*=a[2],c;b[0]=c[0]*a[0];b[1]=c[1]*a[1];b[2]=c[2]*a[2];return b},max:function(c,a,b){b[0]=Math.max(c[0],a[0]);b[1]=Math.max(c[1],a[1]);b[2]=Math.max(c[2],a[2]);return b},min:function(c,a,b){b[0]=Math.min(c[0],a[0]);b[1]=Math.min(c[1],a[1]);b[2]=Math.min(c[2],a[2]);return b},negate:function(c,a){a||(a=c);a[0]=-c[0];
a[1]=-c[1];a[2]=-c[2];return a},scale:function(c,a,b){if(!b||c===b)return c[0]*=a,c[1]*=a,c[2]*=a,c;b[0]=c[0]*a;b[1]=c[1]*a;b[2]=c[2]*a;return b},normalize:function(c,a){a||(a=c);var e=c[0],b=c[1];c=c[2];var d=Math.sqrt(e*e+b*b+c*c);if(!d)return a[0]=0,a[1]=0,a[2]=0,a;if(1===d)return a[0]=e,a[1]=b,a[2]=c,a;d=1/d;a[0]=e*d;a[1]=b*d;a[2]=c*d;return a},cross:function(c,a,b){b||(b=c);var e=c[0],g=c[1];c=c[2];var d=a[0],f=a[1];a=a[2];b[0]=g*a-c*f;b[1]=c*d-e*a;b[2]=e*f-g*d;return b},length:function(c){var a=
c[0],b=c[1];c=c[2];return Math.sqrt(a*a+b*b+c*c)},length2:function(c){var a=c[0],b=c[1];c=c[2];return a*a+b*b+c*c},dot:function(c,a){return c[0]*a[0]+c[1]*a[1]+c[2]*a[2]},direction:function(c,a,b){b||(b=c);var e=c[0]-a[0],g=c[1]-a[1];c=c[2]-a[2];a=Math.sqrt(e*e+g*g+c*c);if(!a)return b[0]=0,b[1]=0,b[2]=0,b;a=1/a;b[0]=e*a;b[1]=g*a;b[2]=c*a;return b},lerp:function(c,a,b,u){u||(u=c);u[0]=c[0]+b*(a[0]-c[0]);u[1]=c[1]+b*(a[1]-c[1]);u[2]=c[2]+b*(a[2]-c[2]);return u},dist:function(c,a){var e=a[0]-c[0],b=
a[1]-c[1];c=a[2]-c[2];return Math.sqrt(e*e+b*b+c*c)},dist2:function(c,a){var e=a[0]-c[0],b=a[1]-c[1];c=a[2]-c[2];return e*e+b*b+c*c}},n=null,p=new q(4);k.unproject=function(c,a,b,u,d){d||(d=c);n||(n=w.create());var e=n;p[0]=2*(c[0]-u[0])/u[2]-1;p[1]=2*(c[1]-u[1])/u[3]-1;p[2]=2*c[2]-1;p[3]=1;w.multiply(b,a,e);if(!w.inverse(e))return null;w.multiplyVec4(e,p);if(0===p[3])return null;d[0]=p[0]/p[3];d[1]=p[1]/p[3];d[2]=p[2]/p[3];return d};var d=k.createFrom(1,0,0),l=k.createFrom(0,1,0),f=k.createFrom(0,
0,1);k.rotationTo=function(c,a,b){b||(b=r.create());var e=k.dot(c,a),g=k.create();if(1<=e)r.set(m,b);else if(-.999999>e)k.cross(d,c,g),1E-6>g.length&&k.cross(l,c,g),1E-6>g.length&&k.cross(f,c,g),k.normalize(g),r.fromAxisAngle(g,Math.PI,b);else{var e=Math.sqrt(2*(1+e)),h=1/e;k.cross(c,a,g);b[0]=g[0]*h;b[1]=g[1]*h;b[2]=g[2]*h;b[3]=.5*e;r.normalize(b)}1<b[3]?b[3]=1:-1>b[3]&&(b[3]=-1);return b};var z=k.create(),y=k.create();k.project=function(c,a,b,u){u||(u=c);k.direction(a,b,z);k.subtract(c,a,y);c=k.dot(z,
y);k.scale(z,c,u);k.add(u,a,u)};k.str=function(c){return"["+c[0]+", "+c[1]+", "+c[2]+"]"};var x={create:function(c){var a=new q(9);c?(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8]):a[0]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=0;return a},createFrom:function(c,a,b,u,d,f,l,m,h){var e=new q(9);e[0]=c;e[1]=a;e[2]=b;e[3]=u;e[4]=d;e[5]=f;e[6]=l;e[7]=m;e[8]=h;return e},determinant:function(c){var a=c[3],b=c[4],u=c[5],d=c[6],f=c[7],l=c[8];return c[0]*(l*b-u*f)+
c[1]*(-l*a+u*d)+c[2]*(f*a-b*d)},inverse:function(c,a){var e=c[0],b=c[1],d=c[2],f=c[3],l=c[4],m=c[5],h=c[6],k=c[7];c=c[8];var v=c*l-m*k,n=-c*f+m*h,p=k*f-l*h,r=e*v+b*n+d*p;if(!r)return null;r=1/r;a||(a=x.create());a[0]=v*r;a[1]=(-c*b+d*k)*r;a[2]=(m*b-d*l)*r;a[3]=n*r;a[4]=(c*e-d*h)*r;a[5]=(-m*e+d*f)*r;a[6]=p*r;a[7]=(-k*e+b*h)*r;a[8]=(l*e-b*f)*r;return a},multiply:function(c,a,b){b||(b=c);var e=c[0],g=c[1],d=c[2],f=c[3],l=c[4],m=c[5],h=c[6],k=c[7];c=c[8];var v=a[0],n=a[1],p=a[2],r=a[3],q=a[4],t=a[5],
y=a[6],z=a[7];a=a[8];b[0]=v*e+n*f+p*h;b[1]=v*g+n*l+p*k;b[2]=v*d+n*m+p*c;b[3]=r*e+q*f+t*h;b[4]=r*g+q*l+t*k;b[5]=r*d+q*m+t*c;b[6]=y*e+z*f+a*h;b[7]=y*g+z*l+a*k;b[8]=y*d+z*m+a*c;return b},multiplyVec2:function(c,a,b){b||(b=a);var e=a[0];a=a[1];b[0]=e*c[0]+a*c[3]+c[6];b[1]=e*c[1]+a*c[4]+c[7];return b},multiplyVec3:function(c,a,b){b||(b=a);var e=a[0],g=a[1];a=a[2];b[0]=e*c[0]+g*c[3]+a*c[6];b[1]=e*c[1]+g*c[4]+a*c[7];b[2]=e*c[2]+g*c[5]+a*c[8];return b},set:function(c,a){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=
c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];return a},identity:function(c){c||(c=x.create());c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=1;c[5]=0;c[6]=0;c[7]=0;c[8]=1;return c},transpose:function(c,a){if(!a||c===a){a=c[1];var e=c[2],b=c[5];c[1]=c[3];c[2]=c[6];c[3]=a;c[5]=c[7];c[6]=e;c[7]=b;return c}a[0]=c[0];a[1]=c[3];a[2]=c[6];a[3]=c[1];a[4]=c[4];a[5]=c[7];a[6]=c[2];a[7]=c[5];a[8]=c[8];return a},toMat4:function(c,a){a||(a=w.create());a[15]=1;a[14]=0;a[13]=0;a[12]=0;a[11]=0;a[10]=c[8];a[9]=c[7];a[8]=
c[6];a[7]=0;a[6]=c[5];a[5]=c[4];a[4]=c[3];a[3]=0;a[2]=c[2];a[1]=c[1];a[0]=c[0];return a},str:function(c){return"["+c[0]+", "+c[1]+", "+c[2]+", "+c[3]+", "+c[4]+", "+c[5]+", "+c[6]+", "+c[7]+", "+c[8]+"]"}},w={create:function(c){var a=new q(16);4===arguments.length?(a[0]=arguments[0],a[1]=arguments[1],a[2]=arguments[2],a[3]=arguments[3],a[4]=arguments[4],a[5]=arguments[5],a[6]=arguments[6],a[7]=arguments[7],a[8]=arguments[8],a[9]=arguments[9],a[10]=arguments[10],a[11]=arguments[11],a[12]=arguments[12],
a[13]=arguments[13],a[14]=arguments[14],a[15]=arguments[15]):c&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],a[8]=c[8],a[9]=c[9],a[10]=c[10],a[11]=c[11],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a},createFrom:function(c,a,b,u,d,f,l,m,h,k,v,n,p,r,t,y){var e=new q(16);e[0]=c;e[1]=a;e[2]=b;e[3]=u;e[4]=d;e[5]=f;e[6]=l;e[7]=m;e[8]=h;e[9]=k;e[10]=v;e[11]=n;e[12]=p;e[13]=r;e[14]=t;e[15]=y;return e},createFromMatrixRowMajor:function(c){var a=new q(16);a[0]=
c[0];a[4]=c[1];a[8]=c[2];a[12]=c[3];a[1]=c[4];a[5]=c[5];a[9]=c[6];a[13]=c[7];a[2]=c[8];a[6]=c[9];a[10]=c[10];a[14]=c[11];a[3]=c[12];a[7]=c[13];a[11]=c[14];a[15]=c[15];return a},createFromMatrix:function(c){var a=new q(16);a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a},set:function(c,a){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];
a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a},setRowMajor:function(c,a){a[0]=c[0];a[4]=c[1];a[8]=c[2];a[12]=c[3];a[1]=c[4];a[5]=c[5];a[9]=c[6];a[13]=c[7];a[2]=c[8];a[6]=c[9];a[10]=c[10];a[14]=c[11];a[3]=c[12];a[7]=c[13];a[11]=c[14];a[15]=c[15];return a},identity:function(c){c||(c=w.create());c[0]=1;c[1]=0;c[2]=0;c[3]=0;c[4]=0;c[5]=1;c[6]=0;c[7]=0;c[8]=0;c[9]=0;c[10]=1;c[11]=0;c[12]=0;c[13]=0;c[14]=0;c[15]=1;return c},transpose:function(c,a){if(!a||
c===a){a=c[1];var e=c[2],b=c[3],d=c[6],f=c[7],l=c[11];c[1]=c[4];c[2]=c[8];c[3]=c[12];c[4]=a;c[6]=c[9];c[7]=c[13];c[8]=e;c[9]=d;c[11]=c[14];c[12]=b;c[13]=f;c[14]=l;return c}a[0]=c[0];a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=c[1];a[5]=c[5];a[6]=c[9];a[7]=c[13];a[8]=c[2];a[9]=c[6];a[10]=c[10];a[11]=c[14];a[12]=c[3];a[13]=c[7];a[14]=c[11];a[15]=c[15];return a},determinant:function(c){var a=c[0],b=c[1],u=c[2],d=c[3],f=c[4],l=c[5],m=c[6],h=c[7],k=c[8],v=c[9],n=c[10],p=c[11],r=c[12],q=c[13],t=c[14];c=c[15];return r*
v*m*d-k*q*m*d-r*l*n*d+f*q*n*d+k*l*t*d-f*v*t*d-r*v*u*h+k*q*u*h+r*b*n*h-a*q*n*h-k*b*t*h+a*v*t*h+r*l*u*p-f*q*u*p-r*b*m*p+a*q*m*p+f*b*t*p-a*l*t*p-k*l*u*c+f*v*u*c+k*b*m*c-a*v*m*c-f*b*n*c+a*l*n*c},inverse:function(a,e){e||(e=a);var c=a[0],b=a[1],d=a[2],f=a[3],l=a[4],m=a[5],h=a[6],k=a[7],v=a[8],n=a[9],p=a[10],r=a[11],q=a[12],t=a[13],y=a[14];a=a[15];var z=c*m-b*l,w=c*h-d*l,x=c*k-f*l,Y=b*h-d*m,O=b*k-f*m,E=d*k-f*h,J=v*t-n*q,K=v*y-p*q,L=v*a-r*q,M=n*y-p*t,R=n*a-r*t,S=p*a-r*y,D=z*S-w*R+x*M+Y*L-O*K+E*J;if(!D)return null;
D=1/D;e[0]=(m*S-h*R+k*M)*D;e[1]=(-b*S+d*R-f*M)*D;e[2]=(t*E-y*O+a*Y)*D;e[3]=(-n*E+p*O-r*Y)*D;e[4]=(-l*S+h*L-k*K)*D;e[5]=(c*S-d*L+f*K)*D;e[6]=(-q*E+y*x-a*w)*D;e[7]=(v*E-p*x+r*w)*D;e[8]=(l*R-m*L+k*J)*D;e[9]=(-c*R+b*L-f*J)*D;e[10]=(q*O-t*x+a*z)*D;e[11]=(-v*O+n*x-r*z)*D;e[12]=(-l*M+m*K-h*J)*D;e[13]=(c*M-b*K+d*J)*D;e[14]=(-q*Y+t*w-y*z)*D;e[15]=(v*Y-n*w+p*z)*D;return e},toRotationMat:function(a,e){e||(e=w.create());e[0]=a[0];e[1]=a[1];e[2]=a[2];e[3]=a[3];e[4]=a[4];e[5]=a[5];e[6]=a[6];e[7]=a[7];e[8]=a[8];
e[9]=a[9];e[10]=a[10];e[11]=a[11];e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e},toMat3:function(a,e){e||(e=x.create());e[0]=a[0];e[1]=a[1];e[2]=a[2];e[3]=a[4];e[4]=a[5];e[5]=a[6];e[6]=a[8];e[7]=a[9];e[8]=a[10];return e},toInverseMat3:function(a,e){var c=a[0],b=a[1],d=a[2],f=a[4],l=a[5],m=a[6],h=a[8],k=a[9];a=a[10];var v=a*l-m*k,n=-a*f+m*h,p=k*f-l*h,r=c*v+b*n+d*p;if(!r)return null;r=1/r;e||(e=x.create());e[0]=v*r;e[1]=(-a*b+d*k)*r;e[2]=(m*b-d*l)*r;e[3]=n*r;e[4]=(a*c-d*h)*r;e[5]=(-m*c+d*f)*r;e[6]=p*r;e[7]=
(-k*c+b*h)*r;e[8]=(l*c-b*f)*r;return e},multiply:function(a,e,b){b||(b=a);var c=a[0],g=a[1],d=a[2],f=a[3],l=a[4],m=a[5],h=a[6],k=a[7],v=a[8],n=a[9],p=a[10],r=a[11],q=a[12],t=a[13],y=a[14];a=a[15];var z=e[0],w=e[1],x=e[2],O=e[3],E=e[4],J=e[5],K=e[6],L=e[7],M=e[8],R=e[9],S=e[10],D=e[11],da=e[12],ea=e[13],fa=e[14];e=e[15];b[0]=z*c+w*l+x*v+O*q;b[1]=z*g+w*m+x*n+O*t;b[2]=z*d+w*h+x*p+O*y;b[3]=z*f+w*k+x*r+O*a;b[4]=E*c+J*l+K*v+L*q;b[5]=E*g+J*m+K*n+L*t;b[6]=E*d+J*h+K*p+L*y;b[7]=E*f+J*k+K*r+L*a;b[8]=M*c+R*l+
S*v+D*q;b[9]=M*g+R*m+S*n+D*t;b[10]=M*d+R*h+S*p+D*y;b[11]=M*f+R*k+S*r+D*a;b[12]=da*c+ea*l+fa*v+e*q;b[13]=da*g+ea*m+fa*n+e*t;b[14]=da*d+ea*h+fa*p+e*y;b[15]=da*f+ea*k+fa*r+e*a;return b},multiplyVec3:function(a,e,b){b||(b=e);var c=e[0],g=e[1];e=e[2];b[0]=a[0]*c+a[4]*g+a[8]*e+a[12];b[1]=a[1]*c+a[5]*g+a[9]*e+a[13];b[2]=a[2]*c+a[6]*g+a[10]*e+a[14];return b},multiplyVec4:function(a,e,b){b||(b=e);var c=e[0],g=e[1],d=e[2];e=e[3];b[0]=a[0]*c+a[4]*g+a[8]*d+a[12]*e;b[1]=a[1]*c+a[5]*g+a[9]*d+a[13]*e;b[2]=a[2]*
c+a[6]*g+a[10]*d+a[14]*e;b[3]=a[3]*c+a[7]*g+a[11]*d+a[15]*e;return b},translate:function(a,e,b){var c=e[0],g=e[1];e=e[2];var d,f,l,m,h,k,v,n,p,r,q,t;if(!b||a===b)return a[12]=a[0]*c+a[4]*g+a[8]*e+a[12],a[13]=a[1]*c+a[5]*g+a[9]*e+a[13],a[14]=a[2]*c+a[6]*g+a[10]*e+a[14],a[15]=a[3]*c+a[7]*g+a[11]*e+a[15],a;d=a[0];f=a[1];l=a[2];m=a[3];h=a[4];k=a[5];v=a[6];n=a[7];p=a[8];r=a[9];q=a[10];t=a[11];b[0]=d;b[1]=f;b[2]=l;b[3]=m;b[4]=h;b[5]=k;b[6]=v;b[7]=n;b[8]=p;b[9]=r;b[10]=q;b[11]=t;b[12]=d*c+h*g+p*e+a[12];
b[13]=f*c+k*g+r*e+a[13];b[14]=l*c+v*g+q*e+a[14];b[15]=m*c+n*g+t*e+a[15];return b},scale:function(a,e,b){var c=e[0],g=e[1];e=e[2];if(!b||a===b)return a[0]*=c,a[1]*=c,a[2]*=c,a[3]*=c,a[4]*=g,a[5]*=g,a[6]*=g,a[7]*=g,a[8]*=e,a[9]*=e,a[10]*=e,a[11]*=e,a;b[0]=a[0]*c;b[1]=a[1]*c;b[2]=a[2]*c;b[3]=a[3]*c;b[4]=a[4]*g;b[5]=a[5]*g;b[6]=a[6]*g;b[7]=a[7]*g;b[8]=a[8]*e;b[9]=a[9]*e;b[10]=a[10]*e;b[11]=a[11]*e;b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*
a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))},rotate:function(a,e,b,u){var c=b[0],g=b[1];b=b[2];var d=Math.sqrt(c*c+g*g+b*b),f,l,m,h,k,v,n,p,r,q,t,y,z,w,x,E,J,K,L,M;if(!d)return null;1!==d&&(d=1/d,c*=d,g*=d,b*=d);f=Math.sin(e);l=Math.cos(e);m=1-l;e=a[0];d=a[1];h=a[2];k=a[3];v=a[4];n=a[5];p=a[6];r=a[7];q=a[8];t=a[9];y=a[10];z=a[11];w=c*c*m+l;x=g*c*m+b*f;E=b*c*m-g*f;J=c*g*m-b*f;K=g*g*m+l;L=b*g*m+c*f;M=c*b*m+g*f;c=g*b*m-c*f;g=b*b*m+l;
u?a!==u&&(u[12]=a[12],u[13]=a[13],u[14]=a[14],u[15]=a[15]):u=a;u[0]=e*w+v*x+q*E;u[1]=d*w+n*x+t*E;u[2]=h*w+p*x+y*E;u[3]=k*w+r*x+z*E;u[4]=e*J+v*K+q*L;u[5]=d*J+n*K+t*L;u[6]=h*J+p*K+y*L;u[7]=k*J+r*K+z*L;u[8]=e*M+v*c+q*g;u[9]=d*M+n*c+t*g;u[10]=h*M+p*c+y*g;u[11]=k*M+r*c+z*g;return u},rotateX:function(a,e,b){var c=Math.sin(e);e=Math.cos(e);var g=a[4],d=a[5],f=a[6],l=a[7],m=a[8],h=a[9],k=a[10],v=a[11];b?a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]):b=a;b[4]=
g*e+m*c;b[5]=d*e+h*c;b[6]=f*e+k*c;b[7]=l*e+v*c;b[8]=g*-c+m*e;b[9]=d*-c+h*e;b[10]=f*-c+k*e;b[11]=l*-c+v*e;return b},rotateY:function(a,e,b){var c=Math.sin(e);e=Math.cos(e);var g=a[0],d=a[1],f=a[2],l=a[3],m=a[8],h=a[9],k=a[10],v=a[11];b?a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]):b=a;b[0]=g*e+m*-c;b[1]=d*e+h*-c;b[2]=f*e+k*-c;b[3]=l*e+v*-c;b[8]=g*c+m*e;b[9]=d*c+h*e;b[10]=f*c+k*e;b[11]=l*c+v*e;return b},rotateZ:function(a,e,b){var c=Math.sin(e);e=Math.cos(e);
var g=a[0],d=a[1],f=a[2],l=a[3],m=a[4],h=a[5],k=a[6],v=a[7];b?a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]):b=a;b[0]=g*e+m*c;b[1]=d*e+h*c;b[2]=f*e+k*c;b[3]=l*e+v*c;b[4]=g*-c+m*e;b[5]=d*-c+h*e;b[6]=f*-c+k*e;b[7]=l*-c+v*e;return b},frustum:function(a,e,b,d,f,l,m){m||(m=w.create());var c=e-a,g=d-b,u=l-f;m[0]=2*f/c;m[1]=0;m[2]=0;m[3]=0;m[4]=0;m[5]=2*f/g;m[6]=0;m[7]=0;m[8]=(e+a)/c;m[9]=(d+b)/g;m[10]=-(l+f)/u;m[11]=-1;m[12]=0;m[13]=0;m[14]=-(l*f*2)/
u;m[15]=0;return m},perspective:function(a,e,b,d,f){a=b*Math.tan(a*Math.PI/360);e*=a;return w.frustum(-e,e,-a,a,b,d,f)},ortho:function(a,e,b,d,f,l,m){m||(m=w.create());var c=e-a,g=d-b,u=l-f;m[0]=2/c;m[1]=0;m[2]=0;m[3]=0;m[4]=0;m[5]=2/g;m[6]=0;m[7]=0;m[8]=0;m[9]=0;m[10]=-2/u;m[11]=0;m[12]=-(a+e)/c;m[13]=-(d+b)/g;m[14]=-(l+f)/u;m[15]=1;return m},lookAt:function(a,e,b,d){d||(d=w.create());var c,g,u,f,m,l,h,k,v=a[0],n=a[1];a=a[2];u=b[0];f=b[1];g=b[2];h=e[0];b=e[1];c=e[2];if(v===h&&n===b&&a===c)return w.identity(d);
e=v-h;b=n-b;h=a-c;k=1/Math.sqrt(e*e+b*b+h*h);e*=k;b*=k;h*=k;c=f*h-g*b;g=g*e-u*h;u=u*b-f*e;(k=Math.sqrt(c*c+g*g+u*u))?(k=1/k,c*=k,g*=k,u*=k):u=g=c=0;f=b*u-h*g;m=h*c-e*u;l=e*g-b*c;(k=Math.sqrt(f*f+m*m+l*l))?(k=1/k,f*=k,m*=k,l*=k):l=m=f=0;d[0]=c;d[1]=f;d[2]=e;d[3]=0;d[4]=g;d[5]=m;d[6]=b;d[7]=0;d[8]=u;d[9]=l;d[10]=h;d[11]=0;d[12]=-(c*v+g*n+u*a);d[13]=-(f*v+m*n+l*a);d[14]=-(e*v+b*n+h*a);d[15]=1;return d},fromRotationTranslation:function(a,e,b){b||(b=w.create());var c=a[0],g=a[1],d=a[2],f=a[3],m=c+c,l=
g+g,h=d+d;a=c*m;var k=c*l,c=c*h,v=g*l,g=g*h,d=d*h,m=f*m,l=f*l,f=f*h;b[0]=1-(v+d);b[1]=k+f;b[2]=c-l;b[3]=0;b[4]=k-f;b[5]=1-(a+d);b[6]=g+m;b[7]=0;b[8]=c+l;b[9]=g-m;b[10]=1-(a+v);b[11]=0;b[12]=e[0];b[13]=e[1];b[14]=e[2];b[15]=1;return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},r={create:function(a){var c=new q(4);a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=
a[3]):c[0]=c[1]=c[2]=c[3]=0;return c},createFrom:function(a,e,b,d){var c=new q(4);c[0]=a;c[1]=e;c[2]=b;c[3]=d;return c},set:function(a,e){e[0]=a[0];e[1]=a[1];e[2]=a[2];e[3]=a[3];return e},identity:function(a){a||(a=r.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},m=r.identity();r.calculateW=function(a,e){var c=a[0],b=a[1],d=a[2];if(!e||a===e)return a[3]=-Math.sqrt(Math.abs(1-c*c-b*b-d*d)),a;e[0]=c;e[1]=b;e[2]=d;e[3]=-Math.sqrt(Math.abs(1-c*c-b*b-d*d));return e};r.dot=function(a,e){return a[0]*e[0]+
a[1]*e[1]+a[2]*e[2]+a[3]*e[3]};r.inverse=function(a,e){var c=a[0],b=a[1],d=a[2],f=a[3],c=(c=c*c+b*b+d*d+f*f)?1/c:0;if(!e||a===e)return a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a;e[0]=-a[0]*c;e[1]=-a[1]*c;e[2]=-a[2]*c;e[3]=a[3]*c;return e};r.conjugate=function(a,e){if(!e||a===e)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;e[0]=-a[0];e[1]=-a[1];e[2]=-a[2];e[3]=a[3];return e};r.length=function(a){var c=a[0],b=a[1],d=a[2];a=a[3];return Math.sqrt(c*c+b*b+d*d+a*a)};r.normalize=function(a,e){e||(e=a);var c=a[0],b=a[1],
d=a[2];a=a[3];var f=Math.sqrt(c*c+b*b+d*d+a*a);if(0===f)return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e;f=1/f;e[0]=c*f;e[1]=b*f;e[2]=d*f;e[3]=a*f;return e};r.add=function(a,e,b){if(!b||a===b)return a[0]+=e[0],a[1]+=e[1],a[2]+=e[2],a[3]+=e[3],a;b[0]=a[0]+e[0];b[1]=a[1]+e[1];b[2]=a[2]+e[2];b[3]=a[3]+e[3];return b};r.multiply=function(a,e,b){b||(b=a);var c=a[0],g=a[1],d=a[2];a=a[3];var f=e[0],m=e[1],l=e[2];e=e[3];b[0]=c*e+a*f+g*l-d*m;b[1]=g*e+a*m+d*f-c*l;b[2]=d*e+a*l+c*m-g*f;b[3]=a*e-c*f-g*m-d*l;return b};r.multiplyVec3=
function(a,e,b){b||(b=e);var c=e[0],g=e[1],d=e[2];e=a[0];var f=a[1],m=a[2];a=a[3];var l=a*c+f*d-m*g,h=a*g+m*c-e*d,k=a*d+e*g-f*c,c=-e*c-f*g-m*d;b[0]=l*a+c*-e+h*-m-k*-f;b[1]=h*a+c*-f+k*-e-l*-m;b[2]=k*a+c*-m+l*-f-h*-e;return b};r.scale=function(a,e,b){if(!b||a===b)return a[0]*=e,a[1]*=e,a[2]*=e,a[3]*=e,a;b[0]=a[0]*e;b[1]=a[1]*e;b[2]=a[2]*e;b[3]=a[3]*e;return b};r.toMat3=function(a,e){e||(e=x.create());var c=a[0],b=a[1],d=a[2],f=a[3],m=c+c,l=b+b,h=d+d;a=c*m;var k=c*l,c=c*h,v=b*l,b=b*h,d=d*h,m=f*m,l=f*
l,f=f*h;e[0]=1-(v+d);e[1]=k+f;e[2]=c-l;e[3]=k-f;e[4]=1-(a+d);e[5]=b+m;e[6]=c+l;e[7]=b-m;e[8]=1-(a+v);return e};r.toMat4=function(a,e){e||(e=w.create());var c=a[0],b=a[1],d=a[2],f=a[3],m=c+c,l=b+b,h=d+d;a=c*m;var k=c*l,c=c*h,v=b*l,b=b*h,d=d*h,m=f*m,l=f*l,f=f*h;e[0]=1-(v+d);e[1]=k+f;e[2]=c-l;e[3]=0;e[4]=k-f;e[5]=1-(a+d);e[6]=b+m;e[7]=0;e[8]=c+l;e[9]=b-m;e[10]=1-(a+v);e[11]=0;e[12]=0;e[13]=0;e[14]=0;e[15]=1;return e};r.slerp=function(a,e,b,d){d||(d=a);var c=a[0]*e[0]+a[1]*e[1]+a[2]*e[2]+a[3]*e[3],g,
u;if(1<=Math.abs(c))return d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d;g=Math.acos(c);u=Math.sqrt(1-c*c);if(.001>Math.abs(u))return d[0]=.5*a[0]+.5*e[0],d[1]=.5*a[1]+.5*e[1],d[2]=.5*a[2]+.5*e[2],d[3]=.5*a[3]+.5*e[3],d;c=Math.sin((1-b)*g)/u;b=Math.sin(b*g)/u;d[0]=a[0]*c+e[0]*b;d[1]=a[1]*c+e[1]*b;d[2]=a[2]*c+e[2]*b;d[3]=a[3]*c+e[3]*b;return d};r.fromRotationMatrix=function(a,e){e||(e=r.create());var c=a[0]+a[4]+a[8],b;if(0<c)b=Math.sqrt(c+1),e[3]=.5*b,b=.5/b,e[0]=(a[7]-a[5])*b,e[1]=(a[2]-a[6])*
b,e[2]=(a[3]-a[1])*b;else{b=r.fromRotationMatrix.s_iNext=r.fromRotationMatrix.s_iNext||[1,2,0];c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var d=b[c],f=b[d];b=Math.sqrt(a[3*c+c]-a[3*d+d]-a[3*f+f]+1);e[c]=.5*b;b=.5/b;e[3]=(a[3*f+d]-a[3*d+f])*b;e[d]=(a[3*d+c]+a[3*c+d])*b;e[f]=(a[3*f+c]+a[3*c+f])*b}return e};x.toQuat4=r.fromRotationMatrix;(function(){var a=x.create();r.fromAxes=function(c,b,d,f){a[0]=b[0];a[3]=b[1];a[6]=b[2];a[1]=d[0];a[4]=d[1];a[7]=d[2];a[2]=c[0];a[5]=c[1];a[8]=c[2];return r.fromRotationMatrix(a,
f)}})();r.identity=function(a){a||(a=r.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};r.fromAngleAxis=function(a,b,g){g||(g=r.create());a*=.5;var c=Math.sin(a);g[3]=Math.cos(a);g[0]=c*b[0];g[1]=c*b[1];g[2]=c*b[2];return g};r.toAngleAxis=function(a,e){e||(e=a);var c=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<c?(e[3]=2*Math.acos(a[3]),c=b.invsqrt(c),e[0]=a[0]*c,e[1]=a[1]*c,e[2]=a[2]*c):(e[3]=0,e[0]=1,e[1]=0,e[2]=0);return e};r.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var v={create:function(a){var c=
new q(4);a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3]):c[0]=c[1]=c[2]=c[3]=0;return c},createFrom:function(a,b,g,d){var c=new q(4);c[0]=a;c[1]=b;c[2]=g;c[3]=d;return c},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=v.create());a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(!b||a===b)return b=a[1],a[1]=a[2],a[2]=b,a;b[0]=a[0];b[1]=a[2];b[2]=a[1];b[3]=a[3];return b},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,
b){b||(b=a);var c=a[0],e=a[1],d=a[2];a=a[3];var f=c*a-d*e;if(!f)return null;f=1/f;b[0]=a*f;b[1]=-e*f;b[2]=-d*f;b[3]=c*f;return b},multiply:function(a,b,g){g||(g=a);var c=a[0],e=a[1],d=a[2];a=a[3];g[0]=c*b[0]+e*b[2];g[1]=c*b[1]+e*b[3];g[2]=d*b[0]+a*b[2];g[3]=d*b[1]+a*b[3];return g},rotate:function(a,b,g){g||(g=a);var c=a[0],e=a[1],d=a[2];a=a[3];var f=Math.sin(b);b=Math.cos(b);g[0]=c*b+e*f;g[1]=c*-f+e*b;g[2]=d*b+a*f;g[3]=d*-f+a*b;return g},multiplyVec2:function(a,b,g){g||(g=b);var c=b[0];b=b[1];g[0]=
c*a[0]+b*a[1];g[1]=c*a[2]+b*a[3];return g},scale:function(a,b,g){g||(g=a);var c=a[1],e=a[2],d=a[3],f=b[0];b=b[1];g[0]=a[0]*f;g[1]=c*b;g[2]=e*f;g[3]=d*b;return g},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};h=h?"":"d";a["glMath"+h]=b;a["vec2"+h]={create:function(a){var c=new q(2);a?(c[0]=a[0],c[1]=a[1]):(c[0]=0,c[1]=0);return c},createFrom:function(a,b){var c=new q(2);c[0]=a;c[1]=b;return c},add:function(a,b,g){g||(g=b);g[0]=a[0]+b[0];g[1]=a[1]+b[1];return g},subtract:function(a,
b,g){g||(g=b);g[0]=a[0]-b[0];g[1]=a[1]-b[1];return g},multiply:function(a,b,g){g||(g=b);g[0]=a[0]*b[0];g[1]=a[1]*b[1];return g},divide:function(a,b,g){g||(g=b);g[0]=a[0]/b[0];g[1]=a[1]/b[1];return g},scale:function(a,b,g){g||(g=a);g[0]=a[0]*b;g[1]=a[1]*b;return g},dist:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)},dist2:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a},set:function(a,b){b[0]=a[0];b[1]=a[1];return b},set2:function(a,b,g){g[0]=a;g[1]=b;return g},negate:function(a,
b){b||(b=a);b[0]=-a[0];b[1]=-a[1];return b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0;return b},cross:function(a,b,g){a=a[0]*b[1]-a[1]*b[0];if(!g)return a;g[0]=g[1]=0;g[2]=a;return g},length:function(a){var c=a[0];a=a[1];return Math.sqrt(c*c+a*a)},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,g){g||(g=a);var c=a[0]-b[0];a=a[1]-b[1];b=c*c+a*a;if(!b)return g[0]=0,g[1]=0,g[2]=0,g;b=1/Math.sqrt(b);g[0]=c*
b;g[1]=a*b;return g},lerp:function(a,b,g,d){d||(d=a);d[0]=a[0]+g*(b[0]-a[0]);d[1]=a[1]+g*(b[1]-a[1]);return d},str:function(a){return"["+a[0]+", "+a[1]+"]"}};a["vec3"+h]=k;a["vec4"+h]={create:function(a){var c=new q(4);a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3]):(c[0]=0,c[1]=0,c[2]=0,c[3]=0);return c},createFrom:function(a,b,g,d){var c=new q(4);c[0]=a;c[1]=b;c[2]=g;c[3]=d;return c},add:function(a,b,g){g||(g=b);g[0]=a[0]+b[0];g[1]=a[1]+b[1];g[2]=a[2]+b[2];g[3]=a[3]+b[3];return g},subtract:function(a,
b,g){g||(g=b);g[0]=a[0]-b[0];g[1]=a[1]-b[1];g[2]=a[2]-b[2];g[3]=a[3]-b[3];return g},multiply:function(a,b,g){g||(g=b);g[0]=a[0]*b[0];g[1]=a[1]*b[1];g[2]=a[2]*b[2];g[3]=a[3]*b[3];return g},divide:function(a,b,g){g||(g=b);g[0]=a[0]/b[0];g[1]=a[1]/b[1];g[2]=a[2]/b[2];g[3]=a[3]/b[3];return g},scale:function(a,b,g){g||(g=a);g[0]=a[0]*b;g[1]=a[1]*b;g[2]=a[2]*b;g[3]=a[3]*b;return g},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];
return b},set4:function(a,b,g,d,f){f[0]=a;f[1]=b;f[2]=g;f[3]=d;return f},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b},lerp:function(a,b,g,d){d||(d=a);d[0]=a[0]+g*(b[0]-a[0]);d[1]=a[1]+g*(b[1]-a[1]);d[2]=a[2]+g*(b[2]-a[2]);d[3]=a[3]+g*(b[3]-a[3]);return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};a["mat2"+h]=v;a["mat3"+h]=x;a["mat4"+h]=w;a["quat4"+h]=r});return a})},"esri/views/3d/layers/i3s/I3SProjectionUtil":function(){define(["require",
"exports","../../lib/glMatrix","../../support/projectionUtils"],function(a,b,h,t){Object.defineProperty(b,"__esModule",{value:!0});b.ReprojectionTypes={PER_VERTEX:"perVertex",NO_REPROJECTION:"noReprojection"};var q=new Float64Array(3E3),k=h.vec3d.create();b.reprojectPoints=function(a,b,d,l,f,z){var n=a.data,p=a.offsetIdx;a=a.strideIdx;h.vec3d.set(b,k);k[2]+=d;b=h.mat4d.create();t.computeLinearTransformation(l,k,b,z);d=h.mat4d.create();h.mat4d.inverse(b,d);var w=h.mat4d.create();h.mat4d.identity(w);
var r=[0,0,0],m=n.length/a;t.vectorToVector(k,l,r,f);for(l=0;l<m;l+=1E3){for(var v=Math.min(1E3,m-l),c=0;c<v;c++){var e=p+a*(l+c);q[3*c]=n[e]+r[0];q[3*c+1]=n[e+1]+r[1];q[3*c+2]=n[e+2]+r[2]}t.bufferToBuffer(q,f,0,q,z,0,v);for(c=0;c<v;c++){var e=q[3*c],g=q[3*c+1],u=q[3*c+2],A=p+a*(l+c);n[A]=d[0]*e+d[4]*g+d[8]*u+d[12];n[A+1]=d[1]*e+d[5]*g+d[9]*u+d[13];n[A+2]=d[2]*e+d[6]*g+d[10]*u+d[14]}}return{localTrafo:w,globalTrafo:b}}})},"esri/views/3d/lib/glMatrix":function(){define([],function(){var a={};(function(a,
h){h(a,!0);h(a,!1)})(a,function(a,h){var b={};(function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),e=new Int32Array(a.buffer);b.invsqrt=function(c){a[0]=c;e[0]=1597463007-(e[0]>>1);var b=a[0];return b*(1.5-.5*c*b*b)}}else b.invsqrt=function(a){return 1/Math.sqrt(a)}})();var q=Array;"undefined"!=typeof Float32Array&&(q=h?Float32Array:Array);var k={create:function(a){var c=new q(3);a?(c[0]=a[0],c[1]=a[1],c[2]=a[2]):c[0]=c[1]=c[2]=0;return c},createFrom:function(a,b,g){var c=new q(3);
c[0]=a;c[1]=b;c[2]=g;return c},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},set3:function(a,b,g,d){d[0]=a;d[1]=b;d[2]=g;return d},add:function(a,b,g){if(!g||a===g)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;g[0]=a[0]+b[0];g[1]=a[1]+b[1];g[2]=a[2]+b[2];return g},subtract:function(a,b,g){if(!g||a===g)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;g[0]=a[0]-b[0];g[1]=a[1]-b[1];g[2]=a[2]-b[2];return g},multiply:function(a,b,g){if(!g||a===g)return a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a;g[0]=a[0]*b[0];
g[1]=a[1]*b[1];g[2]=a[2]*b[2];return g},max:function(a,b,g){g[0]=Math.max(a[0],b[0]);g[1]=Math.max(a[1],b[1]);g[2]=Math.max(a[2],b[2]);return g},min:function(a,b,g){g[0]=Math.min(a[0],b[0]);g[1]=Math.min(a[1],b[1]);g[2]=Math.min(a[2],b[2]);return g},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,b,g){if(!g||a===g)return a[0]*=b,a[1]*=b,a[2]*=b,a;g[0]=a[0]*b;g[1]=a[1]*b;g[2]=a[2]*b;return g},normalize:function(a,b){b||(b=a);var c=a[0],e=a[1];a=a[2];var d=
Math.sqrt(c*c+e*e+a*a);if(!d)return b[0]=0,b[1]=0,b[2]=0,b;if(1===d)return b[0]=c,b[1]=e,b[2]=a,b;d=1/d;b[0]=c*d;b[1]=e*d;b[2]=a*d;return b},cross:function(a,b,g){g||(g=a);var c=a[0],e=a[1];a=a[2];var d=b[0],f=b[1];b=b[2];g[0]=e*b-a*f;g[1]=a*d-c*b;g[2]=c*f-e*d;return g},length:function(a){var c=a[0],b=a[1];a=a[2];return Math.sqrt(c*c+b*b+a*a)},length2:function(a){var c=a[0],b=a[1];a=a[2];return c*c+b*b+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,g){g||(g=a);
var c=a[0]-b[0],e=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(c*c+e*e+a*a);if(!b)return g[0]=0,g[1]=0,g[2]=0,g;b=1/b;g[0]=c*b;g[1]=e*b;g[2]=a*b;return g},lerp:function(a,b,g,d){d||(d=a);d[0]=a[0]+g*(b[0]-a[0]);d[1]=a[1]+g*(b[1]-a[1]);d[2]=a[2]+g*(b[2]-a[2]);return d},dist:function(a,b){var c=b[0]-a[0],e=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+e*e+a*a)},dist2:function(a,b){var c=b[0]-a[0],e=b[1]-a[1];a=b[2]-a[2];return c*c+e*e+a*a}},n=null,p=new q(4);k.unproject=function(a,b,g,d,f){f||(f=a);n||(n=w.create());
var c=n;p[0]=2*(a[0]-d[0])/d[2]-1;p[1]=2*(a[1]-d[1])/d[3]-1;p[2]=2*a[2]-1;p[3]=1;w.multiply(g,b,c);if(!w.inverse(c))return null;w.multiplyVec4(c,p);if(0===p[3])return null;f[0]=p[0]/p[3];f[1]=p[1]/p[3];f[2]=p[2]/p[3];return f};var d=k.createFrom(1,0,0),l=k.createFrom(0,1,0),f=k.createFrom(0,0,1);k.rotationTo=function(a,b,g){g||(g=r.create());var c=k.dot(a,b),e=k.create();if(1<=c)r.set(m,g);else if(-.999999>c)k.cross(d,a,e),1E-6>e.length&&k.cross(l,a,e),1E-6>e.length&&k.cross(f,a,e),k.normalize(e),
r.fromAxisAngle(e,Math.PI,g);else{var c=Math.sqrt(2*(1+c)),h=1/c;k.cross(a,b,e);g[0]=e[0]*h;g[1]=e[1]*h;g[2]=e[2]*h;g[3]=.5*c;r.normalize(g)}1<g[3]?g[3]=1:-1>g[3]&&(g[3]=-1);return g};var z=k.create(),y=k.create();k.project=function(a,b,g,d){d||(d=a);k.direction(b,g,z);k.subtract(a,b,y);a=k.dot(z,y);k.scale(z,a,d);k.add(d,b,d)};k.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var x={create:function(a){var c=new q(9);a?(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],
c[7]=a[7],c[8]=a[8]):c[0]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=0;return c},createFrom:function(a,b,g,d,f,m,l,h,k){var c=new q(9);c[0]=a;c[1]=b;c[2]=g;c[3]=d;c[4]=f;c[5]=m;c[6]=l;c[7]=h;c[8]=k;return c},determinant:function(a){var c=a[3],b=a[4],d=a[5],f=a[6],m=a[7],l=a[8];return a[0]*(l*b-d*m)+a[1]*(-l*c+d*f)+a[2]*(m*c-b*f)},inverse:function(a,b){var c=a[0],e=a[1],d=a[2],f=a[3],m=a[4],l=a[5],h=a[6],k=a[7];a=a[8];var v=a*m-l*k,n=-a*f+l*h,p=k*f-m*h,r=c*v+e*n+d*p;if(!r)return null;r=1/r;b||(b=x.create());
b[0]=v*r;b[1]=(-a*e+d*k)*r;b[2]=(l*e-d*m)*r;b[3]=n*r;b[4]=(a*c-d*h)*r;b[5]=(-l*c+d*f)*r;b[6]=p*r;b[7]=(-k*c+e*h)*r;b[8]=(m*c-e*f)*r;return b},multiply:function(a,b,g){g||(g=a);var c=a[0],e=a[1],d=a[2],f=a[3],m=a[4],l=a[5],h=a[6],k=a[7];a=a[8];var v=b[0],n=b[1],p=b[2],r=b[3],q=b[4],t=b[5],y=b[6],z=b[7];b=b[8];g[0]=v*c+n*f+p*h;g[1]=v*e+n*m+p*k;g[2]=v*d+n*l+p*a;g[3]=r*c+q*f+t*h;g[4]=r*e+q*m+t*k;g[5]=r*d+q*l+t*a;g[6]=y*c+z*f+b*h;g[7]=y*e+z*m+b*k;g[8]=y*d+z*l+b*a;return g},add:function(a,b,g){g||(g=a);
g[0]=a[0]+b[0];g[1]=a[1]+b[1];g[2]=a[2]+b[2];g[3]=a[3]+b[3];g[4]=a[4]+b[4];g[5]=a[5]+b[5];g[6]=a[6]+b[6];g[7]=a[7]+b[7];g[8]=a[8]+b[8];return g},subtract:function(a,b,g){g||(g=a);g[0]=a[0]-b[0];g[1]=a[1]-b[1];g[2]=a[2]-b[2];g[3]=a[3]-b[3];g[4]=a[4]-b[4];g[5]=a[5]-b[5];g[6]=a[6]-b[6];g[7]=a[7]-b[7];g[8]=a[8]-b[8];return g},multiplyVec2:function(a,b,g){g||(g=b);var c=b[0];b=b[1];g[0]=c*a[0]+b*a[3]+a[6];g[1]=c*a[1]+b*a[4]+a[7];return g},multiplyVec3:function(a,b,g){g||(g=b);var c=b[0],e=b[1];b=b[2];
g[0]=c*a[0]+e*a[3]+b*a[6];g[1]=c*a[1]+e*a[4]+b*a[7];g[2]=c*a[2]+e*a[5]+b*a[8];return g},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},identity:function(a){a||(a=x.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],e=a[5];a[1]=a[3];a[2]=a[6];a[3]=b;a[5]=a[7];a[6]=c;a[7]=e;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];
b[6]=a[2];b[7]=a[5];b[8]=a[8];return b},toMat4:function(a,b){b||(b=w.create());b[15]=1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];b[7]=0;b[6]=a[5];b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},w={create:function(a){var c=new q(16);4===arguments.length?(c[0]=arguments[0],c[1]=arguments[1],c[2]=arguments[2],c[3]=arguments[3],c[4]=arguments[4],
c[5]=arguments[5],c[6]=arguments[6],c[7]=arguments[7],c[8]=arguments[8],c[9]=arguments[9],c[10]=arguments[10],c[11]=arguments[11],c[12]=arguments[12],c[13]=arguments[13],c[14]=arguments[14],c[15]=arguments[15]):a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]);return c},createFrom:function(a,b,g,d,f,m,l,h,k,v,n,p,r,t,y,z){var c=new q(16);c[0]=a;c[1]=b;c[2]=g;c[3]=d;c[4]=f;
c[5]=m;c[6]=l;c[7]=h;c[8]=k;c[9]=v;c[10]=n;c[11]=p;c[12]=r;c[13]=t;c[14]=y;c[15]=z;return c},createFromMatrixRowMajor:function(a){var c=new q(16);c[0]=a[0];c[4]=a[1];c[8]=a[2];c[12]=a[3];c[1]=a[4];c[5]=a[5];c[9]=a[6];c[13]=a[7];c[2]=a[8];c[6]=a[9];c[10]=a[10];c[14]=a[11];c[3]=a[12];c[7]=a[13];c[11]=a[14];c[15]=a[15];return c},createFromMatrix:function(a){var c=new q(16);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=
a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},setRowMajor:function(a,b){b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},identity:function(a){a||(a=w.create());a[0]=
1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],e=a[3],d=a[6],f=a[7],m=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=b;a[6]=a[9];a[7]=a[13];a[8]=c;a[9]=d;a[11]=a[14];a[12]=e;a[13]=f;a[14]=m;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b},
determinant:function(a){var b=a[0],c=a[1],d=a[2],f=a[3],m=a[4],l=a[5],h=a[6],k=a[7],v=a[8],n=a[9],p=a[10],r=a[11],q=a[12],t=a[13],y=a[14];a=a[15];return q*n*h*f-v*t*h*f-q*l*p*f+m*t*p*f+v*l*y*f-m*n*y*f-q*n*d*k+v*t*d*k+q*c*p*k-b*t*p*k-v*c*y*k+b*n*y*k+q*l*d*r-m*t*d*r-q*c*h*r+b*t*h*r+m*c*y*r-b*l*y*r-v*l*d*a+m*n*d*a+v*c*h*a-b*n*h*a-m*c*p*a+b*l*p*a},inverse:function(a,b){b||(b=a);var c=a[0],e=a[1],d=a[2],f=a[3],m=a[4],l=a[5],h=a[6],k=a[7],v=a[8],n=a[9],p=a[10],r=a[11],q=a[12],t=a[13],y=a[14];a=a[15];var z=
c*l-e*m,w=c*h-d*m,x=c*k-f*m,Y=e*h-d*l,O=e*k-f*l,E=d*k-f*h,J=v*t-n*q,K=v*y-p*q,L=v*a-r*q,M=n*y-p*t,R=n*a-r*t,S=p*a-r*y,D=z*S-w*R+x*M+Y*L-O*K+E*J;if(!D)return null;D=1/D;b[0]=(l*S-h*R+k*M)*D;b[1]=(-e*S+d*R-f*M)*D;b[2]=(t*E-y*O+a*Y)*D;b[3]=(-n*E+p*O-r*Y)*D;b[4]=(-m*S+h*L-k*K)*D;b[5]=(c*S-d*L+f*K)*D;b[6]=(-q*E+y*x-a*w)*D;b[7]=(v*E-p*x+r*w)*D;b[8]=(m*R-l*L+k*J)*D;b[9]=(-c*R+e*L-f*J)*D;b[10]=(q*O-t*x+a*z)*D;b[11]=(-v*O+n*x-r*z)*D;b[12]=(-m*M+l*K-h*J)*D;b[13]=(c*M-e*K+d*J)*D;b[14]=(-q*Y+t*w-y*z)*D;b[15]=
(v*Y-n*w+p*z)*D;return b},toRotationMat:function(a,b){b||(b=w.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},toMat3:function(a,b){b||(b=x.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},toInverseMat3:function(a,b){var c=a[0],e=a[1],d=a[2],f=a[4],m=a[5],l=a[6],h=a[8],k=a[9];a=a[10];var v=a*m-l*k,n=-a*f+l*h,p=
k*f-m*h,r=c*v+e*n+d*p;if(!r)return null;r=1/r;b||(b=x.create());b[0]=v*r;b[1]=(-a*e+d*k)*r;b[2]=(l*e-d*m)*r;b[3]=n*r;b[4]=(a*c-d*h)*r;b[5]=(-l*c+d*f)*r;b[6]=p*r;b[7]=(-k*c+e*h)*r;b[8]=(m*c-e*f)*r;return b},multiply:function(a,b,g){g||(g=a);var c=a[0],e=a[1],d=a[2],f=a[3],m=a[4],l=a[5],h=a[6],k=a[7],v=a[8],n=a[9],p=a[10],r=a[11],q=a[12],t=a[13],y=a[14];a=a[15];var z=b[0],w=b[1],x=b[2],O=b[3],E=b[4],J=b[5],K=b[6],L=b[7],M=b[8],R=b[9],S=b[10],D=b[11],da=b[12],ea=b[13],fa=b[14];b=b[15];g[0]=z*c+w*m+x*
v+O*q;g[1]=z*e+w*l+x*n+O*t;g[2]=z*d+w*h+x*p+O*y;g[3]=z*f+w*k+x*r+O*a;g[4]=E*c+J*m+K*v+L*q;g[5]=E*e+J*l+K*n+L*t;g[6]=E*d+J*h+K*p+L*y;g[7]=E*f+J*k+K*r+L*a;g[8]=M*c+R*m+S*v+D*q;g[9]=M*e+R*l+S*n+D*t;g[10]=M*d+R*h+S*p+D*y;g[11]=M*f+R*k+S*r+D*a;g[12]=da*c+ea*m+fa*v+b*q;g[13]=da*e+ea*l+fa*n+b*t;g[14]=da*d+ea*h+fa*p+b*y;g[15]=da*f+ea*k+fa*r+b*a;return g},multiplyVec3:function(a,b,g){g||(g=b);var c=b[0],e=b[1];b=b[2];g[0]=a[0]*c+a[4]*e+a[8]*b+a[12];g[1]=a[1]*c+a[5]*e+a[9]*b+a[13];g[2]=a[2]*c+a[6]*e+a[10]*
b+a[14];return g},multiplyVec4:function(a,b,g){g||(g=b);var c=b[0],e=b[1],d=b[2];b=b[3];g[0]=a[0]*c+a[4]*e+a[8]*d+a[12]*b;g[1]=a[1]*c+a[5]*e+a[9]*d+a[13]*b;g[2]=a[2]*c+a[6]*e+a[10]*d+a[14]*b;g[3]=a[3]*c+a[7]*e+a[11]*d+a[15]*b;return g},translate:function(a,b,g){var c=b[0],e=b[1];b=b[2];var d,f,m,l,h,k,v,n,p,r,q,t;if(!g||a===g)return a[12]=a[0]*c+a[4]*e+a[8]*b+a[12],a[13]=a[1]*c+a[5]*e+a[9]*b+a[13],a[14]=a[2]*c+a[6]*e+a[10]*b+a[14],a[15]=a[3]*c+a[7]*e+a[11]*b+a[15],a;d=a[0];f=a[1];m=a[2];l=a[3];h=
a[4];k=a[5];v=a[6];n=a[7];p=a[8];r=a[9];q=a[10];t=a[11];g[0]=d;g[1]=f;g[2]=m;g[3]=l;g[4]=h;g[5]=k;g[6]=v;g[7]=n;g[8]=p;g[9]=r;g[10]=q;g[11]=t;g[12]=d*c+h*e+p*b+a[12];g[13]=f*c+k*e+r*b+a[13];g[14]=m*c+v*e+q*b+a[14];g[15]=l*c+n*e+t*b+a[15];return g},scale:function(a,b,g){var c=b[0],e=b[1];b=b[2];if(!g||a===g)return a[0]*=c,a[1]*=c,a[2]*=c,a[3]*=c,a[4]*=e,a[5]*=e,a[6]*=e,a[7]*=e,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;g[0]=a[0]*c;g[1]=a[1]*c;g[2]=a[2]*c;g[3]=a[3]*c;g[4]=a[4]*e;g[5]=a[5]*e;g[6]=a[6]*e;g[7]=
a[7]*e;g[8]=a[8]*b;g[9]=a[9]*b;g[10]=a[10]*b;g[11]=a[11]*b;g[12]=a[12];g[13]=a[13];g[14]=a[14];g[15]=a[15];return g},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]))},rotate:function(a,b,g,d){var c=g[0],e=g[1];g=g[2];var f=Math.sqrt(c*c+e*e+g*g),m,l,h,k,v,u,n,p,r,q,t,y,z,w,x,E,J,K,L,M;if(!f)return null;1!==f&&(f=1/f,c*=f,e*=f,g*=f);m=Math.sin(b);l=Math.cos(b);h=1-l;b=a[0];f=
a[1];k=a[2];v=a[3];u=a[4];n=a[5];p=a[6];r=a[7];q=a[8];t=a[9];y=a[10];z=a[11];w=c*c*h+l;x=e*c*h+g*m;E=g*c*h-e*m;J=c*e*h-g*m;K=e*e*h+l;L=g*e*h+c*m;M=c*g*h+e*m;c=e*g*h-c*m;e=g*g*h+l;d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*w+u*x+q*E;d[1]=f*w+n*x+t*E;d[2]=k*w+p*x+y*E;d[3]=v*w+r*x+z*E;d[4]=b*J+u*K+q*L;d[5]=f*J+n*K+t*L;d[6]=k*J+p*K+y*L;d[7]=v*J+r*K+z*L;d[8]=b*M+u*c+q*e;d[9]=f*M+n*c+t*e;d[10]=k*M+p*c+y*e;d[11]=v*M+r*c+z*e;return d},rotateX:function(a,b,g){var c=Math.sin(b);b=
Math.cos(b);var e=a[4],d=a[5],f=a[6],m=a[7],l=a[8],h=a[9],k=a[10],v=a[11];g?a!==g&&(g[0]=a[0],g[1]=a[1],g[2]=a[2],g[3]=a[3],g[12]=a[12],g[13]=a[13],g[14]=a[14],g[15]=a[15]):g=a;g[4]=e*b+l*c;g[5]=d*b+h*c;g[6]=f*b+k*c;g[7]=m*b+v*c;g[8]=e*-c+l*b;g[9]=d*-c+h*b;g[10]=f*-c+k*b;g[11]=m*-c+v*b;return g},rotateY:function(a,b,g){var c=Math.sin(b);b=Math.cos(b);var e=a[0],d=a[1],f=a[2],m=a[3],l=a[8],h=a[9],k=a[10],v=a[11];g?a!==g&&(g[4]=a[4],g[5]=a[5],g[6]=a[6],g[7]=a[7],g[12]=a[12],g[13]=a[13],g[14]=a[14],
g[15]=a[15]):g=a;g[0]=e*b+l*-c;g[1]=d*b+h*-c;g[2]=f*b+k*-c;g[3]=m*b+v*-c;g[8]=e*c+l*b;g[9]=d*c+h*b;g[10]=f*c+k*b;g[11]=m*c+v*b;return g},rotateZ:function(a,b,g){var c=Math.sin(b);b=Math.cos(b);var e=a[0],d=a[1],f=a[2],m=a[3],l=a[4],h=a[5],k=a[6],v=a[7];g?a!==g&&(g[8]=a[8],g[9]=a[9],g[10]=a[10],g[11]=a[11],g[12]=a[12],g[13]=a[13],g[14]=a[14],g[15]=a[15]):g=a;g[0]=e*b+l*c;g[1]=d*b+h*c;g[2]=f*b+k*c;g[3]=m*b+v*c;g[4]=e*-c+l*b;g[5]=d*-c+h*b;g[6]=f*-c+k*b;g[7]=m*-c+v*b;return g},frustum:function(a,b,g,
d,f,m,l){l||(l=w.create());var c=b-a,e=d-g,h=m-f;l[0]=2*f/c;l[1]=0;l[2]=0;l[3]=0;l[4]=0;l[5]=2*f/e;l[6]=0;l[7]=0;l[8]=(b+a)/c;l[9]=(d+g)/e;l[10]=-(m+f)/h;l[11]=-1;l[12]=0;l[13]=0;l[14]=-(m*f*2)/h;l[15]=0;return l},perspective:function(a,b,g,d,f){a=g*Math.tan(a*Math.PI/360);b*=a;return w.frustum(-b,b,-a,a,g,d,f)},ortho:function(a,b,g,d,f,l,m){m||(m=w.create());var c=b-a,e=d-g,h=l-f;m[0]=2/c;m[1]=0;m[2]=0;m[3]=0;m[4]=0;m[5]=2/e;m[6]=0;m[7]=0;m[8]=0;m[9]=0;m[10]=-2/h;m[11]=0;m[12]=-(a+b)/c;m[13]=-(d+
g)/e;m[14]=-(l+f)/h;m[15]=1;return m},lookAt:function(a,b,g,d){d||(d=w.create());var c,e,f,m,l,h,k,v,u=a[0],n=a[1];a=a[2];f=g[0];m=g[1];e=g[2];k=b[0];g=b[1];c=b[2];if(u===k&&n===g&&a===c)return w.identity(d);b=u-k;g=n-g;k=a-c;v=1/Math.sqrt(b*b+g*g+k*k);b*=v;g*=v;k*=v;c=m*k-e*g;e=e*b-f*k;f=f*g-m*b;(v=Math.sqrt(c*c+e*e+f*f))?(v=1/v,c*=v,e*=v,f*=v):f=e=c=0;m=g*f-k*e;l=k*c-b*f;h=b*e-g*c;(v=Math.sqrt(m*m+l*l+h*h))?(v=1/v,m*=v,l*=v,h*=v):h=l=m=0;d[0]=c;d[1]=m;d[2]=b;d[3]=0;d[4]=e;d[5]=l;d[6]=g;d[7]=0;d[8]=
f;d[9]=h;d[10]=k;d[11]=0;d[12]=-(c*u+e*n+f*a);d[13]=-(m*u+l*n+h*a);d[14]=-(b*u+g*n+k*a);d[15]=1;return d},fromRotationTranslation:function(a,b,g){g||(g=w.create());var c=a[0],e=a[1],d=a[2],f=a[3],m=c+c,l=e+e,h=d+d;a=c*m;var k=c*l,c=c*h,v=e*l,e=e*h,d=d*h,m=f*m,l=f*l,f=f*h;g[0]=1-(v+d);g[1]=k+f;g[2]=c-l;g[3]=0;g[4]=k-f;g[5]=1-(a+d);g[6]=e+m;g[7]=0;g[8]=c+l;g[9]=e-m;g[10]=1-(a+v);g[11]=0;g[12]=b[0];g[13]=b[1];g[14]=b[2];g[15]=1;return g},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+
a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},r={create:function(a){var b=new q(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,g,d){var c=new q(4);c[0]=a;c[1]=b;c[2]=g;c[3]=d;return c},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=r.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},m=r.identity();r.calculateW=function(a,
b){var c=a[0],e=a[1],d=a[2];if(!b||a===b)return a[3]=-Math.sqrt(Math.abs(1-c*c-e*e-d*d)),a;b[0]=c;b[1]=e;b[2]=d;b[3]=-Math.sqrt(Math.abs(1-c*c-e*e-d*d));return b};r.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};r.inverse=function(a,b){var c=a[0],e=a[1],d=a[2],f=a[3],c=(c=c*c+e*e+d*d+f*f)?1/c:0;if(!b||a===b)return a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a;b[0]=-a[0]*c;b[1]=-a[1]*c;b[2]=-a[2]*c;b[3]=a[3]*c;return b};r.conjugate=function(a,b){if(!b||a===b)return a[0]*=-1,a[1]*=-1,a[2]*=
-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};r.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};r.normalize=function(a,b){b||(b=a);var c=a[0],e=a[1],d=a[2];a=a[3];var f=Math.sqrt(c*c+e*e+d*d+a*a);if(0===f)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;f=1/f;b[0]=c*f;b[1]=e*f;b[2]=d*f;b[3]=a*f;return b};r.add=function(a,b,d){if(!d||a===d)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a;d[0]=a[0]+b[0];d[1]=a[1]+b[1];d[2]=a[2]+b[2];d[3]=a[3]+b[3];return d};
r.multiply=function(a,b,d){d||(d=a);var c=a[0],e=a[1],g=a[2];a=a[3];var f=b[0],m=b[1],l=b[2];b=b[3];d[0]=c*b+a*f+e*l-g*m;d[1]=e*b+a*m+g*f-c*l;d[2]=g*b+a*l+c*m-e*f;d[3]=a*b-c*f-e*m-g*l;return d};r.multiplyVec3=function(a,b,d){d||(d=b);var c=b[0],e=b[1],g=b[2];b=a[0];var f=a[1],m=a[2];a=a[3];var l=a*c+f*g-m*e,h=a*e+m*c-b*g,k=a*g+b*e-f*c,c=-b*c-f*e-m*g;d[0]=l*a+c*-b+h*-m-k*-f;d[1]=h*a+c*-f+k*-b-l*-m;d[2]=k*a+c*-m+l*-f-h*-b;return d};r.scale=function(a,b,d){if(!d||a===d)return a[0]*=b,a[1]*=b,a[2]*=b,
a[3]*=b,a;d[0]=a[0]*b;d[1]=a[1]*b;d[2]=a[2]*b;d[3]=a[3]*b;return d};r.toMat3=function(a,b){b||(b=x.create());var c=a[0],e=a[1],d=a[2],f=a[3],m=c+c,l=e+e,h=d+d;a=c*m;var k=c*l,c=c*h,v=e*l,e=e*h,d=d*h,m=f*m,l=f*l,f=f*h;b[0]=1-(v+d);b[1]=k+f;b[2]=c-l;b[3]=k-f;b[4]=1-(a+d);b[5]=e+m;b[6]=c+l;b[7]=e-m;b[8]=1-(a+v);return b};r.toMat4=function(a,b){b||(b=w.create());var c=a[0],e=a[1],d=a[2],f=a[3],m=c+c,l=e+e,h=d+d;a=c*m;var k=c*l,c=c*h,v=e*l,e=e*h,d=d*h,m=f*m,l=f*l,f=f*h;b[0]=1-(v+d);b[1]=k+f;b[2]=c-l;b[3]=
0;b[4]=k-f;b[5]=1-(a+d);b[6]=e+m;b[7]=0;b[8]=c+l;b[9]=e-m;b[10]=1-(a+v);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};r.slerp=function(a,b,d,f){f||(f=a);var c=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],e,g;if(1<=Math.abs(c))return f!==a&&(f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3]),f;e=Math.acos(c);g=Math.sqrt(1-c*c);if(.001>Math.abs(g))return f[0]=.5*a[0]+.5*b[0],f[1]=.5*a[1]+.5*b[1],f[2]=.5*a[2]+.5*b[2],f[3]=.5*a[3]+.5*b[3],f;c=Math.sin((1-d)*e)/g;d=Math.sin(d*e)/g;f[0]=a[0]*c+b[0]*d;f[1]=a[1]*c+
b[1]*d;f[2]=a[2]*c+b[2]*d;f[3]=a[3]*c+b[3]*d;return f};r.fromRotationMatrix=function(a,b){b||(b=r.create());var c=a[0]+a[4]+a[8],e;if(0<c)e=Math.sqrt(c+1),b[3]=.5*e,e=.5/e,b[0]=(a[7]-a[5])*e,b[1]=(a[2]-a[6])*e,b[2]=(a[3]-a[1])*e;else{e=r.fromRotationMatrix.s_iNext=r.fromRotationMatrix.s_iNext||[1,2,0];c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var d=e[c],f=e[d];e=Math.sqrt(a[3*c+c]-a[3*d+d]-a[3*f+f]+1);b[c]=.5*e;e=.5/e;b[3]=(a[3*f+d]-a[3*d+f])*e;b[d]=(a[3*d+c]+a[3*c+d])*e;b[f]=(a[3*f+c]+a[3*c+f])*
e}return b};x.toQuat4=r.fromRotationMatrix;(function(){var a=x.create();r.fromAxes=function(b,c,d,f){a[0]=c[0];a[3]=c[1];a[6]=c[2];a[1]=d[0];a[4]=d[1];a[7]=d[2];a[2]=b[0];a[5]=b[1];a[8]=b[2];return r.fromRotationMatrix(a,f)}})();r.identity=function(a){a||(a=r.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};r.fromAngleAxis=function(a,b,d){d||(d=r.create());a*=.5;var c=Math.sin(a);d[3]=Math.cos(a);d[0]=c*b[0];d[1]=c*b[1];d[2]=c*b[2];return d};r.toAngleAxis=function(a,e){e||(e=a);var c=a[0]*a[0]+a[1]*
a[1]+a[2]*a[2];0<c?(e[3]=2*Math.acos(a[3]),c=b.invsqrt(c),e[0]=a[0]*c,e[1]=a[1]*c,e[2]=a[2]*c):(e[3]=0,e[0]=1,e[1]=0,e[2]=0);return e};r.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var v={create:function(a){var b=new q(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,d,f){var c=new q(4);c[0]=a;c[1]=b;c[2]=d;c[3]=f;return c},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=v.create());
a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(!b||a===b)return b=a[1],a[1]=a[2],a[2]=b,a;b[0]=a[0];b[1]=a[2];b[2]=a[1];b[3]=a[3];return b},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,b){b||(b=a);var c=a[0],e=a[1],d=a[2];a=a[3];var f=c*a-d*e;if(!f)return null;f=1/f;b[0]=a*f;b[1]=-e*f;b[2]=-d*f;b[3]=c*f;return b},multiply:function(a,b,d){d||(d=a);var c=a[0],e=a[1],g=a[2];a=a[3];d[0]=c*b[0]+e*b[2];d[1]=c*b[1]+e*b[3];d[2]=g*b[0]+a*b[2];d[3]=g*b[1]+a*b[3];
return d},rotate:function(a,b,d){d||(d=a);var c=a[0],e=a[1],g=a[2];a=a[3];var f=Math.sin(b);b=Math.cos(b);d[0]=c*b+e*f;d[1]=c*-f+e*b;d[2]=g*b+a*f;d[3]=g*-f+a*b;return d},multiplyVec2:function(a,b,d){d||(d=b);var c=b[0];b=b[1];d[0]=c*a[0]+b*a[1];d[1]=c*a[2]+b*a[3];return d},scale:function(a,b,d){d||(d=a);var c=a[1],e=a[2],g=a[3],f=b[0];b=b[1];d[0]=a[0]*f;d[1]=c*b;d[2]=e*f;d[3]=g*b;return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};h=h?"":"d";a["glMath"+h]=b;a["vec2"+h]={create:function(a){var b=
new q(2);a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0);return b},createFrom:function(a,b){var c=new q(2);c[0]=a;c[1]=b;return c},add:function(a,b,d){d||(d=b);d[0]=a[0]+b[0];d[1]=a[1]+b[1];return d},subtract:function(a,b,d){d||(d=b);d[0]=a[0]-b[0];d[1]=a[1]-b[1];return d},multiply:function(a,b,d){d||(d=b);d[0]=a[0]*b[0];d[1]=a[1]*b[1];return d},divide:function(a,b,d){d||(d=b);d[0]=a[0]/b[0];d[1]=a[1]/b[1];return d},scale:function(a,b,d){d||(d=a);d[0]=a[0]*b;d[1]=a[1]*b;return d},dist:function(a,b){var c=
b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)},dist2:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a},set:function(a,b){b[0]=a[0];b[1]=a[1];return b},set2:function(a,b,d){d[0]=a;d[1]=b;return d},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];return b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0;return b},cross:function(a,b,d){a=a[0]*b[1]-a[1]*b[0];if(!d)return a;d[0]=d[1]=0;d[2]=a;return d},length:function(a){var b=
a[0];a=a[1];return Math.sqrt(b*b+a*a)},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,d){d||(d=a);var c=a[0]-b[0];a=a[1]-b[1];b=c*c+a*a;if(!b)return d[0]=0,d[1]=0,d[2]=0,d;b=1/Math.sqrt(b);d[0]=c*b;d[1]=a*b;return d},lerp:function(a,b,d,f){f||(f=a);f[0]=a[0]+d*(b[0]-a[0]);f[1]=a[1]+d*(b[1]-a[1]);return f},str:function(a){return"["+a[0]+", "+a[1]+"]"}};a["vec3"+h]=k;a["vec4"+h]={create:function(a){var b=new q(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=
0,b[3]=0);return b},createFrom:function(a,b,d,f){var c=new q(4);c[0]=a;c[1]=b;c[2]=d;c[3]=f;return c},add:function(a,b,d){d||(d=b);d[0]=a[0]+b[0];d[1]=a[1]+b[1];d[2]=a[2]+b[2];d[3]=a[3]+b[3];return d},subtract:function(a,b,d){d||(d=b);d[0]=a[0]-b[0];d[1]=a[1]-b[1];d[2]=a[2]-b[2];d[3]=a[3]-b[3];return d},multiply:function(a,b,d){d||(d=b);d[0]=a[0]*b[0];d[1]=a[1]*b[1];d[2]=a[2]*b[2];d[3]=a[3]*b[3];return d},divide:function(a,b,d){d||(d=b);d[0]=a[0]/b[0];d[1]=a[1]/b[1];d[2]=a[2]/b[2];d[3]=a[3]/b[3];
return d},scale:function(a,b,d){d||(d=a);d[0]=a[0]*b;d[1]=a[1]*b;d[2]=a[2]*b;d[3]=a[3]*b;return d},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},set4:function(a,b,d,f,m){m[0]=a;m[1]=b;m[2]=d;m[3]=f;return m},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b},lerp:function(a,b,d,f){f||(f=a);f[0]=a[0]+d*(b[0]-a[0]);f[1]=a[1]+d*(b[1]-a[1]);f[2]=a[2]+d*(b[2]-a[2]);f[3]=a[3]+d*(b[3]-
a[3]);return f},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};a["mat2"+h]=v;a["mat3"+h]=x;a["mat4"+h]=w;a["quat4"+h]=r});return a})},"esri/views/3d/support/projectionUtils":function(){define("require exports ../../../geometry/Point ../../../geometry/SpatialReference ../lib/glMatrix ./earthUtils ./mathUtils ../webgl-engine/lib/BufferVectorMath".split(" "),function(a,b,h,t,q,k,n,p){function d(a,b,c,d){2===a.length?(B[0]=a[0],B[1]=a[1],B[2]=0,a=B):a===c&&(q.vec3d.set(a,B),a=B);return l(a,
b,0,c,d,0,1)}function l(a,b,d,l,h,k,n){void 0===n&&(n=1);r!==b&&(m=f(b),r=b);v!==h&&(c=f(h),v=h);n=d+3*n;if(m!==c||m===w.UNKNOWN&&!b.equals(h))if(m>w.UNKNOWN&&c>w.UNKNOWN)if(c!==w.WGS84)if(b=e[c],m!==w.WGS84)for(h=g[m];d<n;d+=3,k+=3)h(a,d,I,0),b(I,0,l,k);else for(;d<n;d+=3,k+=3)b(a,d,l,k);else for(h=g[m];d<n;d+=3,k+=3)h(a,d,l,k);else return!1;else if(l!==a||d!==k)for(;d<n;d++,k++)l[k]=a[d];return!0}function f(a){return a.wkt===b.SphericalECEFSpatialReference.wkt?w.SPHERICAL_ECEF:a.isWGS84?w.WGS84:
a.isWebMercator?w.WEBMERC:a.wkt===b.WGS84ECEFSpatialReference.wkt?w.WGS84_ECEF:w.UNKNOWN}function z(a,b,c,d){c[d++]=a[b++];c[d++]=a[b++];c[d]=a[b]}function y(a,b,c,d){var e=.4999999*Math.PI,e=n.clamp(u*a[b+1],-e,e),e=Math.sin(e);c[d++]=u*a[b]*C;c[d++]=C/2*Math.log((1+e)/(1-e));c[d]=a[b+2]}function x(a,b,c,d){var e=C+a[b+2],f=u*a[b+1];a=u*a[b];b=Math.cos(f);c[d++]=Math.cos(a)*b*e;c[d++]=Math.sin(a)*b*e;c[d]=Math.sin(f)*e}Object.defineProperty(b,"__esModule",{value:!0});b.SphericalECEFSpatialReference=
new t({wkt:'GEOCCS["Spherical geocentric",\n  DATUM["Not specified",\n    SPHEROID["Sphere",\' + earthUtils.earthRadius + \',0]],\n  PRIMEM["Greenwich",0.0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",EAST],\n  AXIS["Geocentric Z",NORTH]\n]'});b.WGS84ECEFSpatialReference=new t({wkt:'GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",6378137,298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]'});
var w;(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";a[a.WGS84=2]="WGS84";a[a.WEBMERC=3]="WEBMERC";a[a.WGS84_ECEF=4]="WGS84_ECEF"})(w||(w={}));var r,m,v,c;b.vectorToVector=d;b.pointToVector=function(a,b,c){B[0]=a.x;B[1]=a.y;var d=a.z;B[2]=void 0!==d?d:0;return l(B,a.spatialReference,0,b,c,0,1)};b.vectorToPoint=function(a,b,c,d){"esri.geometry.SpatialReference"===c.declaredClass?(d=c,c=new h({spatialReference:d})):d=d||c.spatialReference;return l(a,b,0,B,d,0,1)?(c.x=B[0],
c.y=B[1],c.z=B[2],c.spatialReference=d,c):null};b.xyzToVector=function(a,b,c,d,e,f){B[0]=a;B[1]=b;B[2]=c;return l(B,d,0,e,f,0,1)};b.bufferToBuffer=l;b.computeLinearTransformation=function(a,b,c,d){var e=f(a),m=f(d);if(e===m&&m!==w.SPHERICAL_ECEF&&(e!==w.UNKNOWN||a.equals(d)))return q.mat4d.identity(c),q.mat4d.translate(c,b),!0;if(m===w.SPHERICAL_ECEF){if(a=g[e])return a(b,0,I,0),x(I,0,P,0),d=u*I[0],a=u*I[1],b=Math.sin(d),d=Math.cos(d),e=Math.sin(a),a=Math.cos(a),c[0]=-b,c[4]=-e*d,c[8]=a*d,c[12]=P[0],
c[1]=d,c[5]=-e*b,c[9]=a*b,c[13]=P[1],c[2]=0,c[6]=a,c[10]=e,c[14]=P[2],c[3]=0,c[7]=0,c[11]=0,c[15]=1,!0}else if(m===w.WEBMERC&&(e===w.WGS84||e===w.SPHERICAL_ECEF))return g[e](b,0,I,0),b=u*I[1],y(I,0,P,0),q.mat4d.identity(c),q.mat4d.translate(c,P),b=1/Math.cos(b),q.mat4d.scale(c,[b,b,1]),!0;return!1};b.transformDirection=function(a,b,c,e,f){q.vec3d.set(a,N);q.vec3d.add(a,b,Q);d(N,c,N,f);d(Q,c,Q,f);q.vec3d.subtract(Q,N,e);q.vec3d.normalize(e)};b.mbsToMbs=function(a,b,c,d){var e=f(b),m=f(d);if(e===m&&
(e!==w.UNKNOWN||b.equals(d)))return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],!0;if(m===w.SPHERICAL_ECEF){if(b=g[e])return b(a,0,I,0),x(I,0,c,0),c[3]=a[3],!0}else if(m===w.WEBMERC&&(e===w.WGS84||e===w.SPHERICAL_ECEF))return g[e](a,0,I,0),b=Math.abs(u*I[1])+Math.asin(a[3]/(C+a[2])),y(I,0,c,0),c[3]=b>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(b)*a[3],!0;return!1};b.extentToBoundingBox=function(a,b,c){if(null==a)return!1;var d;B[0]=null!=a.xmin?a.xmin:0;B[1]=null!=a.ymin?a.ymin:0;B[2]=null!=a.zmin?a.zmin:
0;d=l(B,a.spatialReference,0,b,c,0,1);B[0]=null!=a.xmax?a.xmax:0;B[1]=null!=a.ymax?a.ymax:0;B[2]=null!=a.zmax?a.zmax:0;d=d&&l(B,a.spatialReference,0,b,c,3,1);null==a.xmin&&(b[0]=-Infinity);null==a.ymin&&(b[1]=-Infinity);null==a.zmin&&(b[2]=-Infinity);null==a.xmax&&(b[3]=Infinity);null==a.ymax&&(b[4]=Infinity);null==a.zmax&&(b[5]=Infinity);return d};b.extentToBoundingRect=function(a,b,c){if(null==a)return!1;var d;B[0]=null!=a.xmin?a.xmin:0;B[1]=null!=a.ymin?a.ymin:0;B[2]=null!=a.zmin?a.zmin:0;d=l(B,
a.spatialReference,0,B,c,0,1);b[0]=B[0];b[1]=B[1];B[0]=null!=a.xmax?a.xmax:0;B[1]=null!=a.ymax?a.ymax:0;B[2]=null!=a.zmax?a.zmax:0;d=d&&l(B,a.spatialReference,0,B,c,0,1);b[2]=B[0];b[3]=B[1];null==a.xmin&&(b[0]=-Infinity);null==a.ymin&&(b[1]=-Infinity);null==a.xmax&&(b[2]=Infinity);null==a.ymax&&(b[3]=Infinity);return d};(function(a){a.x2lon=function(a){return a/C};a.y2lat=function(a){return Math.PI/2-2*Math.atan(Math.exp(-1*a/C))};a.lon2x=function(a){return a*C};a.lat2y=function(a){a=Math.sin(a);
return C/2*Math.log((1+a)/(1-a))}})(b.webMercator||(b.webMercator={}));var e=[void 0,x,z,y,function(a,b,c,d){var e=G,f=u*a[b],g=u*a[b+1];a=a[b+2];b=Math.sin(g);var g=Math.cos(g),m=e.a/Math.sqrt(1-e.e2*b*b);c[d++]=(m+a)*g*Math.cos(f);c[d++]=(m+a)*g*Math.sin(f);c[d++]=(m*(1-e.e2)+a)*b}],g=[void 0,function(a,b,c,d){var e=p.Vec3Compact.length(a,b),f=n.asin(a[b+2]/e);a=(0<a[b+1]?1:-1)*n.acos(a[b]/(Math.cos(f)*e));c[d++]=A*a;c[d++]=A*f;c[d]=e-C},z,function(a,b,c,d){c[d++]=A*(a[b++]/C);c[d++]=A*(Math.PI/
2-2*Math.atan(Math.exp(-1*a[b++]/C)));c[d]=a[b]},function(a,b,c,d){var e=G,f=a[b],g=a[b+1];a=a[b+2];var m,l,h,k,v,n;b=Math.abs(a);m=f*f+g*g;l=Math.sqrt(m);h=m+a*a;k=Math.sqrt(h);f=Math.atan2(g,f);v=a*a/h;h=m/h;g=e.a2/k;m=e.a3-e.a4/k;.3<h?(v=b/k*(1+h*(e.a1+g+v*m)/k),k=Math.asin(v),g=v*v,h=Math.sqrt(1-g)):(h=l/k*(1-v*(e.a5-g-h*m)/k),k=Math.acos(h),g=1-h*h,v=Math.sqrt(g));n=1-e.e2*g;g=e.a/Math.sqrt(n);e=e.a6*g;g=l-g*h;m=b-e*v;b=h*g+v*m;l=h*m-v*g;e=l/(e/n+b);k+=e;0>a&&(k=-k);c[d++]=A*f;c[d++]=A*k;c[d]=
b+l*e/2}],u=n.deg2rad(1),A=n.rad2deg(1),C=k.earthRadius,G={a:6378137,e2:.006694379990137799,a1:42697.67270715754,a2:1.8230912546075456E9,a3:142.91722289812412,a4:4.557728136518864E9,a5:42840.589930055656,a6:.9933056200098622},B=q.vec3d.create(),I=q.vec3d.create(),P=q.vec3d.create(),N=q.vec3d.create(),Q=q.vec3d.create()})},"esri/geometry/Point":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/accessorSupport/decorators ./Geometry ./SpatialReference ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(a,b,h,t,q,k,n,p,d,l){function f(a){return a&&("esri.geometry.SpatialReference"===a.declaredClass||null!=a.wkid)}var z=[0,0],y=q.getLogger("esri.geometry.Point");a=function(a){function b(b,d,c,e,f){b=a.call(this)||this;b.x=0;b.y=0;b.z=void 0;b.m=void 0;b.type="point";return b}h(b,a);n=b;b.copy=function(a,b){b.x=a.x;b.y=a.y;b.z=a.z;b.m=a.m;b.spatialReference=Object.isFrozen(a.spatialReference)?a.spatialReference:a.spatialReference.clone()};b.distance=function(a,b){var c=a.x-b.x,d=a.y-b.y;a=
a.hasZ&&b.hasZ?a.z-b.z:0;return Math.sqrt(c*c+d*d+a*a)};b.prototype.normalizeCtorArgs=function(a,b,c,d,g){var e;if(Array.isArray(a))e=a,g=b,a=e[0],b=e[1],c=e[2],d=e[3];else if(a&&"object"===typeof a){if(e=a,a=null!=e.x?e.x:e.longitude,b=null!=e.y?e.y:e.latitude,c=null!=e.z?e.z:e.altitude,d=e.m,(g=e.spatialReference)&&"esri.geometry.SpatialReference"!==g.declaredClass&&(g=new p(g)),null!=e.longitude||null!=e.latitude)null==e.longitude?y.warn(".longitude\x3d","Latitude was defined without longitude"):
null==e.latitude?y.warn(".latitude\x3d","Longitude was defined without latitude"):!e.declaredClass&&g&&g.isWebMercator&&(b=l.lngLatToXY(e.longitude,e.latitude,z),a=b[0],b=b[1])}else f(c)?(g=c,c=null):f(d)&&(g=d,d=null);a={x:a,y:b};null!=g&&(a.spatialReference=g);null!=c&&(a.z=c);null!=d&&(a.m=d);return a};Object.defineProperty(b.prototype,"hasM",{get:function(){return void 0!==this.m},set:function(a){var b=this._get("hasM");a!==b&&(this._set("m",a?0:void 0),this._set("hasM",a))},enumerable:!0,configurable:!0});
Object.defineProperty(b.prototype,"hasZ",{get:function(){return void 0!==this.z},set:function(a){var b=this._get("hasZ");a!==b&&(this._set("z",a?0:void 0),this._set("hasZ",a))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"latitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return l.xyToLngLat(this.x,this.y,z)[1];if(a.isWGS84)return this._get("y")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("y",
l.lngLatToXY(this.x,a,z)[1]):b.isWGS84&&this._set("y",a),this._set("latitude",a))},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"longitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return l.xyToLngLat(this._get("x"),this._get("y"),z)[0];if(a.isWGS84)return this._get("x")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("x",l.lngLatToXY(a,this._get("y"),z)[0]):b.isWGS84&&this._set("x",a),this._set("longitude",
a))},enumerable:!0,configurable:!0});b.prototype.clone=function(){var a=new n;a.x=this.x;a.y=this.y;a.z=this.z;a.m=this.m;a.spatialReference=this.spatialReference;return a};b.prototype.copy=function(a){n.copy(a,this);return this};b.prototype.equals=function(a){if(!a)return!1;var b=this.x,c=this.y,d=this.z,f=this.m,m=this.spatialReference,h=a.z,k=a.m,n=a.x,p=a.y;a=a.spatialReference;if(!m.equals(a))if(m.isWebMercator&&a.isWGS84)p=l.lngLatToXY(n,p),n=p[0],p=p[1],a=m;else if(m.isWGS84&&a.isWebMercator)p=
l.xyToLngLat(n,p),n=p[0],p=p[1],a=m;else return!1;return b===n&&c===p&&d===h&&f===k&&m.wkid===a.wkid};b.prototype.offset=function(a,b,c){this.x+=a;this.y+=b;null!=c&&this.hasZ&&(this.z+=c);return this};b.prototype.normalize=function(){if(!this.spatialReference)return this;var a=d.getInfo(this.spatialReference);if(!a)return this;var b=this.x,c=a.valid,a=c[0],e=c[1],c=2*e;b>e?(a=Math.ceil(Math.abs(b-e)/c),b-=a*c):b<a&&(a=Math.ceil(Math.abs(b-a)/c),b+=a*c);this._set("x",b);return this};b.prototype.distance=
function(a){return n.distance(this,a)};b.prototype.toArray=function(){var a=this.hasZ,b=this.hasM;return a&&b?[this.x,this.y,this.z,this.m]:a?[this.x,this.y,this.z]:b?[this.x,this.y,this.m]:[this.x,this.y]};b.prototype.toJSON=function(a){return this.write(null,a)};t([k.property({dependsOn:["x","y","z","m","spatialReference"]})],b.prototype,"cache",void 0);t([k.property({type:Boolean,dependsOn:["m"],json:{write:{enabled:!1,overridePolicy:null}}})],b.prototype,"hasM",null);t([k.property({type:Boolean,
dependsOn:["z"],json:{write:{enabled:!1,overridePolicy:null}}})],b.prototype,"hasZ",null);t([k.property({type:Number,dependsOn:["y"]})],b.prototype,"latitude",null);t([k.property({type:Number,dependsOn:["x"]})],b.prototype,"longitude",null);t([k.property({type:Number,json:{write:{isRequired:!0}}})],b.prototype,"x",void 0);t([k.property({type:Number,json:{write:!0}})],b.prototype,"y",void 0);t([k.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],b.prototype,
"z",void 0);t([k.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],b.prototype,"m",void 0);return b=n=t([k.subclass("esri.geometry.Point")],b);var n}(k.declared(n));a.prototype.toJSON.isDefaultToJSON=!0;return a})},"esri/geometry/Geometry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./SpatialReference".split(" "),function(a,b,h,t,q,k,n){return function(a){function b(){var b=
a.call(this)||this;b.type=null;b.extent=null;b.hasM=!1;b.hasZ=!1;b.spatialReference=n.WGS84;return b}h(b,a);Object.defineProperty(b.prototype,"cache",{get:function(){return{}},enumerable:!0,configurable:!0});b.prototype.clone=function(){console.warn(".clone() is not implemented for "+this.declaredClass);return null};b.prototype.clearCache=function(){this.notifyChange("cache")};b.prototype.getCacheValue=function(a){return this.cache[a]};b.prototype.setCacheValue=function(a,b){this.cache[a]=b};t([k.property()],
b.prototype,"type",void 0);t([k.property({readOnly:!0,dependsOn:["spatialReference"]})],b.prototype,"cache",null);t([k.property({readOnly:!0,dependsOn:["spatialReference"]})],b.prototype,"extent",void 0);t([k.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"hasM",void 0);t([k.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],b.prototype,"hasZ",void 0);t([k.property({type:n,json:{write:!0}})],b.prototype,"spatialReference",
void 0);return b=t([k.subclass("esri.geometry.Geometry")],b)}(k.declared(q))})},"esri/geometry/support/webMercatorUtils":function(){define(["require","exports","../SpatialReference","./spatialReferenceUtils"],function(a,b,h,t){function q(a,b,h,k,n){if("point"===a.type&&"point"===n.type)b=b(a.x,a.y,d,0,k),n.x=b[0],n.y=b[1];else if("extent"===a.type&&"extent"===n.type)f=b(a.xmin,a.ymin,d,0,k),n.xmin=f[0],n.ymin=f[1],b=b(a.xmax,a.ymax,d,0,k),n.xmax=b[0],n.ymax=b[1];else if("polyline"===a.type&&"polyline"===
n.type||"polygon"===a.type&&"polygon"===n.type){var f="polyline"===a.type?a.paths:a.rings,l=[],m=void 0;for(a=0;a<f.length;a++){var v=f[a],m=[];l.push(m);for(var c=0;c<v.length;c++)m.push(b(v[c][0],v[c][1],[0,0],0,k)),2<v[c].length&&m[c].push(v[c][2]),3<v[c].length&&m[c].push(v[c][3])}"polyline"===n.type?n.paths=l:n.rings=l}else if("multipoint"===a.type&&"multipoint"===n.type){f=a.points;l=[];for(a=0;a<f.length;a++)l[a]=b(f[a][0],f[a][1],[0,0],0,k),2<f[a].length&&l[a].push(f[a][2]),3<f[a].length&&
l[a].push(f[a][3]);n.points=l}else if("mesh"===a.type&&"mesh"===n.type&&(f=a.vertexAttributes&&a.vertexAttributes.position,l=n.vertexAttributes&&n.vertexAttributes.position,f))for(m=[0,0],a=0;a<f.length;a+=3)b(f[a],f[a+1],m,0,k),l[a]=m[0],l[a+1]=m[1];n.spatialReference=h;return n;var f}function k(a,b){a=a&&(null!=a.wkid||null!=a.wkt?a:a.spatialReference);b=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return a&&b?t.equals(b,a)?!0:t.isWebMercator(b)&&t.isWGS84(a)||t.isWebMercator(a)&&t.isWGS84(b):
!1}function n(a,b,d,h){void 0===d&&(d=[0,0]);void 0===h&&(h=0);89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999);b*=.017453292519943;d[h]=111319.49079327169*a;d[h+1]=3189068.5*Math.log((1+Math.sin(b))/(1-Math.sin(b)));return d}function p(a,b,d,h,k){void 0===d&&(d=[0,0]);void 0===h&&(h=0);void 0===k&&(k=!1);a=a/6378137*57.29577951308232;d[h]=k?a:a-360*Math.floor((a+180)/360);d[h+1]=57.29577951308232*(1.5707963267948966-2*Math.atan(Math.exp(-1*b/6378137)));return d}Object.defineProperty(b,"__esModule",
{value:!0});var d=[0,0];b.canProject=k;b.project=function(a,b){var d=a&&a.spatialReference;b=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return k(d,b)?t.equals(d,b)?a.clone():t.isWebMercator(b)?q(a,n,h.WebMercator,!1,a.clone()):t.isWGS84(b)?q(a,p,h.WGS84,!1,a.clone()):null:null};b.lngLatToXY=n;b.xyToLngLat=p;b.geographicToWebMercator=function(a,b,d){void 0===b&&(b=!1);void 0===d&&(d=a.clone());return q(a,n,h.WebMercator,b,d)};b.webMercatorToGeographic=function(a,b,d){void 0===b&&(b=!1);void 0===
d&&(d=a.clone());return q(a,p,h.WGS84,b,d)}})},"esri/views/3d/support/earthUtils":function(){define("require exports ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/webMercatorUtils ./mathUtils".split(" "),function(a,b,h,t,q,k){function n(a,d,f,l){var n,m;a instanceof h&&d instanceof h&&(f=d.longitude,l=d.latitude,m=a.latitude,n=a.longitude);a=k.deg2rad(m);l=k.deg2rad(l);n=k.deg2rad(n);d=k.deg2rad(f);f=Math.sin((a-l)/2);n=Math.sin((n-d)/2);f=2*k.asin(Math.sqrt(f*
f+Math.cos(a)*Math.cos(l)*n*n))*b.earthRadius;return Math.round(1E4*f)/1E4}function p(a,d,f){a=f/b.earthRadius;d=k.deg2rad(d);a=Math.sin(a/2);d=Math.cos(d);d=2*k.asin(Math.sqrt(a*a/(d*d)));return k.rad2deg(d)}function d(a,d,f){return k.rad2deg(f/b.earthRadius)}function l(a,b){a/=15;b||(a=Math.round(a));return a}Object.defineProperty(b,"__esModule",{value:!0});b.wgs84Radius=6378137;b.wgs84InverseFlattening=298.257223563;b.wgs84Flattening=1/b.wgs84InverseFlattening;b.wgs84PolarRadius=b.wgs84Radius*
(1-b.wgs84Flattening);b.wgs84Eccentricity=.0818191908426215;b.earthRadius=b.wgs84Radius;b.halfEarthCircumference=Math.PI*b.earthRadius;b.earthCircumference=2*b.halfEarthCircumference;b.metersPerDegree=b.halfEarthCircumference/180;var f=new h(0,0,t.WGS84);b.getGreatCircleDistance=n;b.getGreatCircleSpanAt=function(a,b,d){var f=b.spatialReference,l=new h(b.x,a.y,f),m=new h(d.x,a.y,f);b=new h(a.x,b.y,f);a=new h(a.x,d.y,f);return{lon:n(l,m),lat:n(b,a)}};b.getLonDeltaForDistance=p;b.getLatDeltaForDistance=
d;b.getLatLonDeltaForDistance=function(a,b,f){return{lat:d(a,b,f),lon:p(a,b,f)}};b.getMaxCameraAltitude=function(a){a=k.deg2rad(a/2);return(1-Math.sin(a))*b.earthRadius/Math.sin(a)};b.getViewExtentDistance=function(a,d){d=k.deg2rad(d/2);return 2*k.acos((Math.pow(a+b.earthRadius,2)+Math.pow(b.earthRadius,2)-Math.pow((a+b.earthRadius)*Math.cos(d)-Math.sqrt(Math.pow(Math.cos(d)*(a+b.earthRadius),2)-a*a-2*a*b.earthRadius),2))/(2*(a+b.earthRadius)*b.earthRadius))*b.earthRadius};b.computeCarthesianDistance=
function(a,d){function f(a){var d=k.deg2rad(a.latitude),f=k.deg2rad(a.longitude),h=Math.cos(d);a=b.earthRadius+(a.z||0);return[Math.cos(f)*h*a,Math.sin(d)*a,-Math.sin(f)*h*a]}a=f(a);d=f(d);d=[d[0]-a[0],d[1]-a[1],d[2]-a[2]];return Math.sqrt(d[0]*d[0]+d[1]*d[1]+d[2]*d[2])};b.longitudeToTimezone=l;b.positionToTimezone=function(a,b){a.spatialReference.wkid!==t.WGS84.wkid?q.webMercatorToGeographic(a,!1,f):(f.x=a.x,f.y=a.y);f.z=a.z;b||(b={hours:0,minutes:0,seconds:0});b.hours=l(f.x,!0);a=b.hours%1;b.hours-=
a;b.minutes=60*a;a=b.minutes%1;b.minutes-=a;b.seconds=Math.round(60*a);return b}})},"esri/views/3d/support/mathUtils":function(){define(["require","exports","../lib/glMatrix"],function(a,b,h){function t(a){return Math.asin(1<a?1:-1>a?-1:a)}function q(a){return Math.acos(1<a?1:-1>a?-1:a)}function k(a,b,d){return a<b?b:a>d?d:a}function n(a){for(var b in a){var d=a[b];d instanceof Function&&(a[b]=d.bind(a))}return a}Object.defineProperty(b,"__esModule",{value:!0});b.deg2rad=function(a){return a*Math.PI/
180};b.rad2deg=function(a){return 180*a/Math.PI};b.asin=t;b.acos=q;b.sign=Math.sign||function(a){return+(0<a)-+(0>a)||+a};b.log2=Math.log2||function(a){return Math.log(a)/Math.LN2};b.fovx2fovy=function(a,b,d){return 2*Math.atan(d*Math.tan(.5*a)/b)};b.fovy2fovx=function(a,b,d){return 2*Math.atan(b*Math.tan(.5*a)/d)};b.makeOrthonormal=function(a,b,d){d=d||a;var f=h.vec3d.dot(a,b);h.vec3d.set3(a[0]-f*b[0],a[1]-f*b[1],a[2]-f*b[2],d);h.vec3d.normalize(d)};b.tangentFrame=function(a,b,d){Math.abs(a[0])>
Math.abs(a[1])?h.vec3d.set3(0,1,0,b):h.vec3d.set3(1,0,0,b);h.vec3d.cross(a,b,d);h.vec3d.normalize(b);h.vec3d.cross(d,a,b);h.vec3d.normalize(d)};b.cartesianToSpherical=function(a,b){var d=h.vec3d.length(a),f=t(a[2]/d);h.vec3d.set3(d,f,Math.atan2(a[1]/d,a[0]/d),b)};b.sphericalToCartesian=function(a,b){var d=a[0],f=a[1];a=a[2];var l=Math.cos(f);h.vec3d.set3(d*l*Math.cos(a),d*l*Math.sin(a),d*Math.sin(f),b)};b.lerp=function(a,b,d){return a+(b-a)*d};b.bilerp=function(a,b,d,h,l,k){a+=(b-a)*l;return a+(d+
(h-d)*l-a)*k};b.slerp=function(a,b,k,n){void 0===n&&(n=a);var f=h.vec3d.length(a),p=h.vec3d.length(b),m=h.vec3d.dot(a,b)/(f*p);if(.9999999999999999>m){var m=Math.acos(m),v=((1-k)*f+k*p)/Math.sin(m),p=v/p*Math.sin(k*m);h.vec3d.scale(a,v/f*Math.sin((1-k)*m),d);h.vec3d.scale(b,p,l);return h.vec3d.add(d,l,n)}return h.vec3d.lerp(a,b,k,n)};b.angle=function(a,b,k){a=h.vec3d.normalize(a,d);b=h.vec3d.normalize(b,l);var f=q(h.vec3d.dot(a,b));return k&&(a=h.vec3d.cross(a,b,p),0>h.vec3d.dot(a,k))?-f:f};b.clamp=
k;b.isFinite=Number.isFinite||function(a){return"number"===typeof a&&window.isFinite(a)};b.isNaN=Number.isNaN||function(a){return a!==a};b.makePiecewiseLinearFunction=function(a){var b=a.length;return function(d){var f=0;if(d<=a[0][0])return a[0][1];if(d>=a[b-1][0])return a[b-1][1];for(;d>a[f][0];)f++;var h=a[f][0];d=(h-d)/(h-a[f-1][0]);return d*a[f-1][1]+(1-d)*a[f][1]}};b.vectorEquals=function(a,b){if(null==a||null==b)return a!==b;if(a.length!==b.length)return!1;for(var d=0;d<a.length;d++)if(a[d]!==
b[d])return!1;return!0};b.floatEqualRelative=function(a,d,h){void 0===h&&(h=1E-6);if(b.isNaN(a)||b.isNaN(d))return!1;if(a===d)return!0;var f=Math.abs(a-d),l=Math.abs(a),k=Math.abs(d);if(0===a||0===d||1E-12>l&&1E-12>k){if(f>.01*h)return!1}else if(f/(l+k)>h)return!1;return!0};b.floatEqualAbsolute=function(a,d,h){void 0===h&&(h=1E-6);return b.isNaN(a)||b.isNaN(d)?!1:(a>d?a-d:d-a)<=h};a=function(){function a(a,b){this.min=a;this.max=b;this.range=b-a}a.prototype.ndiff=function(a,b){void 0===b&&(b=0);return Math.ceil((a-
b)/this.range)*this.range+b};a.prototype._normalize=function(a,b,d,f){void 0===f&&(f=0);d-=f;d<a?d+=this.ndiff(a-d):d>b&&(d-=this.ndiff(d-b));return d+f};a.prototype.normalize=function(a,b){return this._normalize(this.min,this.max,a,b)};a.prototype.clamp=function(a,b){void 0===b&&(b=0);return k(a-b,this.min,this.max)+b};a.prototype.monotonic=function(a,b,d){return a<b?b:b+this.ndiff(a-b,d)};a.prototype.minimalMonotonic=function(a,b,d){return this._normalize(a,a+this.range,b,d)};a.prototype.center=
function(a,b,d){b=this.monotonic(a,b,d);return this.normalize((a+b)/2,d)};a.prototype.diff=function(a,b,d){return this.monotonic(a,b,d)-a};a.prototype.contains=function(a,b,d){b=this.minimalMonotonic(a,b);d=this.minimalMonotonic(a,d);return d>a&&d<b};return a}();b.Cyclical=a;b.cyclical2PI=n(new a(0,2*Math.PI));b.cyclicalPI=n(new a(-Math.PI,Math.PI));b.cyclicalDeg=n(new a(0,360));var p=h.vec3d.create(),d=h.vec3d.create(),l=h.vec3d.create()})},"esri/views/3d/webgl-engine/lib/BufferVectorMath":function(){define(["require",
"exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});(function(a){a.length=function(a,b){var h=a[b],n=a[b+1];a=a[b+2];return Math.sqrt(h*h+n*n+a*a)};a.normalize=function(a,b){var h=a[b],n=a[b+1],p=a[b+2],h=1/Math.sqrt(h*h+n*n+p*p);a[b]*=h;a[b+1]*=h;a[b+2]*=h};a.scale=function(a,b,h){a[b]*=h;a[b+1]*=h;a[b+2]*=h};a.add=function(a,b,h,n,p,d){void 0===d&&(d=b);p=p||a;p[d]=a[b]+h[n];p[d+1]=a[b+1]+h[n+1];p[d+2]=a[b+2]+h[n+2]};a.subtract=function(a,b,h,n,p,d){void 0===d&&(d=b);p=p||
a;p[d]=a[b]-h[n];p[d+1]=a[b+1]-h[n+1];p[d+2]=a[b+2]-h[n+2]}})(b.Vec3Compact||(b.Vec3Compact={}))})},"esri/views/3d/support/orientedBoundingBox":function(){define(["require","exports","../lib/glMatrix","./aaBoundingBox","./dito"],function(a,b,h,t,q){function k(a,b,d){return{center:h.vec3d.createFrom(a[0],a[1],a[2]),halfSize:f.createFrom(b[0],b[1],b[2]),quaternion:l.createFrom(d[0],d[1],d[2],d[3])}}function n(a,b){var f=d(a.center,b);a=p(a,b);return f>a?1:f<-a?-1:0}function p(a,b){l.conjugate(a.quaternion,
z);l.multiplyVec3(z,b,y);a=a.halfSize;return Math.abs(y[0]*a[0])+Math.abs(y[1]*a[1])+Math.abs(y[2]*a[2])}function d(a,b){return b[0]*a[0]+b[1]*a[1]+b[2]*a[2]+b[3]}Object.defineProperty(b,"__esModule",{value:!0});var l=h.quat4,f=h.vec3;a=h.mat3d;var z=l.create(),y=f.create(),x=f.create(),w=a.create();a=function(){return function(a){this.buffer=new ArrayBuffer(56*a);this.obbs=Array(a);for(var b=0;b<a;b++)this.obbs[b]={center:new Float64Array(this.buffer,56*b+0,3),halfSize:new Float32Array(this.buffer,
56*b+24,3),quaternion:new Float32Array(this.buffer,56*b+36,4)}}}();b.ObbArray=a;b.create=k;b.clone=function(a){return k(a.center,a.halfSize,a.quaternion)};b.set=function(a,b){h.vec3d.set(a.center,b.center);h.vec3.set(a.halfSize,b.halfSize);h.quat4.set(a.quaternion,b.quaternion)};b.compute=function(a,b){b||(b=k([0,0,0],[-1,-1,-1],[0,0,0,1]));q.computeOBB(a,b);return b};b.intersectPlane=n;b.toAaBoundingBox=function(a,b){b||(b=t.create());var d=l.toMat3(a.quaternion,w),c=a.halfSize[0]*Math.abs(d[0])+
a.halfSize[1]*Math.abs(d[3])+a.halfSize[2]*Math.abs(d[6]),e=a.halfSize[0]*Math.abs(d[1])+a.halfSize[1]*Math.abs(d[4])+a.halfSize[2]*Math.abs(d[7]),d=a.halfSize[0]*Math.abs(d[2])+a.halfSize[1]*Math.abs(d[5])+a.halfSize[2]*Math.abs(d[8]);b[0]=a.center[0]-c;b[1]=a.center[1]-e;b[2]=a.center[2]-d;b[3]=a.center[0]+c;b[4]=a.center[1]+e;b[5]=a.center[2]+d;return b};b.minimumDistancePlane=function(a,b){var f=d(a.center,b);a=p(a,b);return f-a};b.maximumDistancePlane=function(a,b){var f=d(a.center,b);a=p(a,
b);return f+a};b.isVisible=function(a,b){return 0>=n(a,b[0])&&0>=n(a,b[1])&&0>=n(a,b[2])&&0>=n(a,b[3])&&0>=n(a,b[4])&&0>=n(a,b[5])};b.intersectLine=function(a,b,d,c){void 0===c&&(c=0);l.conjugate(a.quaternion,z);h.vec3.subtract(b,a.center,y);b=l.multiplyVec3(z,y,y);d=l.multiplyVec3(z,d,x);for(var e=-Infinity,g=Infinity,f=0;3>f;f++)if(1E-6<Math.abs(d[f]))var k=(c+a.halfSize[f]-b[f])/d[f],m=(-c-a.halfSize[f]-b[f])/d[f],e=Math.max(e,Math.min(k,m)),g=Math.min(g,Math.max(k,m));else if(b[f]>a.halfSize[f]+
c||b[f]<-a.halfSize[f]-c)return!1;return e<=g}})},"esri/views/3d/support/aaBoundingBox":function(){define(["require","exports","../../../geometry/Extent","./aaBoundingRect"],function(a,b,h,t){function q(a){return a[0]>=a[3]?0:a[3]-a[0]}function k(a){return a[1]>=a[4]?0:a[4]-a[1]}function n(a){return a[2]>=a[5]?0:a[5]-a[2]}function p(a){return 6===a.length}Object.defineProperty(b,"__esModule",{value:!0});b.create=function(a){void 0===a&&(a=b.ZERO);return[a[0],a[1],a[2],a[3],a[4],a[5]]};b.fromExtent=
function(a){return[a.xmin,a.ymin,a.zmin,a.xmax,a.ymax,a.zmax]};b.toExtent=function(a,b){return isFinite(a[2])||isFinite(a[5])?new h({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],zmin:a[2],zmax:a[5],spatialReference:b}):new h({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],spatialReference:b})};b.fromMinMax=function(a,b){return[a[0],a[1],a[2],b[0],b[1],b[2]]};b.expand=function(a,b,f){void 0===f&&(f=a);var d=b.declaredClass;"esri.geometry.Extent"===d?(f[0]=Math.min(a[0],b.xmin),f[1]=Math.min(a[1],b.ymin),f[3]=
Math.max(a[3],b.xmax),f[4]=Math.max(a[4],b.ymax),b.hasZ&&(f[2]=Math.min(a[2],b.zmin),f[5]=Math.max(a[5],b.zmax))):"esri.geometry.Point"===d?(f[0]=Math.min(a[0],b.x),f[1]=Math.min(a[1],b.y),f[3]=Math.max(a[3],b.x),f[4]=Math.max(a[4],b.y),b.hasZ&&(f[2]=Math.min(a[2],b.z),f[5]=Math.max(a[5],b.z))):p(b)?(f[0]=Math.min(a[0],b[0]),f[1]=Math.min(a[1],b[1]),f[2]=Math.min(a[2],b[2]),f[3]=Math.max(a[3],b[3]),f[4]=Math.max(a[4],b[4]),f[5]=Math.max(a[5],b[5])):t.is(b)?(f[0]=Math.min(a[0],b[0]),f[1]=Math.min(a[1],
b[1]),f[3]=Math.max(a[3],b[2]),f[4]=Math.max(a[4],b[3])):Array.isArray(b)&&(2===b.length?(f[0]=Math.min(a[0],b[0]),f[1]=Math.min(a[1],b[1]),f[3]=Math.max(a[3],b[0]),f[4]=Math.max(a[4],b[1])):3===b.length&&(f[0]=Math.min(a[0],b[0]),f[1]=Math.min(a[1],b[1]),f[2]=Math.min(a[2],b[2]),f[3]=Math.max(a[3],b[0]),f[4]=Math.max(a[4],b[1]),f[5]=Math.max(a[5],b[2])));return f};b.expandBuffer=function(a,b,f,h,k){void 0===k&&(k=a);var d=a[0],l=a[1],n=a[2],m=a[3],v=a[4];a=a[5];for(var c=0;c<h;c++)d=Math.min(d,b[f+
3*c]),l=Math.min(l,b[f+3*c+1]),n=Math.min(n,b[f+3*c+2]),m=Math.max(m,b[f+3*c]),v=Math.max(v,b[f+3*c+1]),a=Math.max(a,b[f+3*c+2]);k[0]=d;k[1]=l;k[2]=n;k[3]=m;k[4]=v;k[5]=a;return k};b.allFinite=function(a){for(var b=0;6>b;b++)if(!isFinite(a[b]))return!1;return!0};b.width=q;b.depth=k;b.height=n;b.center=function(a,b){void 0===b&&(b=[0,0,0]);b[0]=a[0]+q(a)/2;b[1]=a[1]+k(a)/2;b[2]=a[2]+n(a)/2;return b};b.size=function(a,b){void 0===b&&(b=[0,0,0]);b[0]=q(a);b[1]=k(a);b[2]=n(a);return b};b.containsPoint=
function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[2]>=a[2]&&b[0]<=a[3]&&b[1]<=a[4]&&b[2]<=a[5]};b.containsPointWithMargin=function(a,b,f){return b[0]>=a[0]-f&&b[1]>=a[1]-f&&b[2]>=a[2]-f&&b[0]<=a[3]+f&&b[1]<=a[4]+f&&b[2]<=a[5]+f};b.contains=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[2]>=a[2]&&b[3]<=a[3]&&b[4]<=a[4]&&b[5]<=a[5]};b.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[3],a[3])&&Math.max(b[1],a[1])<=Math.min(b[4],a[4])&&Math.max(b[2],a[2])<=Math.min(b[5],a[5])};b.offset=function(a,
b,f,h,k){void 0===k&&(k=a);k[0]=a[0]+b;k[1]=a[1]+f;k[2]=a[2]+h;k[3]=a[3]+b;k[4]=a[4]+f;k[5]=a[5]+h;return k};b.setMin=function(a,b,f){void 0===f&&(f=a);f[0]=b[0];f[1]=b[1];f[2]=b[2];f!==a&&(f[3]=a[3],f[4]=a[4],f[5]=a[5]);return f};b.setMax=function(a,b,f){void 0===f&&(f=a);f[3]=b[0];f[4]=b[1];f[5]=b[2];f!==a&&(f[0]=a[0],f[1]=a[1],f[2]=a[2]);return a};b.set=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a};b.toRect=function(a,b){b||(b=t.create());b[0]=a[0];b[1]=a[1];
b[2]=a[3];b[3]=a[4];return b};b.fromRect=function(a,b){a[0]=b[0];a[1]=b[1];a[3]=b[2];a[4]=b[3];return a};b.is=p;b.isPoint=function(a){return 0===q(a)&&0===k(a)&&0===n(a)};b.equals=function(a,b,f){if(null==a||null==b)return a===b;if(!p(a)||!p(b))return!1;if(f)for(var d=0;d<a.length;d++){if(!f(a[d],b[d]))return!1}else for(d=0;d<a.length;d++)if(a[d]!==b[d])return!1;return!0};b.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];b.NEGATIVE_INFINITY=[Infinity,Infinity,Infinity,
-Infinity,-Infinity,-Infinity];b.ZERO=[0,0,0,0,0,0]})},"esri/geometry/Extent":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersects ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),function(a,b,h,t,q,k,n,p,d,l,f,z,y){function x(a,b,d){return null==b?d:null==d?b:a(b,d)}a=function(a){function b(){for(var b=
0;b<arguments.length;b++);b=a.call(this)||this;b.type="extent";b.xmin=0;b.ymin=0;b.mmin=void 0;b.zmin=void 0;b.xmax=0;b.ymax=0;b.mmax=void 0;b.zmax=void 0;return b}h(b,a);m=b;b.prototype.normalizeCtorArgs=function(a,b,e,g,f){return!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?"object"===typeof a?(a.spatialReference=null!=a.spatialReference?a.spatialReference:d.WGS84,a):{xmin:a,ymin:b,xmax:e,ymax:g,spatialReference:null!=f?f:d.WGS84}:{spatialReference:a,xmin:0,ymin:0,xmax:0,
ymax:0}};Object.defineProperty(b.prototype,"center",{get:function(){var a=new p({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});this.hasZ&&(a.z=.5*(this.zmin+this.zmax));this.hasM&&(a.m=.5*(this.mmin+this.mmax));return a},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"extent",{get:function(){return this.clone()},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasM",{get:function(){return null!=this.mmin&&null!=
this.mmax},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"hasZ",{get:function(){return null!=this.zmin&&null!=this.zmax},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"height",{get:function(){return Math.abs(this.ymax-this.ymin)},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"width",{get:function(){return Math.abs(this.xmax-this.xmin)},enumerable:!0,configurable:!0});b.prototype.centerAt=function(a){var b=this.center;return null!=a.z&&this.hasZ?
this.offset(a.x-b.x,a.y-b.y,a.z-b.z):this.offset(a.x-b.x,a.y-b.y)};b.prototype.clone=function(){var a=new m;a.xmin=this.xmin;a.ymin=this.ymin;a.xmax=this.xmax;a.ymax=this.ymax;a.spatialReference=this.spatialReference;null!=this.zmin&&(a.zmin=this.zmin,a.zmax=this.zmax);null!=this.mmin&&(a.mmin=this.mmin,a.mmax=this.mmax);return a};b.prototype.contains=function(a){if(!a)return!1;var b=this.spatialReference,d=a.spatialReference;b&&d&&!b.equals(d)&&y.canProject(b,d)&&(a=b.isWebMercator?y.geographicToWebMercator(a):
y.webMercatorToGeographic(a,!0));return"point"===a.type?l.extentContainsPoint(this,a):"extent"===a.type?l.extentContainsExtent(this,a):!1};b.prototype.equals=function(a){if(!a)return!1;var b=this.spatialReference,d=a.spatialReference;b&&d&&!b.equals(d)&&y.canProject(b,d)&&(a=b.isWebMercator?y.geographicToWebMercator(a):y.webMercatorToGeographic(a,!0));return this.xmin===a.xmin&&this.ymin===a.ymin&&this.zmin===a.zmin&&this.mmin===a.mmin&&this.xmax===a.xmax&&this.ymax===a.ymax&&this.zmax===a.zmax&&
this.mmax===a.mmax};b.prototype.expand=function(a){a=.5*(1-a);var b=this.width*a,d=this.height*a;this.xmin+=b;this.ymin+=d;this.xmax-=b;this.ymax-=d;this.hasZ&&(b=(this.zmax-this.zmin)*a,this.zmin+=b,this.zmax-=b);this.hasM&&(a*=this.mmax-this.mmin,this.mmin+=a,this.mmax-=a);return this};b.prototype.intersects=function(a){if(!a)return!1;var b=this.spatialReference,d=a.spatialReference;b&&d&&!b.equals(d)&&y.canProject(b,d)&&(a=b.isWebMercator?y.geographicToWebMercator(a):y.webMercatorToGeographic(a,
!0));b=f.getExtentIntersector(a.type);return"mesh"!==a.type?b(this,a):b(this,a.extent)};b.prototype.normalize=function(){var a=this._normalize(!1,!0);return Array.isArray(a)?a:[a]};b.prototype.offset=function(a,b,d){this.xmin+=a;this.ymin+=b;this.xmax+=a;this.ymax+=b;null!=d&&(this.zmin+=d,this.zmax+=d);return this};b.prototype.shiftCentralMeridian=function(){return this._normalize(!0)};b.prototype.union=function(a){this.xmin=Math.min(this.xmin,a.xmin);this.ymin=Math.min(this.ymin,a.ymin);this.xmax=
Math.max(this.xmax,a.xmax);this.ymax=Math.max(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=x(Math.min,this.zmin,a.zmin),this.zmax=x(Math.max,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=x(Math.min,this.mmin,a.mmin),this.mmax=x(Math.max,this.mmax,a.mmax);return this};b.prototype.intersection=function(a){if(!this.intersects(a))return null;this.xmin=Math.max(this.xmin,a.xmin);this.ymin=Math.max(this.ymin,a.ymin);this.xmax=Math.min(this.xmax,a.xmax);this.ymax=Math.min(this.ymax,a.ymax);if(this.hasZ||
a.hasZ)this.zmin=x(Math.max,this.zmin,a.zmin),this.zmax=x(Math.min,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=x(Math.max,this.mmin,a.mmin),this.mmax=x(Math.min,this.mmax,a.mmax);return this};b.prototype.toJSON=function(a){return this.write(null,a)};b.prototype._shiftCM=function(a){void 0===a&&(a=z.getInfo(this.spatialReference));if(!a||!this.spatialReference)return this;var b=this.spatialReference,e=this._getCM(a);if(e){var g=b.isWebMercator?y.webMercatorToGeographic(e):e;this.xmin-=e.x;this.xmax-=
e.x;b.isWebMercator||(g.x=this._normalizeX(g.x,a).x);this.spatialReference=new d(q.substitute({Central_Meridian:g.x},b.isWGS84?a.altTemplate:a.wkTemplate))}return this};b.prototype._getCM=function(a){var b=null,d=a.valid;a=d[0];var d=d[1],g=this.xmin,f=this.xmax;g>=a&&g<=d&&f>=a&&f<=d||(b=this.center);return b};b.prototype._normalize=function(a,b,d){var c=this.spatialReference;if(!c)return this;d=d||z.getInfo(c);if(!d)return this;var e=this._getParts(d).map(function(a){return a.extent});if(2>e.length)return e[0]||
this;if(2<e.length)return a?this._shiftCM(d):this.set({xmin:d.valid[0],xmax:d.valid[1]});if(a)return this._shiftCM(d);if(b)return e;var f=!0,h=!0;e.forEach(function(a){a.hasZ||(f=!1);a.hasM||(h=!1)});return{rings:e.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(f)for(var c=(a.zmax-a.zmin)/2,d=0;d<b.length;d++)b[d].push(c);if(h)for(a=(a.mmax-a.mmin)/2,d=0;d<b.length;d++)b[d].push(a);return b}),hasZ:f,hasM:h,spatialReference:c}};b.prototype._getParts=
function(a){var b=this.cache._parts;if(!b){var b=[],d=this.ymin,g=this.ymax,f=this.spatialReference,h=this.width,k=this.xmin,l=this.xmax,n=void 0;a=a||z.getInfo(f);var p=a.valid,v=p[0],q=p[1],n=this._normalizeX(this.xmin,a),t=n.x,p=n.frameId,n=this._normalizeX(this.xmax,a),r=n.x;a=n.frameId;n=t===r&&0<h;if(h>2*q){h=new m(k<l?t:r,d,q,g,f);k=new m(v,d,k<l?r:t,g,f);l=new m(0,d,q,g,f);d=new m(v,d,0,g,f);g=[];f=[];h.contains(l)&&g.push(p);h.contains(d)&&f.push(p);k.contains(l)&&g.push(a);k.contains(d)&&
f.push(a);for(v=p+1;v<a;v++)g.push(v),f.push(v);b.push({extent:h,frameIds:[p]},{extent:k,frameIds:[a]},{extent:l,frameIds:g},{extent:d,frameIds:f})}else t>r||n?b.push({extent:new m(t,d,q,g,f),frameIds:[p]},{extent:new m(v,d,r,g,f),frameIds:[a]}):b.push({extent:new m(t,d,r,g,f),frameIds:[p]});this.cache._parts=b}a=this.hasZ;d=this.hasM;if(a||d)for(p={},a&&(p.zmin=this.zmin,p.zmax=this.zmax),d&&(p.mmin=this.mmin,p.mmax=this.mmax),a=0;a<b.length;a++)b[a].extent.set(p);return b};b.prototype._normalizeX=
function(a,b){var c=b.valid;b=c[0];var d=c[1],c=2*d,f=0;a>d?(b=Math.ceil(Math.abs(a-d)/c),a-=b*c,f=b):a<b&&(b=Math.ceil(Math.abs(a-b)/c),a+=b*c,f=-b);return{x:a,frameId:f}};t([k.property({dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax spatialReference".split(" ")})],b.prototype,"cache",void 0);t([k.property({readOnly:!0,dependsOn:["cache"]})],b.prototype,"center",null);t([k.property({readOnly:!0,dependsOn:["cache"]})],b.prototype,"extent",null);t([k.property({readOnly:!0,dependsOn:["mmin","mmax"],
json:{write:{enabled:!1,overridePolicy:null}}})],b.prototype,"hasM",null);t([k.property({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],b.prototype,"hasZ",null);t([k.property({readOnly:!0,dependsOn:["ymin","ymax"]})],b.prototype,"height",null);t([k.property({readOnly:!0,dependsOn:["xmin","xmax"]})],b.prototype,"width",null);t([k.property({type:Number,json:{write:!0}})],b.prototype,"xmin",void 0);t([k.property({type:Number,json:{write:!0}})],b.prototype,"ymin",
void 0);t([k.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],b.prototype,"mmin",void 0);t([k.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],b.prototype,"zmin",void 0);t([k.property({type:Number,json:{write:!0}})],b.prototype,"xmax",void 0);t([k.property({type:Number,json:{write:!0}})],b.prototype,"ymax",void 0);t([k.property({type:Number,json:{origins:{"web-scene":{write:!1}},
write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],b.prototype,"mmax",void 0);t([k.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],b.prototype,"zmax",void 0);return b=m=t([k.subclass("esri.geometry.Extent")],b);var m}(k.declared(n));a.prototype.toJSON.isDefaultToJSON=!0;return a})},"esri/geometry/support/contains":function(){define(["require","exports"],function(a,b){function h(a,b,h,d){return b>=a.xmin&&b<=
a.xmax&&h>=a.ymin&&h<=a.ymax?null!=d&&a.hasZ?d>=a.zmin&&d<=a.zmax:!0:!1}function t(a,b){if(a=a.rings)if(Array.isArray(a[0][0])){for(var h=!1,d=0,k=a.length;d<k;d++)h=q(h,a[d],b);b=h}else b=q(!1,a,b);else b=!1;return b}function q(a,b,h){var d=h[0];h=h[1];for(var k=0,f=0,n=b.length;f<n;f++){k++;k===n&&(k=0);var p=b[f],q=p[0],p=p[1],t=b[k],r=t[0],t=t[1];(p<h&&t>=h||t<h&&p>=h)&&q+(h-p)/(t-p)*(r-q)<d&&(a=!a)}return a}Object.defineProperty(b,"__esModule",{value:!0});b.extentContainsPoint=function(a,b){return h(a,
b.x,b.y,b.z)};b.extentContainsExtent=function(a,b){var k=b.xmin,d=b.ymin,l=b.zmin,f=b.xmax,n=b.ymax,q=b.zmax;return a.hasZ&&b.hasZ?h(a,k,d,l)&&h(a,k,n,l)&&h(a,f,n,l)&&h(a,f,d,l)&&h(a,k,d,q)&&h(a,k,n,q)&&h(a,f,n,q)&&h(a,f,d,q):h(a,k,d)&&h(a,k,n)&&h(a,f,n)&&h(a,f,d)};b.extentContainsCoords2D=function(a,b){return h(a,b[0],b[1])};b.extentContainsCoords3D=function(a,b){return h(a,b[0],b[1],b[2])};b.polygonContainsPoint=function(a,b){return t(a,[b.x,b.y])};b.polygonContainsCoords=t})},"esri/geometry/support/intersects":function(){define(["require",
"exports","./contains"],function(a,b,h){function t(a,b){return h.extentContainsPoint(a,b)}function q(a,b){var c=a.hasZ&&b.hasZ,d;if(a.xmin<=b.xmin){if(d=b.xmin,a.xmax<d)return!1}else if(d=a.xmin,b.xmax<d)return!1;if(a.ymin<=b.ymin){if(d=b.ymin,a.ymax<d)return!1}else if(d=a.ymin,b.ymax<d)return!1;if(c&&b.hasZ)if(a.zmin<=b.zmin){if(c=b.zmin,a.zmax<c)return!1}else if(c=a.zmin,b.zmax<c)return!1;return!0}function k(a,b){var c=b.hasZ?h.extentContainsCoords3D:h.extentContainsCoords2D,d=0;for(b=b.points;d<
b.length;d++)if(c(a,b[d]))return!0;return!1}function n(a,b){f[0]=a.xmin;f[1]=a.ymax;z[0]=a.xmax;z[1]=a.ymax;y[0]=a.xmin;y[1]=a.ymin;x[0]=a.xmax;x[1]=a.ymin;for(var c=0,g=w;c<g.length;c++)if(h.polygonContainsCoords(b,g[c]))return!0;c=0;for(b=b.rings;c<b.length;c++)if(g=b[c],g.length){var k=g[0];if(h.extentContainsCoords2D(a,k))return!0;for(var m=1;m<g.length;m++){var l=g[m];if(h.extentContainsCoords2D(a,l)||d(k,l,r))return!0;k=l}}return!1}function p(a,b){f[0]=a.xmin;f[1]=a.ymax;z[0]=a.xmax;z[1]=a.ymax;
y[0]=a.xmin;y[1]=a.ymin;x[0]=a.xmax;x[1]=a.ymin;b=b.paths;for(var c=0;c<b.length;c++){var g=b[c];if(b.length){var k=g[0];if(h.extentContainsCoords2D(a,k))return!0;for(var m=1;m<g.length;m++){var l=g[m];if(h.extentContainsCoords2D(a,l)||d(k,l,r))return!0;k=l}}}return!1}function d(a,b,d){for(var c=0;c<d.length;c++)if(l(a,b,d[c][0],d[c][1]))return!0;return!1}function l(a,b,d,f,h){var c=a[0];a=a[1];var e=b[0];b=b[1];var g=d[0],k=d[1];d=f[0]-g;var g=c-g,m=e-c;f=f[1]-k;var k=a-k,l=b-a,n=f*m-d*l;if(0===
n)return!1;d=(d*k-f*g)/n;g=(m*k-l*g)/n;return 0<=d&&1>=d&&0<=g&&1>=g?(h&&(h[0]=c+d*(e-c),h[1]=a+d*(b-a)),!0):!1}Object.defineProperty(b,"__esModule",{value:!0});b.extentIntersectsPoint=t;b.extentIntersectsExtent=q;b.extentIntersectsMultipoint=k;var f=[0,0],z=[0,0],y=[0,0],x=[0,0],w=[f,z,y,x],r=[[y,f],[f,z],[z,x],[x,y]];b.extentIntersectsPolygon=n;b.extentIntersectsPolyline=p;var m=[0,0];b.isSelfIntersecting=function(a){for(var b=0;b<a.length;b++){for(var d=a[b],f=0;f<d.length-1;f++)for(var h=d[f],
k=d[f+1],n=b+1;n<a.length;n++)for(var p=0;p<a[n].length-1;p++){var q=a[n][p],v=a[n][p+1],t=l(h,k,q,v,m);if(t&&!(m[0]===h[0]&&m[1]===h[1]||m[0]===q[0]&&m[1]===q[1]||m[0]===k[0]&&m[1]===k[1]||m[0]===v[0]&&m[1]===v[1]))return!0}p=d.length;if(!(4>=p))for(f=0;f<p-3;f++){var r=p-1;0===f&&(r=p-2);h=d[f];k=d[f+1];for(n=f+2;n<r;n++)if(q=d[n],v=d[n+1],(t=l(h,k,q,v,m))&&!(m[0]===h[0]&&m[1]===h[1]||m[0]===q[0]&&m[1]===q[1]||m[0]===k[0]&&m[1]===k[1]||m[0]===v[0]&&m[1]===v[1]))return!0}}return!1};b.segmentIntersects=
l;b.getExtentIntersector=function(a){switch(a){case "esriGeometryEnvelope":case "extent":return q;case "esriGeometryMultipoint":case "multipoint":return k;case "esriGeometryPoint":case "point":return t;case "esriGeometryPolygon":case "polygon":return n;case "esriGeometryPolyline":case "polyline":return p;case "mesh":return q}}})},"esri/views/3d/support/aaBoundingRect":function(){define(["require","exports","./mathUtils"],function(a,b,h){function t(a){return a[0]>=a[2]?0:a[2]-a[0]}function q(a){return a[1]>=
a[3]?0:a[3]-a[1]}function k(a){return 4===a.length}Object.defineProperty(b,"__esModule",{value:!0});b.create=function(a){void 0===a&&(a=b.ZERO);return[a[0],a[1],a[2],a[3]]};b.fromExtent=function(a){return[a.xmin,a.ymin,a.xmax,a.ymax]};b.expand=function(a,b,d){void 0===d&&(d=a);var h=b.declaredClass;"esri.geometry.Extent"===h?(d[0]=Math.min(a[0],b.xmin),d[1]=Math.min(a[1],b.ymin),d[2]=Math.max(a[2],b.xmax),d[3]=Math.max(a[3],b.ymax)):"esri.geometry.Point"===h?(d[0]=Math.min(a[0],b.x),d[1]=Math.min(a[1],
b.y),d[2]=Math.max(a[2],b.x),d[3]=Math.max(a[3],b.y)):k(b)?(d[0]=Math.min(a[0],b[0]),d[1]=Math.min(a[1],b[1]),d[2]=Math.max(a[2],b[2]),d[3]=Math.max(a[3],b[3])):!Array.isArray(b)||2!==b.length&&3!==b.length||(d[0]=Math.min(a[0],b[0]),d[1]=Math.min(a[1],b[1]),d[2]=Math.max(a[2],b[0]),d[3]=Math.max(a[3],b[1]));return d};b.allFinite=function(a){for(var b=0;4>b;b++)if(!isFinite(a[b]))return!1;return!0};b.width=t;b.height=q;b.center=function(a,b){void 0===b&&(b=[0,0]);b[0]=a[0]+t(a)/2;b[1]=a[1]+q(a)/2;
return b};b.containsPoint=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[0]<=a[2]&&b[1]<=a[3]};b.containsPointWithMargin=function(a,b,d){return b[0]>=a[0]-d&&b[1]>=a[1]-d&&b[0]<=a[2]+d&&b[1]<=a[3]+d};b.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[2],a[2])&&Math.max(b[1],a[1])<=Math.min(b[3],a[3])};b.contains=function(a,b){return b[0]>=a[0]&&b[2]<=a[2]&&b[1]>=a[1]&&b[3]<=a[3]};b.intersection=function(a,b,d){void 0===d&&(d=a);var k=b[0],f=b[1],n=b[2];b=b[3];d[0]=h.clamp(a[0],k,n);
d[1]=h.clamp(a[1],f,b);d[2]=h.clamp(a[2],k,n);d[3]=h.clamp(a[3],f,b);return d};b.offset=function(a,b,d,h){void 0===h&&(h=a);h[0]=a[0]+b;h[1]=a[1]+d;h[2]=a[2]+b;h[3]=a[3]+d;return h};b.setMin=function(a,b,d){void 0===d&&(d=a);d[0]=b[0];d[1]=b[1];d!==a&&(d[2]=a[2],d[3]=a[3]);return d};b.setMax=function(a,b,d){void 0===d&&(d=a);d[2]=b[0];d[3]=b[1];d!==a&&(d[0]=a[0],d[1]=a[1]);return a};b.set=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a};b.is=k;b.isPoint=function(a){return(0===t(a)||
!isFinite(a[0]))&&(0===q(a)||!isFinite(a[1]))};b.equals=function(a,b,d){if(null==a||null==b)return a===b;if(!k(a)||!k(b))return!1;if(d)for(var h=0;h<a.length;h++){if(!d(a[h],b[h]))return!1}else for(h=0;h<a.length;h++)if(a[h]!==b[h])return!1;return!0};b.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];b.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];b.ZERO=[0,0,0,0]})},"esri/views/3d/support/dito":function(){define(["require","exports","../lib/glMatrix"],function(a,b,h){function t(a,
b,c,e,f,k){if(!(1E-6>h.vec3d.length2(b)))for(h.vec3d.cross(c,b,u),h.vec3d.cross(e,b,A),h.vec3d.cross(f,b,C),q(a,b,g),B[1]=g[0],G[1]=g[1],I[1]=G[1]-B[1],c=[c,e,f],e=[u,A,C],f=0;3>f;++f){q(a,c[f],g);B[0]=g[0];G[0]=g[1];q(a,e[f],g);B[2]=g[0];G[2]=g[1];I[0]=G[0]-B[0];I[2]=G[2]-B[2];var m=d(I);m<k.quality&&(h.vec3d.set(c[f],k.b0),h.vec3d.set(b,k.b1),h.vec3d.set(e[f],k.b2),k.quality=m)}}function q(a,b,c){var d=a.data,e=a.offsetIdx;a=a.strideIdx;c[0]=Number.POSITIVE_INFINITY;for(c[1]=Number.NEGATIVE_INFINITY;e<
d.length;e+=a){var f=d[e]*b[0]+d[e+1]*b[1]+d[e+2]*b[2];c[0]=Math.min(c[0],f);c[1]=Math.max(c[1],f)}}function k(a,b,c){h.vec3d.set(a,c.center);h.vec3d.scale(b,.5,c.halfSize);h.quat4.identity(c.quaternion)}function n(a,b,c,d,e,f){q(a,b,g);e[0]=g[0];f[0]=g[1];q(a,c,g);e[1]=g[0];f[1]=g[1];q(a,d,g);e[2]=g[0];f[2]=g[1]}function p(a,b,c,d,e,f,g){F[0]=a[0];F[3]=a[1];F[6]=a[2];F[1]=b[0];F[4]=b[1];F[7]=b[2];F[2]=c[0];F[5]=c[1];F[8]=c[2];h.quat4.fromRotationMatrix(F,g.quaternion);h.vec3d.add(d,e,T);h.vec3d.scale(T,
.5);h.vec3d.scale(a,T[0],g.center);h.vec3d.scale(b,T[1],H);h.vec3d.add(g.center,H);h.vec3d.scale(c,T[2],H);h.vec3d.add(g.center,H);h.vec3d.scale(f,.5,g.halfSize)}function d(a){return a[0]*a[1]+a[0]*a[2]+a[1]*a[2]}Object.defineProperty(b,"__esModule",{value:!0});var l=h.vec3d.create(),f=h.vec3d.create();b.computeOBB=function(a,b){var q=a.data.length/a.strideIdx;if(!(0>=q)){var u=new ha(a);h.vec3d.add(u.minProj,u.maxProj,l);h.vec3d.scale(l,.5);h.vec3d.subtract(u.maxProj,u.minProj,f);var A=d(f),B=new Y;
B.quality=A;14>q&&(a={data:new Float64Array(u.buffer,112,42),size:3,offsetIdx:0,strideIdx:3});var E=h.vec3d.create(),C=h.vec3d.create(),O=h.vec3d.create(),q=h.vec3d.create(),G=h.vec3d.create(),I=h.vec3d.create(),H=h.vec3d.create(),F;F=a;for(var T=h.vec3d.dist2(u.maxVert[0],u.minVert[0]),X=0,U=1;7>U;++U){var ca=h.vec3d.dist2(u.maxVert[U],u.minVert[U]);ca>T&&(T=ca,X=U)}h.vec3d.set(u.minVert[X],E);h.vec3d.set(u.maxVert[X],C);if(1E-6>h.vec3d.dist2(E,C))F=1;else{h.vec3d.subtract(E,C,q);h.vec3d.normalize(q);
u=F.data;T=F.strideIdx;X=Number.NEGATIVE_INFINITY;U=0;for(ca=F.offsetIdx;ca<u.length;ca+=T){h.vec3d.set3(u[ca]-E[0],u[ca+1]-E[1],u[ca+2]-E[2],e);var Z=q[0]*e[0]+q[1]*e[1]+q[2]*e[2],ga=h.vec3d.length2(q),Z=h.vec3d.length2(e)-Z*Z/ga;Z>X&&(X=Z,U=ca)}h.vec3d.set3(u[U],u[U+1],u[U+2],O);1E-6>X?F=2:(h.vec3d.subtract(C,O,G),h.vec3d.normalize(G),h.vec3d.subtract(O,E,I),h.vec3d.normalize(I),h.vec3d.cross(G,q,H),h.vec3d.normalize(H),t(F,H,q,G,I,B),F=0)}switch(F){case 1:k(l,f,b);return;case 2:A=a;h.vec3d.set(q,
N);Math.abs(q[0])>Math.abs(q[1])&&Math.abs(q[0])>Math.abs(q[2])?N[0]=0:Math.abs(q[1])>Math.abs(q[2])?N[1]=0:N[2]=0;1E-6>h.vec3d.length2(N)&&(N[0]=N[1]=N[2]=1);h.vec3d.cross(q,N,Q);h.vec3d.normalize(Q);h.vec3d.cross(q,Q,W);h.vec3d.normalize(W);n(A,q,Q,W,V,aa);h.vec3d.subtract(aa,V,ba);p(q,Q,W,V,aa,ba,b);return}F=a;u=z;T=y;X=g;U=F.data;Z=F.offsetIdx;ca=F.strideIdx;h.vec3d.set3(U[Z],U[Z+1],U[Z+2],T);h.vec3d.set(T,u);X[0]=h.vec3d.dot(P,H);X[1]=X[0];for(Z+=ca;Z<U.length;Z+=ca)h.vec3d.set3(U[Z],U[Z+1],
U[Z+2],P),ga=h.vec3d.dot(P,H),ga<X[0]&&(X[0]=ga,h.vec3d.set(P,T)),ga>X[1]&&(X[1]=ga,h.vec3d.set(P,u));H=h.vec3.dot(E,H);g[1]-1E-6<=H&&(u[0]=void 0);g[0]+1E-6>=H&&(T[0]=void 0);void 0!==z[0]&&(h.vec3d.subtract(z,E,x),h.vec3d.normalize(x),h.vec3d.subtract(z,C,w),h.vec3d.normalize(w),h.vec3d.subtract(z,O,r),h.vec3d.normalize(r),h.vec3d.cross(w,q,m),h.vec3d.normalize(m),h.vec3d.cross(r,G,v),h.vec3d.normalize(v),h.vec3d.cross(x,I,c),h.vec3d.normalize(c),t(F,m,q,w,x,B),t(F,v,G,r,w,B),t(F,c,I,x,r,B));void 0!==
y[0]&&(h.vec3d.subtract(y,E,x),h.vec3d.normalize(x),h.vec3d.subtract(y,C,w),h.vec3d.normalize(w),h.vec3d.subtract(y,O,r),h.vec3d.normalize(r),h.vec3d.cross(w,q,m),h.vec3d.normalize(m),h.vec3d.cross(r,G,v),h.vec3d.normalize(v),h.vec3d.cross(x,I,c),h.vec3d.normalize(c),t(F,m,q,w,x,B),t(F,v,G,r,w,B),t(F,c,I,x,r,B));n(a,B.b0,B.b1,B.b2,V,aa);a=h.vec3d.create();h.vec3d.subtract(aa,V,a);B.quality=d(a);B.quality<A?p(B.b0,B.b1,B.b2,V,aa,a,b):k(l,f,b)}};var z=h.vec3d.create(),y=h.vec3d.create(),x=h.vec3d.create(),
w=h.vec3d.create(),r=h.vec3d.create(),m=h.vec3d.create(),v=h.vec3d.create(),c=h.vec3d.create(),e=h.vec3d.create(),g=h.vec2d.create(),u=h.vec3d.create(),A=h.vec3d.create(),C=h.vec3d.create(),G=h.vec3d.create(),B=h.vec3d.create(),I=h.vec3d.create(),P=h.vec3d.create(),N=h.vec3d.create(),Q=h.vec3d.create(),W=h.vec3d.create(),V=h.vec3d.create(),aa=h.vec3d.create(),ba=h.vec3d.create(),H=h.vec3d.create(),F=h.mat3d.create(),T=h.vec3d.create(),ha=function(){return function(a){this.minVert=[];this.maxVert=
[];this.buffer=new ArrayBuffer(448);var b=0;this.minProj=new Float64Array(this.buffer,b,7);b+=56;this.maxProj=new Float64Array(this.buffer,b,7);for(b+=56;7>this.minVert.length;)this.minVert.push(new Float64Array(this.buffer,b,3)),b+=24;for(;7>this.maxVert.length;)this.maxVert.push(new Float64Array(this.buffer,b,3)),b+=24;for(b=0;7>b;++b)this.minProj[b]=Number.POSITIVE_INFINITY,this.maxProj[b]=Number.NEGATIVE_INFINITY;for(var c=[],d=[],e=a.data,f=a.strideIdx,b=a.offsetIdx;b<e.length;b+=f)a=e[b],a<
this.minProj[0]&&(this.minProj[0]=a,c[0]=b),a>this.maxProj[0]&&(this.maxProj[0]=a,d[0]=b),a=e[b+1],a<this.minProj[1]&&(this.minProj[1]=a,c[1]=b),a>this.maxProj[1]&&(this.maxProj[1]=a,d[1]=b),a=e[b+2],a<this.minProj[2]&&(this.minProj[2]=a,c[2]=b),a>this.maxProj[2]&&(this.maxProj[2]=a,d[2]=b),a=e[b]+e[b+1]+e[b+2],a<this.minProj[3]&&(this.minProj[3]=a,c[3]=b),a>this.maxProj[3]&&(this.maxProj[3]=a,d[3]=b),a=e[b]+e[b+1]-e[b+2],a<this.minProj[4]&&(this.minProj[4]=a,c[4]=b),a>this.maxProj[4]&&(this.maxProj[4]=
a,d[4]=b),a=e[b]-e[b+1]+e[b+2],a<this.minProj[5]&&(this.minProj[5]=a,c[5]=b),a>this.maxProj[5]&&(this.maxProj[5]=a,d[5]=b),a=e[b]-e[b+1]-e[b+2],a<this.minProj[6]&&(this.minProj[6]=a,c[6]=b),a>this.maxProj[6]&&(this.maxProj[6]=a,d[6]=b);for(b=0;7>b;++b)a=c[b],h.vec3d.set3(e[a],e[a+1],e[a+2],this.minVert[b]),a=d[b],h.vec3d.set3(e[a],e[a+1],e[a+2],this.maxVert[b])}}(),Y=function(){return function(){this.b0=h.vec3d.createFrom(1,0,0);this.b1=h.vec3d.createFrom(0,1,0);this.b2=h.vec3d.createFrom(0,0,1);
this.quality=0}}()})},"esri/views/3d/webgl-engine/lib/PreinterleavedGeometryData":function(){define(["require","exports","./ComponentUtils","./geometryDataUtils","../../../webgl/Util"],function(a,b,h,t,q){function k(a){switch(a){case 5120:return Int8Array;case 5126:return Float32Array;case 5124:return Int32Array;case 5122:return Int16Array;case 5121:return Uint8Array;case 5125:return Uint32Array;case 5123:return Uint16Array}throw Error("Unhandled data type: "+a);}return function(){function a(b,d,
l,f,n){void 0===l&&(l=null);void 0===f&&(f=a.DefaultOffsets);void 0===n&&(n=a.DefaultIndices);this.preinterleaved=!0;this.primitiveType="triangle";this._positionData=null;var p=q.getStride(d)/4,p=b.length/p;(this._hasDefaultIndices=n===a.DefaultIndices)&&(n=t.generateDefaultIndexArray(p));for(var p={},x=0;x<d.length;x++){var w=d[x],r=new (k(w.type))(b.buffer),m=q.getBytesPerElement(w.type);p[w.name]={data:r,size:w.count,offsetIdx:w.offset/m,strideIdx:w.stride/m}}l&&(this._positionData=l,p.position=
{data:l.data,size:3,offsetIdx:0,strideIdx:3});this._id=t.getNewId();this._vertexData=b;this._vertexAttributes=p;this._layout=d;this._indexData=n;this._componentOffsets=h.createOffsets(f);this._gpuMemoryUsage=b.byteLength+(this._hasDefaultIndices?0:n.byteLength)}Object.defineProperty(a.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"componentOffsets",{get:function(){return this._componentOffsets},enumerable:!0,configurable:!0});a.prototype.toRenderData=function(){var a={id:this._id.toString(),preinterleaved:!0,indexData:this._hasDefaultIndices?null:this._indexData,indexCount:this._indexData.length,vertexData:this._vertexData,layout:this._layout};this._indexData=this._vertexData=null;this._vertexAttributes={position:this._vertexAttributes.position};return a};a.prototype.getIndices=function(a){return"position"===a&&this._positionData?
this._positionData.indices:this._indexData};a.prototype.getAttribute=function(a){return this._vertexAttributes[a]};a.prototype.estimateGpuMemoryUsage=function(){return this._gpuMemoryUsage};a.DefaultOffsets=new Uint32Array(0);a.DefaultIndices=new Uint32Array(0);return a}()})},"esri/views/3d/webgl-engine/lib/ComponentUtils":function(){define(["require","exports","../../../../core/arrayUtils"],function(a,b,h){function t(a,b){if(null!=a){var c=a.isVisibleBit,d=a.data,f=8*d.BYTES_PER_ELEMENT;return b<
d.length*f?y(c,d,b,f):!a.isVisibleBit}return!0}function q(a){return null===a.component?-1:a.component}function k(a,b,c,d,f){t(b,d)&&n(a,b,c,c[d],c[d+1]-1,f)}function n(a,b,c,d,f,h){c=(b=0<a.length?a[a.length-1]:null)?b.range[1]:-1;var e=b?b.options:null;c>=d||(c+1===d&&e===h?b.range[1]=f:a.push({range:[d,f],options:h}))}function p(a){void 0===a&&(a=!0);return{isVisibleBit:!a,data:new Uint32Array(0)}}function d(a,b){return f(a,b,!0)}function l(a,b){return f(a,b,!1)}function f(a,b,c){var d=!1;a=a||
w;d=a.isVisibleBit;a=a.data;b=x(b);var f=8*a.BYTES_PER_ELEMENT,h=a.length*f;c=c===d;if(0===a.length||0===b)d=!c;else if(h<b&&!c)d=!0;else{for(var k=r[f],h=r[0],m=0;m<a.length-1;m++)if(d=!c&&a[m]!==k||c&&a[m]!==h)return d;d=a.length-1;b=r[(b-1)%f+1];d=!c&&(a[d]&b)!==b||c&&(a[d]&b)!==h}return d}function z(a){return 0<a.length}function y(a,b,c,d){var e=c/d|0;return 0!==(b[e]&1<<c-e*d)===a}function x(a){return Math.max(0,a.length-1)}Object.defineProperty(b,"__esModule",{value:!0});b.updateVisibility=
function(a,b,c,d){if(c<x(b)){null==a&&(a=p());var e=a.isVisibleBit,f=a.data,h=8*f.BYTES_PER_ELEMENT,k=c/h|0,m=c-h*k;b=(x(b)-1)/h|0;var l=f;d=d===e;c<l.length*h||!d||(c=Math.max(k+1,Math.ceil(1.5*l.length)),c=Math.min(c,b+1),f=new Uint32Array(c),f.set(l));k<f.length&&(f[k]=f[k]&~(1<<m)|(d?1:0)<<m);a.data=f}return a};b.getVisibility=t;b.hideAllComponents=function(a){if(null==a)a=p(!1);else{a.isVisibleBit=!0;for(var b=0;b<a.data.length;b++)a.data[b]=0}return a};b.unhideAllComponents=function(a){var b;
if(null!=a)for(b=a,b.isVisibleBit=!1,a=0;a<b.data.length;a++)b.data[a]=0;return b};b.generateVisibleIndexRanges=function(a,b){var c;if(a)if(z(b))if(0===a.data.length)c=[],b=[[b[0],b[b.length-1]-1]],c=a.isVisibleBit?c:b;else{c=[];for(var d=a.isVisibleBit,f=a.data,h=8*f.BYTES_PER_ELEMENT,k=f.length*h,m=x(b),l=!1,n=0;n<k&&n<m;n++){var p=y(d,f,n,h);if(p!==l){var q=b[n];p?c.push([q,0]):(l=c[c.length-1],l[1]=q-1);l=p}}a=!a.isVisibleBit;m>k&&a&&!l?c.push([b[k],b[m]-1]):l&&(l=c[c.length-1],l[1]=b[a?m:Math.min(m,
k)]-1)}else c=[],c=a.isVisibleBit?c:null;else c=null;return c};b.addHighlight=function(a,b,c,d){a=a||[];b={component:b,options:c,id:d};a.push(b);b=q(b);for(c=a.length-1;0<c&&b<q(a[c-1]);)d=[a[c],a[c-1]],a[c-1]=d[0],a[c]=d[1],--c;return a};b.removeHighlight=function(a,b){return a?(a=a.filter(function(a){return a.id!==b}),0===a.length?null:a):a};b.generateHighlightedIndexRanges=function(a,b,c){if(b){if(z(c)){for(var d=c[0],f=c[c.length-1]-1,h=[],m=!l(a,c),p=0;p<b.length;++p){var q=b[p].options,t=b[p].component;
if(null!==t)k(h,a,c,t,q);else if(m)n(h,a,c,d,f,q);else for(t=0;t<x(c);++t)k(h,a,c,t,q)}return 0<h.length?h:null}var m=!a||!a.isVisibleBit;return m?b.map(function(a){return{range:null,options:a.options}}):null}return null};b.defaultVisibilities=p;b.isAllVisible=function(a,b){return!l(a,b)};b.isAllHidden=function(a,b){return!d(a,b)};b.hasVisible=d;b.hasHidden=l;var w=p();b.createOffsets=function(a){return Array.isArray(a)?new Uint32Array(a):a};b.hasComponent=function(a,b){return b<x(a)};b.hasComponents=
z;var r=[];for(a=0;65>a;a++)r.push(Math.pow(2,a)-1);b.componentCount=x;b.componentFind=function(a,b){a=h.binaryIndexOf(a,b,!0);return 0<=a?a:null}})},"esri/core/arrayUtils":function(){define([],function(){function a(a,b){return-1===a.indexOf(b)}function b(a,b,h){return!a.some(b.bind(null,h))}var h={findIndex:function(a,b,h){for(var k=a.length,p,d=0;d<k;d++)if(p=a[d],b.call(h,p,d,a))return d;return-1},find:function(a,b,h){for(var k=a.length,p,d=0;d<k;d++)if(p=a[d],b.call(h,p,d,a))return p},equals:function(a,
b,h){if(!a&&!b)return!0;if(!a||!b||a.length!=b.length)return!1;if(h)for(var k=0;k<a.length;k++){if(!h(a[k],b[k]))return!1}else for(h=0;h<a.length;h++)if(a[h]!==b[h])return!1;return!0},difference:function(h,q,k){var n;k?(n=q.filter(b.bind(null,h,k)),h=h.filter(b.bind(null,q,k))):(n=q.filter(a.bind(null,h)),h=h.filter(a.bind(null,q)));return{added:n,removed:h}},intersect:function(a,b,k){return a&&b?k?a.filter(function(a){return-1<h.findIndex(b,function(b){return k(a,b)})}):a.filter(function(a){return-1<
b.indexOf(a)}):[]},range:function(a,b){null==b&&(b=a,a=0);for(var h=Array(b-a),n=a;n<b;n++)h[n-a]=n;return h},constant:function(a,b){for(var h=Array(a),n=0;n<a;n++)h[n]=b;return h},binaryIndexOf:function(a,b,h){for(var k=a.length,p=0,d=k-1;p<d;){var l=p+Math.floor((d-p)/2);b>a[l]?p=l+1:d=l}d=a[p];return h?b>=a[k-1]?-1:d===b?p:p-1:d===b?p:-1}};return h})},"esri/views/3d/webgl-engine/lib/geometryDataUtils":function(){define(["require","exports"],function(a,b){Object.defineProperty(b,"__esModule",{value:!0});
var h=1,t=null;b.generateDefaultIndexArray=function(a){if(a>h||null==t){for(;a>h;)h*=2;t=new Uint32Array(h);for(var b=0;b<h;b++)t[b]=b}return new Uint32Array(t.buffer,0,a)};var q=0;b.getNewId=function(){return q++}})},"esri/views/webgl/Util":function(){define(["require","exports","../../core/tsSupport/assignHelper","../../core/Error"],function(a,b,h,t){return function(){function a(){}a.vertexCount=function(b,h){return b.vertexBuffers[h].size/a.getStride(b.layout[h])};a.getStride=function(a){return a[0].stride};
a.getBytesPerElement=function(a){switch(a){case 5126:return 4;case 5124:return 4;case 5125:return 4;case 5122:return 2;case 5123:return 2;case 5120:return 1;case 5121:return 1;default:throw Error("Unknown data type");}};a.addDescriptor=function(b,h,p,d,l,f){var k=a.getBytesPerElement(d);if(0<b.length){var n=b[0].stride,q=n+k*p;b.forEach(function(a){return a.stride=q});b.push({name:h,count:p,type:d,offset:n,stride:q,normalized:l,divisor:f})}else b.push({name:h,count:p,type:d,offset:0,stride:k*p,normalized:l,
divisor:f})};a.assertCompatibleVertexAttributeLocations=function(a,b){(a=a.locations===b.locations)||console.error("VertexAttributeLocations are incompatible");return a};a.hasAttribute=function(a,b){for(var h=0;h<a.length;h++)if(a[h].name===b)return!0;return!1};a.findAttribute=function(a,b){for(var h=0;h<a.length;h++)if(a[h].name===b)return a[h];return null};a.copyFramebufferToTexture=function(a,b,h,d,l){void 0===l&&(l=0);var f=a.getBoundFramebufferObject(),k=a.getBoundTexture(0);a.bindFramebuffer(b);
a.bindTexture(h,0);a.gl.copyTexImage2D(a.gl.TEXTURE_2D,l,h.descriptor.pixelFormat,d[0],d[1],d[2],d[3],0);a.gl.flush();a.bindFramebuffer(f);a.bindTexture(k,0)};a.assert=function(a,b){if(!a)throw new t(b);};a.setBaseInstanceOffset=function(a,b){var k={},d;for(d in a)k[d]=a[d].map(function(a){return a.divisor?h({},a,{baseInstance:b}):a});return k};return a}()})},"esri/core/tsSupport/assignHelper":function(){define([],function(){return Object.assign||function(a){for(var b,h=1,t=arguments.length;h<t;h++){b=
arguments[h];for(var q in b)Object.prototype.hasOwnProperty.call(b,q)&&(a[q]=b[q])}return a}})},"*noref":1}});
define("require exports ../../../core/promiseUtils ../../../geometry/SpatialReference ./i3s/I3SGeometryUtil ./i3s/I3SProjectionUtil ../lib/glMatrix ../support/meshProcessing ../support/orientedBoundingBox ../support/projectionUtils ../webgl-engine/lib/PreinterleavedGeometryData ../webgl-engine/lib/Util".split(" "),function(a,b,h,t,q,k,n,p,d,l,f,z){a=function(){function a(){}a.prototype.process=function(a){var b=[a.geometryBuffer];return h.resolve({result:this.transform(a,b),transferList:b})};a.prototype.transform=
function(a,b){var c=t.fromJSON(a.indexSR),e=t.fromJSON(a.vertexSR),g=t.fromJSON(a.renderSR),h=a.hasColors,m=0,r=[],v=a.obb?null:d.create([0,0,0],[-1,-1,-1],[0,0,0,1]);n.vec3d.set(a.center,y);y[2]+=a.elevationOffset;var w=n.mat4d.create();l.computeLinearTransformation(c,y,w,g);for(var x=0,P=a.geometryData;x<P.length;x++)for(var N=P[x],Q=N.componentOffsets,W=0,N=N.geometries;W<N.length;W++){var V=N[W],aa=a.layouts[m];++m;var ba=q.interleaveGeometryBuffer(V,a.geometryBuffer,aa,[{name:z.VertexAttrConstants.COLOR,
byteValue:255}],[z.VertexAttrConstants.NORMAL,z.VertexAttrConstants.NORMALCOMPRESSED,z.VertexAttrConstants.SYMBOLCOLOR,z.VertexAttrConstants.COMPONENTINDEX]),H=new f(new Float32Array(ba),aa),F=H.getAttribute(z.VertexAttrConstants.POSITION),T=k.reprojectPoints(F,a.center,a.elevationOffset,c,e,g);v&&this._updateObb(v,F,w);a.needNormals&&(F={normals:H.getAttribute(z.VertexAttrConstants.NORMALCOMPRESSED),positions:F,normalInd:H.getIndices(z.VertexAttrConstants.NORMALCOMPRESSED),positionInd:H.getIndices(z.VertexAttrConstants.POSITION)},
q.processAndInterleaveNormals(a.normalReferenceFrame,V,a.geometryBuffer,T.globalTrafo,F));(V=H.getAttribute(z.VertexAttrConstants.COMPONENTINDEX))&&this._createComponentNumbers(V,Q);(H=H.getAttribute(z.VertexAttrConstants.COLOR))&&(h=h||this._hasNonWhiteColors(H));H=aa[0].stride;H=p.deduplicate(ba,H/4,1-.8*H/(H+4));null!=H?(ba=65536>H.uniqueCount?new Uint16Array(H.indices):H.indices,r.push({layout:aa,interleavedVertexData:H.buffer,indices:ba,corMatrices:T,hasNonWhiteColors:h}),b&&(b.push(H.buffer),
b.push(ba.buffer))):(r.push({layout:aa,interleavedVertexData:ba,corMatrices:T,hasNonWhiteColors:h}),b&&b.push(ba))}v&&(n.mat4d.multiplyVec3(w,v.center,v.center),l.vectorToVector(v.center,g,v.center,e),v.center[2]-=a.elevationOffset);return{geometryBuffer:a.geometryBuffer,transformedGeometries:r,obb:v?v:a.obb}};a.prototype._hasNonWhiteColors=function(a){var b=a.data,c=a.size,d=a.strideIdx;for(a=a.offsetIdx;a<b.length;a+=d)for(var f=0;f<c;f++)if(255!==b[a+f])return!0;return!1};a.prototype._createComponentNumbers=
function(a,b){var c=a.data,d=a.strideIdx,f=c.length/d,h=0;a=a.offsetIdx;for(var k=0;k<f;k++)k>=b[h+1]&&h++,c[a]=h,a+=d};a.prototype._updateObb=function(a,b,c){if(0<a.halfSize[0]){n.vec3.subtract(a.center,a.halfSize,y);n.vec3.add(a.center,a.halfSize,x);for(c=b.offsetIdx;c<b.data.length;c+=b.strideIdx)y[0]=Math.min(y[0],b.data[c]),y[1]=Math.min(y[1],b.data[c+1]),y[2]=Math.min(y[2],b.data[c+2]),x[0]=Math.max(x[0],b.data[c]),x[1]=Math.max(x[1],b.data[c+1]),x[2]=Math.max(x[2],b.data[c+2]);n.vec3.subtract(x,
y,a.halfSize);n.vec3d.scale(a.halfSize,.5);n.vec3d.add(y,x,a.center);n.vec3d.scale(a.center,.5)}else d.compute(b,a),b=2*Math.sqrt(1+c[0]+c[5]+c[10]),w[0]=(c[9]-c[6])/b,w[1]=(c[2]-c[8])/b,w[2]=(c[4]-c[1])/b,w[3]=.25*b,n.quat4.conjugate(w),n.quat4.multiply(w,a.quaternion,a.quaternion)};return a}();var y=n.vec3d.create(),x=n.vec3d.create(),w=n.quat4.create();return a});