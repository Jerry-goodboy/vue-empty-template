// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.7/esri/copyright.txt for details.
//>>built
define("require exports ./enums ./enums ./MaterialInfoUtils ./mesh ./textMeshUtils ./Utils ./visualVariablesUtils ./WGLDisplayObject ./WGLDisplayRecord".split(" "),function(E,q,l,g,z,A,B,f,u,C,D){function v(f,h){if(!f)return l.WGLVVFlag.NONE;for(var k=0,g=0;g<f.length;g++){var m=f[g];"size"===m.type&&"outline"!==m.target?k|=u.getTypeOfSizeVisualVariable(m):"color"===m.type?k|=l.WGLVVFlag.COLOR:"opacity"===m.type?k|=l.WGLVVFlag.OPACITY:h&&"rotation"===m.type&&(k|=l.WGLVVFlag.ROTATION)}return k}Object.defineProperty(q,
"__esModule",{value:!0});var h=[];q.getDisplayObject=function(t,p,k,w,m,q,n){p=t.attributes[p];var x=new C(p);h.length=0;var b=k.renderer,e=k.getSymbol(t);if(e){var a=f.isMarkerSymbol(e)||f.isTextSymbol(e);if("esriGeometryPoint"===w||"esriGeometryPolyline"===w)h.push({symbol:e,vv:v(b.visualVariables,a)});else if(a){if(b.backgroundFillSymbol&&(a=b.backgroundFillSymbol,h.push({symbol:a,vv:l.WGLVVFlag.NONE}),a.outline&&"none"!==a.outline.style)){var d=l.WGLVVFlag.NONE;if(b.visualVariables)for(var c=
0,r=b.visualVariables;c<r.length;c++){var y=r[c];if("size"===y.type&&"outline"===y.target){d|=u.getTypeOfSizeVisualVariable(y);break}}h.push({symbol:a.outline,vv:d})}h.push({symbol:e,vv:v(b.visualVariables,!0)})}else if(f.isFillSymbol(e)){d=l.WGLVVFlag.NONE;if(b.visualVariables)for(c=0,r=b.visualVariables;c<r.length;c++)a=r[c],a=a.type,"color"===a?d|=l.WGLVVFlag.COLOR:"opacity"===a&&(d|=l.WGLVVFlag.OPACITY);h.push({symbol:e,vv:d});if(e.outline&&"none"!==e.outline.style){d=l.WGLVVFlag.NONE;if(b.visualVariables)for(c=
0,b=b.visualVariables;c<b.length;c++)if(a=b[c],"size"===a.type&&"outline"===a.target){d|=u.getTypeOfSizeVisualVariable(a);break}h.push({symbol:e.outline,vv:d})}}else f.isLineSymbol(e)&&h.push({symbol:e,vv:v(b.visualVariables,a)})}for(e=0;e<h.length;e++){d=h[e];a=d.symbol;b=f.getSymbolGeometryType(a);c=0!==d.vv;switch(b){case g.WGLGeometryType.MARKER:n.icon||(n.icon=f.getStrides(g.WGLGeometryType.MARKER,c,!1));break;case g.WGLGeometryType.LINE:n.line||(n.line=f.getStrides(g.WGLGeometryType.LINE,c));
break;case g.WGLGeometryType.FILL:n.fill||(n.fill=f.getStrides(g.WGLGeometryType.FILL,c));break;case g.WGLGeometryType.TEXT:n.text||(n.text=f.getStrides(g.WGLGeometryType.TEXT,c))}if(b===g.WGLGeometryType.TEXT)for(b=0,a=B.createTextDisplayRecords(t,d,p,k,q,f.getTextProperties(a));b<a.length;b++)x.displayRecords.push(a[b]);else if(c=q.get(a),d=z.createMaterialInfo(k,c,b,d.vv),a=A.createMesh(p,k,d.materialKeyInfo,c,b,w,m,t,a))c=new D,c.setData(p,b,a,d,0,0),x.displayRecords.push(c)}return x}});