// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.7/esri/copyright.txt for details.
//>>built
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/Collection ../core/collectionUtils ../core/Logger ../core/accessorSupport/decorators ../layers/Layer".split(" "),function(v,w,m,k,n,p,l,q,f,r){function g(e,d,b){for(var a,c=0,t=e.length;c<t;c++)if(a=e.getItemAt(c),a[d]===b||a&&null!=a.layers&&(a=g(a.layers,d,b)))return a}var h=p.ofType(r),u=q.getLogger("esri.support.LayersMixin");return function(e){function d(b){var a=e.call(this,
b)||this;a.layers=new h;a.layers.on("after-add",function(c){c=c.item;c.parent&&c.parent!==a&&"remove"in c.parent&&c.parent.remove(c);c.parent=a;a.layerAdded(c);"elevation"===c.type&&u.error("Layer '"+c.title+", id:"+c.id+"' of type '"+c.type+"' is not supported as an operational layer and will therefore be ignored.")});a.layers.on("after-remove",function(c){c=c.item;c.parent=null;a.layerRemoved(c)});return a}m(d,e);d.prototype.destroy=function(){this.layers.drain(this.layerRemoved,this)};Object.defineProperty(d.prototype,
"layers",{set:function(b){this._set("layers",l.referenceSetter(b,this._get("layers"),h))},enumerable:!0,configurable:!0});d.prototype.findLayerById=function(b){return g(this.layers,"id",b)};d.prototype.add=function(b,a){var c=this.layers;a=c.getNextIndex(a);b.parent===this?this.reorder(b,a):c.add(b,a)};d.prototype.addMany=function(b,a){var c=this,d=this.layers;a=d.getNextIndex(a);b.slice().forEach(function(b){b.parent===c?c.reorder(b,a):(d.add(b,a),a+=1)})};d.prototype.findLayerByUid=function(b){return g(this.layers,
"uid",b)};d.prototype.remove=function(b){return this.layers.remove(b)};d.prototype.removeMany=function(b){return this.layers.removeMany(b)};d.prototype.removeAll=function(){return this.layers.removeAll()};d.prototype.reorder=function(b,a){return this.layers.reorder(b,a)};d.prototype.layerAdded=function(b){};d.prototype.layerRemoved=function(b){};k([f.property({type:h,cast:l.castForReferenceSetter})],d.prototype,"layers",null);return d=k([f.subclass("esri.support.LayersMixin")],d)}(f.declared(n))});