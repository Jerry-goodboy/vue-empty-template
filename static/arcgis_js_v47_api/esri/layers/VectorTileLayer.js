// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.7/esri/copyright.txt for details.
//>>built
require({cache:{"esri/layers/support/vectorTileLayerLoader":function(){define("require exports dojo/has dojo/_base/lang ../../config ../../request ../../core/promiseUtils ../../core/urlUtils".split(" "),function(m,f,d,a,e,b,n,g){function l(b){if(b){var a=g.getOrigin(b);g.canUseXhr(a)||-1!==q.indexOf(a)||q.push(a);return b}}function h(b,a){var l=b.parsedUrl;if(null!=a.sources){var h=null;l&&(h=l.path.substring(0,l.path.lastIndexOf("/")),b.styleUrl=l.path);h||(h=(h=r(a,l))&&h.url);a.jsonUrl&&(b.styleUrl=
a.jsonUrl);var l=a.sprite||null,e=a.glyphs||null;h&&(l&&!g.isAbsolute(l)&&(l=g.normalize(g.join(h,l))),e&&!g.isAbsolute(e)&&(e=g.normalize(g.join(h,e))));b.style=a;b.spriteUrl=l;b.glyphsUrl=e;return k(b,a)}if(a.hasOwnProperty("tileInfo"))return b.layerDefinition=a,b.serviceUrl=l.path,c(b,a)}function c(a,h){var c=a.parsedUrl;h=h.defaultStyles;g.isAbsolute(h)?a.styleUrl=g.normalize(h):a.styleUrl=g.normalize(g.join(c.path,h,"root.json"));l(a.styleUrl);return b(a.styleUrl,{responseType:"json"}).then(function(b){var l=
b.data.sprite||null,h=b.data.glyphs||null,c=g.removeFile(a.styleUrl);l&&!g.isAbsolute(l)&&(l=g.normalize(g.join(c,l)));h&&!g.isAbsolute(h)&&(h=g.normalize(g.join(c,h)));a.spriteUrl=l;a.glyphsUrl=h;return a.style=b.data})}function k(a,h){var c=a.parsedUrl;(h=r(h,c))||n.reject("Source isn't available in the style object!");if(h.url)return a.serviceUrl=h.url,g.isAbsolute(a.serviceUrl)||(a.serviceUrl=g.join(c.path,a.serviceUrl)),l(a.serviceUrl),b(a.serviceUrl,{query:{f:"json"},responseType:"json"}).then(function(b){a.layerDefinition=
t(b.data);return a});a.layerDefinition=t(h);return n.resolve(a)}function r(a,b){if(!a.sources)return null;var h=a.sources;a=null;if(h.esri)a=h.esri,b&&a.url&&!g.isAbsolute(a.url)&&(h=b.path.substring(0,b.path.lastIndexOf("/")),a.url=g.join(h,a.url));else{for(var l=0,c=Object.keys(h);l<c.length;l++)if(b=c[l],-1!==b.toLocaleLowerCase().indexOf("street")&&"vector"===a.type){a=h[b];break}if(!a)for(l=0,c=Object.keys(h);l<c.length&&(b=c[l],a=h[b],"vector"!==a.type);l++);}return a}function t(a){if(a.hasOwnProperty("tileInfo"))return a;
for(var b={xmin:-2.0037507067161843E7,ymin:-2.0037507067161843E7,xmax:2.0037507067161843E7,ymax:2.0037507067161843E7,spatialReference:{wkid:102100}},h=(b.xmax-b.xmin)/512,c=[],g=a.hasOwnProperty("minzoom")?parseFloat(a.minzoom):0,k=a.hasOwnProperty("maxzoom")?parseFloat(a.maxzoom):16;g<k;g++){var e=h/Math.pow(2,g);c.push({level:g,scale:Math.floor(3779.527559055118*e),resolution:e})}a.tiles.forEach(l);return{capabilities:"TilesOnly",initialExtent:b,fullExtent:b,minScale:c[0].scale,maxScale:c[c.length-
1].scale,tiles:a.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-2.0037508342787E7,y:2.0037508342787E7},lods:c,spatialReference:{wkid:102100}}}}Object.defineProperty(f,"__esModule",{value:!0});var q=e.defaults&&e.defaults.io.corsEnabledServers||e.request.corsEnabledServers;f.loadMetadata=function(c){if(!c)return n.reject("invalid input URL!");var e={layerDefinition:null,parsedUrl:null,serviceUrl:null,style:null,styleUrl:null,url:null,spriteUrl:null,glyphsUrl:null};if("string"!==typeof c)return h(e,
c).then(function(){return e});c=e.url=g.normalize(c);var k=e.parsedUrl=g.urlToObject(c);l(c);return b(k.path,{responseType:"json",query:a.mixin({f:"json"},k.query)}).then(function(a){return h(e,a.data)}).then(function(){return e})}})},"esri/portal/support/jsonContext":function(){define(["require","exports","../../core/urlUtils","../Portal"],function(m,f,d,a){Object.defineProperty(f,"__esModule",{value:!0});f.createForItem=function(e){return{origin:"portal-item",url:d.urlToObject(e.itemUrl),portal:e.portal||
a.getDefault()}}})},"esri/views/vectorTiles/SchemaHelper":function(){define(["require","exports"],function(m,f){return function(){function d(a,e){this.lockedSchemaPixelSize=a;this.isWGS84=e}d.prototype.getCompatibleLevelRowCol=function(a){var e=a[0],b=a[1];a=a[2];this.isWGS84?(b>>=1,a>>=1):256===this.lockedSchemaPixelSize&&0<e&&(e--,b>>=1,a>>=1);return[e,b,a]};d.prototype.getSchemaShift=function(a,e){var b=0,n=0;if(256===this.lockedSchemaPixelSize||this.isWGS84)a[2]%2&&(b=2*e),a[1]%2&&(n=2*e);return[b,
n]};d.prototype.adjustLevel=function(a){return this.isWGS84?a:256===this.lockedSchemaPixelSize?0<a?a-1:0:a};d.create256x256CompatibleTileInfo=function(a){if(!a)return null;if(256===a.rows&&256===a.cols)return a;for(var e=a.format,b=a.compressionQuality,n=a.dpi,g=a.origin,l=a.spatialReference,h=4326===l.wkid,c=[],k,d,f=a.lods.length,m=0;m<f;m++){var p=a.lods[m];k=p.scale;d=h?p.resolution:2*p.resolution;c.push({level:p.level,scale:k,resolution:d})}return{rows:256,cols:256,dpi:n,format:e,compressionQuality:b,
origin:g,spatialReference:l,lods:c}};d.create512x512CompatibleTileInfo=function(a){if(!a||256===a.rows||256===a.cols)return null;for(var e=a.format,b=a.compressionQuality,n=a.dpi,g=a.origin,l=a.spatialReference,h=[],c,k,d=a.lods.length,f=0;f<d;f++){var m=a.lods[f];c=m.scale;k=.5*m.resolution;h.push({level:m.level,scale:c,resolution:k})}return{rows:512,cols:512,dpi:n,format:e,compressionQuality:b,origin:g,spatialReference:l,lods:h}};return d}()})},"esri/views/vectorTiles/style/StyleRepository":function(){define(["require",
"exports","dojo/has","./StyleLayer"],function(m,f,d,a){return function(){function e(a,n){this.styleJSON=a;this.version=parseFloat(a.version);this.sprite=n?n.spriteUrl:a.sprite;this.glyphs=n?n.glyphsUrl:a.glyphs;if(d("stable-symbol-rendering")){var b=(a.layers||[]).filter(function(a){return a.layout&&a.layout["text-font"]})[0];b&&(a.layers||[]).forEach(function(a){a.layout&&a.layout["text-font"]&&(a.layout["text-font"]=b.layout["text-font"])})}this.layers=(a.layers||[]).map(e._create);this._identifyRefLayers()}
e.prototype._identifyRefLayers=function(){for(var a=[],e=[],g=0,l=0,h=this.layers;l<h.length;l++){var c=h[l];if(1===c.type){var k=c,d=c.sourceLayer,d=d+("|"+JSON.stringify(c.minzoom)),d=d+("|"+JSON.stringify(c.maxzoom)),d=d+("|"+JSON.stringify(c.filter));if(k.hasDataDrivenFill||k.hasDataDrivenOutline)d+="|"+JSON.stringify(g);a.push({key:d,layer:c})}2===c.type&&(k=c,d=c.sourceLayer,d+="|"+JSON.stringify(c.minzoom),d+="|"+JSON.stringify(c.maxzoom),d+="|"+JSON.stringify(c.filter),d+="|"+JSON.stringify(c.layout&&
c.layout["line-cap"]),d+="|"+JSON.stringify(c.layout&&c.layout["line-join"]),k.hasDataDrivenLine&&(d+="|"+JSON.stringify(g)),e.push({key:d,layer:c}));++g}this._assignRefLayers(a);this._assignRefLayers(e)};e.prototype._assignRefLayers=function(a){a.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var b,g,l=a.length,h=0;h<l;h++){var c=a[h];if(c.key===b)c.layer.refLayerId=g;else if(b=c.key,g=c.layer.id,1===c.layer.type&&!c.layer.getPaintProperty("fill-outline-color"))for(var e=h+1;e<l;e++){var d=
a[e];if(d.key===b){if(d.layer.getPaintProperty("fill-outline-color")){a[h]=d;a[e]=c;g=d.layer.id;break}}else break}}};e._create=function(b,e,g){e=1-1/(g.length+1)*(1+e);switch(b.type){case "background":return new a.BackgroundStyleLayer(0,b,e);case "fill":return new a.FillStyleLayer(1,b,e);case "line":return new a.LineStyleLayer(2,b,e);case "symbol":return new a.SymbolStyleLayer(3,b,e);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new a.CircleStyleLayer(4,b,
e)}throw Error("Unknown vector tile layer");};return e}()})},"esri/views/vectorTiles/style/StyleLayer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Filter ./StyleDefinition ./StyleProperty".split(" "),function(m,f,d,a,e,b,n){Object.defineProperty(f,"__esModule",{value:!0});m=function(){function a(a,h,c){this.type=a;this.id=h.id;this.source=h.source;this.sourceLayer=h["source-layer"];this.minzoom=h.minzoom;this.maxzoom=h.maxzoom;
this.filter=h.filter;this.layout=h.layout;this.paint=h.paint;this.z=c;switch(a){case 0:this._layoutDefinition=b.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=b.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=b.StyleDefinition.fillLayoutDefinition;this._paintDefinition=b.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=b.StyleDefinition.lineLayoutDefinition;this._paintDefinition=b.StyleDefinition.linePaintDefinition;break;case 3:this._layoutDefinition=
b.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=b.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=b.StyleDefinition.circleLayoutDefinition,this._paintDefinition=b.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}a.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=e.createFilter(this.filter)};a.prototype.getLayoutProperty=
function(a){var b=this._layoutProperties;if(b)return b[a]};a.prototype.getPaintProperty=function(a){var b=this._paintProperties;if(b)return b[a]};a.prototype.getLayoutValue=function(a,b,c){var h,l=this._layoutProperties;l&&(l=l[a])&&(h=l.getValue(b,c));a=this._layoutDefinition[a];void 0===h&&(h=a["default"]);"enum"===a.type&&(h=a.values.indexOf(h));return h};a.prototype.getPaintValue=function(a,b,c){var h,g=this._paintProperties;g&&(g=g[a])&&(h=g.getValue(b,c));a=this._paintDefinition[a];void 0===
h&&(h=a["default"]);"enum"===a.type&&(h=a.values.indexOf(h));return h};a.prototype._parseLayout=function(a){var b={},c;for(c in a){var g=this._layoutDefinition[c];g&&(b[c]=new n(c,g,a[c]))}return b};a.prototype._parsePaint=function(a){var b={},c;for(c in a){var g=this._paintDefinition[c];g&&(b[c]=new n(c,g,a[c]))}return b};return a}();f.StyleLayer=m;a=function(a){function b(b,c,g){return a.call(this,b,c,g)||this}d(b,a);return b}(m);f.BackgroundStyleLayer=a;a=function(a){function b(b,c,g){b=a.call(this,
b,c,g)||this;b.hasDataDrivenFill=!1;(c=b.getPaintProperty("fill-color"))&&c.isDataDriven&&(b.hasDataDrivenFill=!0);(g=b.getPaintProperty("fill-opacity"))&&g.isDataDriven&&(b.hasDataDrivenFill=!0);b.hasDataDrivenOutline=!1;(g=b.getPaintProperty("fill-outline-color"))&&g.isDataDriven&&(b.hasDataDrivenOutline=!0);!g&&c&&c.isDataDriven&&(b.hasDataDrivenOutline=!0);return b}d(b,a);return b}(m);f.FillStyleLayer=a;a=function(a){function b(b,c,g){b=a.call(this,b,c,g)||this;b.hasDataDrivenLine=!1;(c=b.getPaintProperty("line-color"))&&
c.isDataDriven&&(b.hasDataDrivenLine=!0);(c=b.getPaintProperty("line-opacity"))&&c.isDataDriven&&(b.hasDataDrivenLine=!0);(c=b.getPaintProperty("line-width"))&&c.isDataDriven&&(b.hasDataDrivenLine=!0);return b}d(b,a);return b}(m);f.LineStyleLayer=a;a=function(a){function b(b,c,g){b=a.call(this,b,c,g)||this;b.hasDataDrivenIcon=!1;(c=b.getPaintProperty("icon-color"))&&c.isDataDriven&&(b.hasDataDrivenIcon=!0);(c=b.getPaintProperty("icon-opacity"))&&c.isDataDriven&&(b.hasDataDrivenIcon=!0);(c=b.getLayoutProperty("icon-size"))&&
c.isDataDriven&&(b.hasDataDrivenIcon=!0);b.hasDataDrivenText=!1;(c=b.getPaintProperty("text-color"))&&c.isDataDriven&&(b.hasDataDrivenText=!0);(c=b.getPaintProperty("text-opacity"))&&c.isDataDriven&&(b.hasDataDrivenText=!0);(c=b.getLayoutProperty("text-size"))&&c.isDataDriven&&(b.hasDataDrivenText=!0);return b}d(b,a);return b}(m);f.SymbolStyleLayer=a;m=function(a){function b(b,c,g){return a.call(this,b,c,g)||this}d(b,a);return b}(m);f.CircleStyleLayer=m;m=function(){return function(a,b,e){this.cap=
a.getLayoutValue("line-cap",b,e);this.join=a.getLayoutValue("line-join",b,e);this.miterLimit=a.getLayoutValue("line-miter-limit",b,e);this.roundLimit=a.getLayoutValue("line-round-limit",b,e)}}();f.LineLayout=m;m=function(){return function(a,b,e,c){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",b,c);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",b,c);this.optional=a.getLayoutValue("icon-optional",b,c);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",b,c);this.size=
a.getLayoutValue("icon-size",b,c);this.rotate=a.getLayoutValue("icon-rotate",b,c);this.padding=a.getLayoutValue("icon-padding",b,c);this.keepUpright=a.getLayoutValue("icon-keep-upright",b,c);this.offset=a.getLayoutValue("icon-offset",b,c);2===this.rotationAlignment&&(this.rotationAlignment=e?0:1)}}();f.IconLayout=m;m=function(){return function(a,b,e,c){this.allowOverlap=a.getLayoutValue("text-allow-overlap",b,c);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",b,c);this.optional=a.getLayoutValue("text-optional",
b,c);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",b,c);this.fontArray=a.getLayoutValue("text-font",b,c);this.maxWidth=a.getLayoutValue("text-max-width",b,c);this.lineHeight=a.getLayoutValue("text-line-height",b,c);this.letterSpacing=a.getLayoutValue("text-letter-spacing",b,c);this.justify=a.getLayoutValue("text-justify",b,c);this.anchor=a.getLayoutValue("text-anchor",b,c);this.maxAngle=a.getLayoutValue("text-max-angle",b,c);this.size=a.getLayoutValue("text-size",b,c);this.rotate=
a.getLayoutValue("text-rotate",b,c);this.padding=a.getLayoutValue("text-padding",b,c);this.keepUpright=a.getLayoutValue("text-keep-upright",b,c);this.transform=a.getLayoutValue("text-transform",b,c);this.offset=a.getLayoutValue("text-offset",b,c);2===this.rotationAlignment&&(this.rotationAlignment=e?0:1)}}();f.TextLayout=m})},"esri/views/vectorTiles/style/Filter":function(){define(["require","exports"],function(m,f){return function(){function d(a,e,b){this._op=a;"$type"===e?(this._val=b instanceof
Array?b.map(function(a){return d._types.indexOf(a)}):d._types.indexOf(b),this._op+=11):(this._key=e,this._val=b)}d.prototype.filter=function(a){switch(this._op){case 0:return this._val;case 1:return a.values[this._key]===this._val;case 2:return a.values[this._key]!==this._val;case 3:return a.values[this._key]<this._val;case 4:return a.values[this._key]>this._val;case 5:return a.values[this._key]<=this._val;case 6:return a.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(a.values[this._key]);
case 8:return-1===this._val.indexOf(a.values[this._key]);case 9:for(var e=0,b=this._val;e<b.length;e++){var d=b[e];if(d.filter(a))return!0}return!1;case 10:e=0;for(b=this._val;e<b.length;e++)if(d=b[e],!d.filter(a))return!1;return!0;case 11:e=0;for(b=this._val;e<b.length;e++)if(d=b[e],d.filter(a))return!1;return!0;case 12:return a.type===this._val;case 13:return a.type!==this._val;case 14:return a.type<this._val;case 15:return a.type>this._val;case 16:return a.type>=this._val;case 17:return a.type<=
this._val;case 18:return-1!==this._val.indexOf(a.type);case 19:return-1===this._val.indexOf(a.type)}};d.createFilter=function(a){if(!a)return new d(0,void 0,!0);var e=a[0];if(1>=a.length)return new d(0,void 0,"any"!==e);switch(e){case "\x3d\x3d":return new d(1,a[1],a[2]);case "!\x3d":return new d(2,a[1],a[2]);case "\x3e":return new d(4,a[1],a[2]);case "\x3c":return new d(3,a[1],a[2]);case "\x3e\x3d":return new d(6,a[1],a[2]);case "\x3c\x3d":return new d(5,a[1],a[2]);case "in":return new d(7,a[1],
a.slice(2));case "!in":return new d(8,a[1],a.slice(2));case "any":return new d(9,void 0,a.slice(1).map(d.createFilter.bind(this)));case "all":return new d(10,void 0,a.slice(1).map(d.createFilter.bind(this)));case "none":return new d(11,void 0,a.slice(1).map(d.createFilter.bind(this)));default:throw Error("invalid operator: "+e);}};d._types=["Unknown","Point","LineString","Polygon"];return d}()})},"esri/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(m,f){Object.defineProperty(f,
"__esModule",{value:!0});m=function(){function d(){}d.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};d.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};d.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"line-cap":{type:"enum",values:["butt","round","square"],"default":"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],"default":"miter"},"line-miter-limit":{type:"number",
"default":2},"line-round-limit":{type:"number","default":1.05}};d.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"},"symbol-placement":{type:"enum",values:["point","line"],"default":"point"},"symbol-spacing":{type:"number",minimum:1,"default":250},"symbol-avoid-edges":{type:"boolean","default":!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean","default":!1},"icon-ignore-placement":{type:"boolean","default":!1},"icon-optional":{type:"boolean",
"default":!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],"default":"auto"},"icon-size":{type:"number",minimum:0,"default":1},"icon-rotate":{type:"number","default":0},"icon-padding":{type:"number",minimum:0,"default":2},"icon-keep-upright":{type:"boolean","default":!1},"icon-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],"default":"auto"},"text-font":{type:"array",
value:"string","default":["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,"default":16},"text-max-width":{type:"number",minimum:0,"default":10},"text-line-height":{type:"number","default":1.2},"text-letter-spacing":{type:"number","default":0},"text-justify":{type:"enum",values:["left","center","right"],"default":"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),"default":"center"},
"text-max-angle":{type:"number",minimum:0,"default":45},"text-rotate":{type:"number","default":0},"text-padding":{type:"number",minimum:0,"default":2},"text-keep-upright":{type:"boolean","default":!0},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],"default":"none"},"text-offset":{type:"array",value:"number",length:2,"default":[0,0]},"text-allow-overlap":{type:"boolean","default":!1},"text-ignore-placement":{type:"boolean","default":!1},"text-optional":{type:"boolean","default":!1}};
d.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],"default":"visible"}};d.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,"default":1},"background-color":{type:"color","default":[0,0,0,1]},"background-pattern":{type:"string"}};d.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,"default":1},"fill-antialias":{type:"boolean","default":!0},"fill-color":{type:"color","default":[0,0,0,1]},"fill-outline-color":{type:"color",
"default":[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,"default":[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"fill-pattern":{type:"string"}};d.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,"default":1},"line-color":{type:"color","default":[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,"default":[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"line-width":{type:"number",
minimum:0,"default":1},"line-gap-width":{type:"number",minimum:0,"default":0},"line-offset":{type:"number","default":0},"line-blur":{type:"number",minimum:0,"default":0},"line-dasharray":{type:"array",value:"number","default":[]},"line-pattern":{type:"string"}};d.symbolPaintDefinition={"icon-opacity":{type:"number",minimum:0,maximum:1,"default":1},"icon-color":{type:"color","default":[0,0,0,1]},"icon-halo-color":{type:"color","default":[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,"default":0},
"icon-halo-blur":{type:"number",minimum:0,"default":0},"icon-translate":{type:"array",value:"number",length:2,"default":[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"text-opacity":{type:"number",minimum:0,maximum:1,"default":1},"text-color":{type:"color","default":[0,0,0,1]},"text-halo-color":{type:"color","default":[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,"default":0},"text-halo-blur":{type:"number",minimum:0,"default":0},"text-translate":{type:"array",
value:"number",length:2,"default":[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"}};d.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,"default":1},"raster-hue-rotate":{type:"number","default":0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,"default":0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,"default":1},"raster-saturation":{type:"number",minimum:-1,maximum:1,"default":0},"raster-contrast":{type:"number",
minimum:-1,maximum:1,"default":0},"raster-fade-duration":{type:"number",minimum:0,"default":300}};d.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,"default":1},"circle-radius":{type:"number",minimum:0,"default":5},"circle-color":{type:"color","default":[0,0,0,1]},"circle-blur":{type:"number",minimum:0,"default":0},"circle-translate":{type:"array",value:"number",length:2,"default":[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],"default":"map"},"circle-stroke-width":{type:"number",
minimum:0,"default":0},"circle-stroke-color":{type:"color","default":[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,"default":1}};return d}();f.StyleDefinition=m})},"esri/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(m,f,d,a){return function(){function e(a,d,g){this.isDataDriven=!1;switch(d.type){case "number":a=!0;break;case "color":a=!0;g=e._parseColor(g);break;case "array":a="number"===d.value;
break;default:a=!1}null==g&&(g=d.default);a&&"interval"===g.type&&(a=!1);var b=g&&g.stops&&0<g.stops.length;if(this.isDataDriven=g&&!!g.property)if(b)switch(g.type){case "identity":this.getValue=this._buildIdentity(g,d);break;case "categorical":this.getValue=this._buildCategorical(g,d);break;default:this.getValue=a?this._buildInterpolate(g,d):this._buildInterval(g,d)}else this.getValue=this._buildIdentity(g,d);else this.getValue=b?a?this._buildZoomInterpolate(g):this._buildZoomInterval(g):this._buildSimple(g)}
e.prototype._buildSimple=function(a){return function(){return a}};e.prototype._buildIdentity=function(a,d){return function(b,l){var g;l&&(g=l.values[a.property],"color"===d.type&&(g=e._parseColor(g)));return void 0!==g?g:void 0!==a.default?a.default:d.default}};e.prototype._buildCategorical=function(a,e){var b=this;return function(g,d){var c;d&&(c=d.values[a.property]);c=b._categorical(c,a.stops);return void 0!==c?c:void 0!==a.default?a.default:e.default}};e.prototype._buildInterval=function(a,e){var b=
this;return function(g,d){var c;d&&(c=d.values[a.property]);return"number"===typeof c?b._interval(c,a.stops):void 0!==a.default?a.default:e.default}};e.prototype._buildInterpolate=function(a,e){var b=this;return function(g,d){var c;d&&(c=d.values[a.property]);return"number"===typeof c?b._interpolate(c,a.stops,a.base||1):void 0!==a.default?a.default:e.default}};e.prototype._buildZoomInterpolate=function(a){var b=this;return function(e){return b._interpolate(e,a.stops,a.base||1)}};e.prototype._buildZoomInterval=
function(a){var b=this;return function(e){return b._interval(e,a.stops)}};e.prototype._categorical=function(a,e){for(var b=e.length,d=0;d<b;d++)if(e[d][0]===a)return e[d][1]};e.prototype._interval=function(a,e){for(var b=e.length,d=0,h=0;h<b;h++)if(e[h][0]<=a)d=h;else break;return e[d][1]};e.prototype._interpolate=function(b,e,d){for(var g,h,c=e.length,k=0;k<c;k++){var f=e[k];if(f[0]<=b)g=f;else{h=f;break}}if(g&&h){k=h[0]-g[0];b-=g[0];d=1===d?b/k:(Math.pow(d,b)-1)/(Math.pow(d,k)-1);if(Array.isArray(g[1])){g=
g[1];h=h[1];b=[];for(k=0;k<g.length;k++)b.push(a.interpolate(g[k],h[k],d));return b}return a.interpolate(g[1],h[1],d)}if(g)return g[1];if(h)return h[1]};e._isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};e._parseColor=function(a){if(Array.isArray(a))return a;if("string"===typeof a){if(a=new d(a),!this._isEmpty(a))return d.toUnitRGBA(a)}else return a&&a.default&&(a.default=e._parseColor(a.default)),a&&a.stops&&(a.stops=a.stops.map(function(a){return[a[0],e._parseColor(a[1])]})),
a};return e}()})},"esri/views/vectorTiles/GeometryUtils":function(){define(["require","exports"],function(m,f){function d(a,b){a%=b;return 0<=a?a:a+b}Object.defineProperty(f,"__esModule",{value:!0});f.C_INFINITY=Number.POSITIVE_INFINITY;f.C_PI=Math.PI;f.C_2PI=2*f.C_PI;f.C_PI_BY_2=f.C_PI/2;f.C_RAD_TO_256=128/f.C_PI;f.C_256_TO_RAD=f.C_PI/128;f.C_DEG_TO_256=256/360;f.C_DEG_TO_RAD=f.C_PI/180;f.C_SQRT2=1.414213562;f.C_SQRT2_INV=1/f.C_SQRT2;var a=1/Math.LN2;f.positiveMod=d;f.radToByte=function(a){return d(a*
f.C_RAD_TO_256,256)};f.degToByte=function(a){return d(a*f.C_DEG_TO_256,256)};f.log2=function(e){return Math.log(e)*a};f.sqr=function(a){return a*a};f.clamp=function(a,b,d){return Math.min(Math.max(a,b),d)};f.interpolate=function(a,b,d){return a*(1-d)+b*d};f.between=function(a,b,d){return a>=b&&a<=d||a>=d&&a<=b}})},"*noref":1}});
define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang ../request ../core/Error ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/urlUtils ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ./TiledLayer ./mixins/ArcGISCachedService ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./support/TileInfo ./support/TilemapCache ./support/vectorTileLayerLoader ../portal/support/jsonContext ../views/vectorTiles/SchemaHelper ../views/vectorTiles/style/StyleRepository".split(" "),function(m,
f,d,a,e,b,n,g,l,h,c,k,r,t,q,p,x,y,z,u,v,A,B,w,C){return function(g){function f(a,b){a=g.call(this)||this;a.capabilities=null;a.currentStyleInfo=null;a.fullExtent=null;a.style=null;a.operationalLayerType="VectorTileLayer";a.tileInfo=null;a.tilemapCache=null;a.type="vector-tile";a.url=null;return a}d(f,g);f.prototype.normalizeCtorArgs=function(a,b){return"string"===typeof a?e.mixin({},{url:a},b):a};f.prototype.load=function(){var a=this,c=this.loadFromPortal({supportedTypes:["Vector Tile Service"],
supportsData:!1}).then(function(){if(a.portalItem&&a.portalItem.id){var c=a.portalItem.itemUrl+"/resources/styles/root.json";return b(c,{query:{f:"json"}}).then(function(b){b.data&&a.read({url:c},B.createForItem(a.portalItem))})}}).always(function(){return a.loadStyle()});this.addResolvingPromise(c);return this.when()};Object.defineProperty(f.prototype,"attributionDataUrl",{get:function(){var a=this.currentStyleInfo;return(a=a&&a.serviceUrl&&c.urlToObject(a.serviceUrl))?this._getDefaultAttribution(a.path):
null},enumerable:!0,configurable:!0});f.prototype.readCapabilities=function(a,b){return{supportsExportTiles:!!(b&&b.hasOwnProperty("exportTilesAllowed")&&b.exportTilesAllowed),supportsTileMapIndexing:b.capabilities?-1!==b.capabilities.toLowerCase().indexOf("tilemap"):!1}};Object.defineProperty(f.prototype,"parsedUrl",{get:function(){return this.serviceUrl?h.urlToObject(this.serviceUrl):null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"serviceUrl",{get:function(){return this.currentStyleInfo&&
this.currentStyleInfo.serviceUrl||null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"spatialReference",{get:function(){return this.tileInfo&&this.tileInfo.spatialReference||null},enumerable:!0,configurable:!0});Object.defineProperty(f.prototype,"styleUrl",{get:function(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null},enumerable:!0,configurable:!0});f.prototype.writeStyleUrl=function(a,b){a&&c.isProtocolRelative(a)&&(a="https:"+a);b.styleUrl=a};f.prototype.readTileIndexType=
function(a,b){return b.type};f.prototype.readTileIndexUrl=function(a,b){return c.join(this.serviceUrl,b.tileMap)};f.prototype.readTilemapCache=function(a,b){return b.capabilities&&-1<b.capabilities.indexOf("Tilemap")?new v({layer:this}):null};f.prototype.readTileServers=function(a,b){var d=this;a=b.tiles;this.serviceUrl&&a.forEach(function(a,b,e){e[b]=c.join(d.serviceUrl,a)});return a};f.prototype.readVersion=function(a,b){return b.version?parseFloat(b.version):parseFloat(b.currentVersion)};f.prototype.readCompatibleTileInfo256=
function(a,b){return u.fromJSON(w.create256x256CompatibleTileInfo(b.tileInfo))};f.prototype.readCompatibleTileInfo512=function(a,b){return u.fromJSON(w.create512x512CompatibleTileInfo(b.tileInfo))};f.prototype.loadStyle=function(a){a=a||this.style||this.url;if(this._loadingPromise&&"string"===typeof a&&this.url===a)return this._loadingPromise;var b=this._loadingPromise;this._loadingPromise=this._getSourceAndStyle(a);b&&!b.isFulfilled()&&b.cancel();return this._loadingPromise};f.prototype.getTileUrl=
function(a,b,c){var d=this.tileServers[b%this.tileServers.length];return d=d.replace(/\{z\}/gi,a.toString()).replace(/\{y\}/gi,b.toString()).replace(/\{x\}/gi,c.toString())};f.prototype.write=function(a,b){return b&&b.origin&&!this.styleUrl?(b.messages&&b.messages.push(new n("vectortilelayer:unsupported","VectorTileLayer ("+this.title+", "+this.id+") with style defined by JSON only are not supported",{layer:this})),null):this.inherited(arguments,[a,b])};f.prototype.importLayerViewModule=function(a){switch(a.type){case "2d":return l.create(function(a){return m(["../views/2d/layers/VectorTileLayerView2D"],
a)});case "3d":return l.create(function(a){return m(["../views/3d/layers/VectorTileLayerView3D"],a)})}};f.prototype._getSourceAndStyle=function(a){var b=this;return a?A.loadMetadata(a).then(function(c){b._set("currentStyleInfo",{serviceUrl:c.serviceUrl,styleUrl:c.styleUrl,spriteUrl:c.spriteUrl,glyphsUrl:c.glyphsUrl,style:c.style,layerDefinition:c.layerDefinition});"string"===typeof a?(b.url=a,b.style=null):(b.url=null,b.style=a);b._set("styleRepository",new C(c.style,c));b.read(c.layerDefinition)}):
l.reject(Error("invalid style!"))};f.prototype._getDefaultAttribution=function(a){var b=a.match(/^https?:\/\/(basemaps|basemapsbeta|basemapsdev)\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i);if(b&&(a=b[3]&&b[3].toLowerCase()))for(var b=b[2]||"",d=0,e=["World_Basemap","World_Basemap_v2","World_Basemap_GCS_v2","World_Basemap_WGS84"];d<e.length;d++){var f=e[d];if(-1<f.toLowerCase().indexOf(a))return c.normalize("//static.arcgis.com/attribution/Vector"+b+"/"+
f)}};a([k.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],f.prototype,"attributionDataUrl",null);a([k.property({readOnly:!0})],f.prototype,"capabilities",void 0);a([k.reader("capabilities",["exportTilesAllowed","capabilities"])],f.prototype,"readCapabilities",null);a([k.property({readOnly:!0})],f.prototype,"currentStyleInfo",void 0);a([k.property({type:r,readOnly:!0})],f.prototype,"fullExtent",void 0);a([k.property()],f.prototype,"style",void 0);a([k.property({readOnly:!0,dependsOn:["serviceUrl"]})],
f.prototype,"parsedUrl",null);a([k.property({readOnly:!0,dependsOn:["currentStyleInfo"]})],f.prototype,"serviceUrl",null);a([k.property({type:t,dependsOn:["tileInfo"],readOnly:!0})],f.prototype,"spatialReference",null);a([k.property({readOnly:!0})],f.prototype,"styleRepository",void 0);a([k.property({type:String,readOnly:!0,dependsOn:["currentStyleInfo"],json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],f.prototype,"styleUrl",null);a([k.writer(["portal-item",
"web-document"],"styleUrl")],f.prototype,"writeStyleUrl",null);a([k.property({readOnly:!0})],f.prototype,"tileIndexType",void 0);a([k.reader("tileIndexType",["tileIndexType","type"])],f.prototype,"readTileIndexType",null);a([k.property({readOnly:!0})],f.prototype,"tileIndexUrl",void 0);a([k.reader("tileIndexUrl",["tileIndexUrl","tileMap"])],f.prototype,"readTileIndexUrl",null);a([k.property({readOnly:!0,type:u})],f.prototype,"tileInfo",void 0);a([k.property({readOnly:!0,type:v})],f.prototype,"tilemapCache",
void 0);a([k.reader("tilemapCache",["capabilities"])],f.prototype,"readTilemapCache",null);a([k.property({readOnly:!0})],f.prototype,"tileServers",void 0);a([k.reader("tileServers",["tiles"])],f.prototype,"readTileServers",null);a([k.property({json:{read:!1},readOnly:!0,value:"vector-tile"})],f.prototype,"type",void 0);a([k.property({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],f.prototype,"url",void 0);a([k.property({readOnly:!0})],
f.prototype,"version",void 0);a([k.reader("version",["version","currentVersion"])],f.prototype,"readVersion",null);a([k.property({readOnly:!0})],f.prototype,"compatibleTileInfo256",void 0);a([k.reader("compatibleTileInfo256",["tileInfo"])],f.prototype,"readCompatibleTileInfo256",null);a([k.property({readOnly:!0})],f.prototype,"compatibleTileInfo512",void 0);a([k.reader("compatibleTileInfo512",["tileInfo"])],f.prototype,"readCompatibleTileInfo512",null);return f=a([k.subclass("esri.layers.VectorTileLayer")],
f)}(k.declared(q,x,y,z,g,p))});