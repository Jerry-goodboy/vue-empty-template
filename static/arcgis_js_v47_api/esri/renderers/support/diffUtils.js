// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.7/esri/copyright.txt for details.
//>>built
define("require exports dojo/_base/lang ../../core/Accessor ../../core/Collection ../../core/accessorSupport/utils".split(" "),function(A,h,f,u,k,x){function v(a){return a instanceof k?Object.keys(a.items):a instanceof u?x.getProperties(a).keys():a?Object.keys(a):[]}function r(a,b){return a instanceof k?a.items[b]:a[b]}function y(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function l(a){return a?a.declaredClass:null}function w(a,b){var e=a.diff;if(e&&f.isFunction(e))return e(a,
b);var m=v(a),n=v(b);if(0!==m.length||0!==n.length){if(!m.length||!n.length||y(a,b))return{type:"complete",oldValue:a,newValue:b};var p=n.filter(function(a){return-1===m.indexOf(a)}),q=m.filter(function(a){return-1===n.indexOf(a)}),p=m.filter(function(c){return-1<n.indexOf(c)&&r(a,c)!==r(b,c)}).concat(p,q).sort();if((q=l(a))&&-1<z.indexOf(q)&&p.length)return{type:"complete",oldValue:a,newValue:b};var t,q=a instanceof u&&b instanceof u,h;for(h in p){var g=p[h],c=r(a,g),d=r(b,g),k=void 0;!q&&(f.isFunction(c)||
f.isFunction(d))||c===d||null==c&&null==d||!(k=e&&e[g]&&f.isFunction(e[g])?e[g](c,d):"object"===typeof c&&"object"===typeof d&&l(c)===l(d)?w(c,d):{type:"complete",oldValue:c,newValue:d})||(t=t||{type:"partial",diff:{}},t.diff[g]=k)}return t}}Object.defineProperty(h,"__esModule",{value:!0});var z=["esri.Color","esri.portal.Portal"];h.diff=function(a,b){if(!f.isFunction(a)&&!f.isFunction(b)&&(a||b))return!a||!b||"object"===typeof a&&"object"===typeof a&&l(a)!==l(b)?{type:"complete",oldValue:a,newValue:b}:
w(a,b)}});